var Gs=Object.defineProperty,Ws=(e,t,l)=>t in e?Gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,pe=(e,t,l)=>(Ws(e,"symbol"!=typeof t?t+"":t,l),l);import{defineComponent as se,computed as f,openBlock as a,createElementBlock as u,normalizeClass as x,unref as o,createElementVNode as s,createCommentVNode as $,renderSlot as G,ref as S,toDisplayString as M,inject as Ne,nextTick as hl,isRef as Hn,mergeProps as _e,withModifiers as He,h as gt,resolveComponent as q,createBlock as Y,withCtx as he,useAttrs as Zs,createVNode as ge,createTextVNode as ye,watchEffect as jl,normalizeStyle as Gl,Fragment as ke,renderList as Me,withDirectives as xt,vModelCheckbox as Wl,withKeys as Js,createStaticVNode as gl,vModelSelect as Xs,useSlots as Zl,getCurrentInstance as We,onMounted as at,createSlots as Jl,normalizeProps as St,guardReactiveProps as cl,vModelDynamic as Ys,onUnmounted as Gt,watch as Dt,vModelText as eo,resolveDynamicComponent as zn,provide as Wt,resolveDirective as to}from"vue";import{errorResponseExcept as lo,dateFmt as Un,toTime as no,omit as it,enc as Ol,setQueryString as so,appendQueryString as zt,nameOf as oo,ApiResult as Ye,lastRightPart as kt,leftPart as pl,map as Ee,toDate as Ct,toDateTime as ao,toCamelCase as io,mapGet as fe,chop as ro,fromXsdDuration as qn,isDate as yl,timeFmt12 as uo,apiValue as co,indexOfAny as fo,createBus as mo,toKebabCase as jn,humanize as Oe,delaySet as Qn,rightPart as Tl,queryString as Bl,combinePaths as vo,toPascalCase as nt,errorResponse as vt,trimEnd as ho,$1 as fl,lastLeftPart as go,ResponseStatus as Il,ResponseError as On,HttpMethods as Xl,uniqueKeys as El,humanify as Kn,each as po}from"@servicestack/client";const yo={class:"flex items-center"},bo={key:0,class:"flex-shrink-0 mr-3"},wo={key:0,class:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},xo=s("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1),ko=[xo],$o={key:1,class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Co=s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z","clip-rule":"evenodd"},null,-1),_o=[Co],Lo={key:2,class:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Vo=s("path",{"fill-rule":"evenodd",d:"M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1),Mo=[Vo],So={key:3,class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Ao=s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1),Fo=[Ao],To=se({__name:"Alert",props:{type:{default:"warn"},hideIcon:{type:Boolean}},setup(l){const e=l,n=f(()=>"info"==e.type?"bg-blue-50 dark:bg-blue-200":"error"==e.type?"bg-red-50 dark:bg-red-200":"success"==e.type?"bg-green-50 dark:bg-green-200":"bg-yellow-50 dark:bg-yellow-200"),r=f(()=>"info"==e.type?"border-blue-400":"error"==e.type?"border-red-400":"success"==e.type?"border-green-400":"border-yellow-400"),i=f(()=>"info"==e.type?"text-blue-700":"error"==e.type?"text-red-700":"success"==e.type?"text-green-700":"text-yellow-700");return(e,t)=>(a(),u("div",{class:x([o(n),o(r),"border-l-4 p-4"])},[s("div",yo,[l.hideIcon?$("",!0):(a(),u("div",bo,["warn"==l.type?(a(),u("svg",wo,ko)):"error"==l.type?(a(),u("svg",$o,_o)):"info"==l.type?(a(),u("svg",Lo,Mo)):"success"==l.type?(a(),u("svg",So,Fo)):$("",!0)])),s("div",null,[s("p",{class:x([o(i),"text-sm"])},[G(e.$slots,"default")],2)])])],2))}}),Io={key:0,class:"rounded-md bg-green-50 dark:bg-green-200 p-4",role:"alert"},Do={class:"flex"},Po=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-green-400 dark:text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),jo={class:"ml-3"},Oo={class:"text-sm font-medium text-green-800"},Bo={key:0},Eo={class:"ml-auto pl-3"},Ro={class:"-mx-1.5 -my-1.5"},No=s("span",{class:"sr-only"},"Dismiss",-1),Ho=s("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})],-1),zo=[No,Ho],Uo=se({__name:"AlertSuccess",props:{message:null},setup(l){const n=S(!1);return(e,t)=>n.value?$("",!0):(a(),u("div",Io,[s("div",Do,[Po,s("div",jo,[s("h3",Oo,[l.message?(a(),u("span",Bo,M(l.message),1)):G(e.$slots,"default",{key:1})])]),s("div",Eo,[s("div",Ro,[s("button",{type:"button",class:"inline-flex rounded-md bg-green-50 dark:bg-green-200 p-1.5 text-green-500 dark:text-green-600 hover:bg-green-100 dark:hover:bg-green-700 dark:hover:text-white focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50 dark:ring-offset-green-200",onClick:t[0]||(t[0]=e=>n.value=!0)},zo)])])])]))}}),qo={class:"flex"},Qo=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"})])],-1),Ko={class:"ml-3"},Go={class:"text-sm text-red-700 dark:text-red-200"},Wo=se({__name:"ErrorSummary",props:{status:null,except:null,class:null},setup(e){const t=e;let l=Ne("ApiState",void 0);const n=f(()=>t.status||null!=l&&l.error.value?lo.call({responseStatus:t.status??(null==l?void 0:l.error.value)},t.except??[]):null);return(e,t)=>o(n)?(a(),u("div",{key:0,class:x("bg-red-50 dark:bg-red-900 border-l-4 border-red-400 p-4 "+e.$props.class)},[s("div",qo,[Qo,s("div",Ko,[s("p",Go,M(o(n)),1)])])],2)):$("",!0)}}),Zo=["id","aria-describedby"],Jo=se({__name:"InputDescription",props:{id:null,description:null},setup(l){return(e,t)=>l.description?(a(),u("div",{key:"description",class:"mt-2 text-sm text-gray-500",id:l.id+"-description","aria-describedby":l.id+"-description"},[s("div",null,M(l.description),1)],8,Zo)):$("",!0)}});function bl(e){return Un(e).replace(/\//g,"-")}function Gn(e){return null==e?"":no(e)}function Wn(e,t){e.value=null,hl(()=>e.value=t)}function Vt(l){return Object.keys(l).forEach(e=>{var t=l[e];l[e]=Hn(t)?o(t):t}),l}function At(e,t,l){l?(t.value=e.entering.cls+" "+e.entering.from,setTimeout(()=>t.value=e.entering.cls+" "+e.entering.to,0)):(t.value=e.leaving.cls+" "+e.leaving.from,setTimeout(()=>t.value=e.leaving.cls+" "+e.leaving.to,0))}function il(l){if(!("u"<typeof document)){let t=(null==l?void 0:l.after)||document.activeElement,e=t&&t.form;var a;e&&(l=':not([disabled]):not([tabindex="-1"])',l=e.querySelectorAll(`a:not([disabled]), button${l}, input[type=text]${l}, [tabindex]`+l),-1<(a=(l=Array.prototype.filter.call(l,e=>0<e.offsetWidth||0<e.offsetHeight||e===t)).indexOf(t)))&&(l[a+1]||l[0]).focus()}}function Pt(e){if(!e)return null;if("string"==typeof e)return e;var t="function"==typeof e?new e:"object"==typeof e?e:null;if(!t)throw new Error(`Invalid DTO Type '${typeof e}'`);if("function"!=typeof t.getTypeName)throw new Error(JSON.stringify(t)+" is not a Request DTO");e=t.getTypeName();if(e)return e;throw new Error("DTO Required")}function st(e,t,l){var a=(l=l||{}).cls||l.className||l.class;return a&&((l=it(l,["cls","class","className"])).class=a),null==t?"<"+e+Rl(l)+"/>":"<"+e+Rl(l)+`>${t||""}</${e}>`}function Rl(l){return Object.keys(l).reduce((e,t)=>`${e} ${t}="${Ol(l[t])}"`,"")}function wl(e){return Object.assign({target:"_blank",rel:"noopener",class:"text-blue-600"},e)}function Mt(e){return pn(e)}let Xo=["string","number","boolean","null","undefined"];function $t(e){return 0<=Xo.indexOf(typeof e)||e instanceof Date}function Ut(e){return!$t(e)}class Zn{get length(){return"u"<typeof localStorage?0:localStorage.length}getItem(e){return"u"<typeof localStorage?null:localStorage.getItem(e)}setItem(e,t){"u"<typeof localStorage||localStorage.setItem(e,t)}removeItem(e){"u"<typeof localStorage||localStorage.removeItem(e)}clear(){"u"<typeof localStorage||localStorage.clear()}key(e){return"u"<typeof localStorage?null:localStorage.key(e)}}function ml(e){return"string"==typeof e?JSON.parse(e):null}function Yl(e){typeof history<"u"&&(e=so(location.href,e),history.pushState({},"",e))}function en(t,e){if(["function","Function","eval","=>",";"].some(e=>t.includes(e)))throw new Error(`Unsafe script: '${t}'`);e=Object.assign(Object.keys(globalThis).reduce((e,t)=>(e[t]=void 0,e),{}),e);return new Function("with(this) { return ("+t+") }").call(e)}function Nl(e){typeof navigator<"u"&&navigator.clipboard.writeText(e)}function Jn(e){e=X.config.storage.getItem(e);return e?JSON.parse(e):null}function tn(e,t){return zt("swr."+oo(e),t?Object.assign({},e,t):e)}function Yo(e){e.request&&(e=tn(e.request,e.args),X.config.storage.removeItem(e))}async function Xn(e,t,l,a,s){var n=tn(t,a),e=(l(new Ye({response:Jn(n)})),await e.api(t,a,s));return e.succeeded&&e.response&&(e.response._date=(new Date).valueOf(),t=JSON.stringify(e.response),X.config.storage.setItem(n,t),l(e)),e}function ea(){return{LocalStore:Zn,dateInputFormat:bl,timeInputFormat:Gn,setRef:Wn,unRefs:Vt,transition:At,focusNextElement:il,getTypeName:Pt,htmlTag:st,htmlAttrs:Rl,linkAttrs:wl,toAppUrl:Mt,isPrimitive:$t,isComplexType:Ut,pushState:Yl,scopedExpr:en,copyText:Nl,fromCache:Jn,swrCacheKey:tn,swrClear:Yo,swrApi:Xn}}const Yn="png,jpg,jpeg,jfif,gif,svg,webp".split(","),es={img:"png,jpg,jpeg,gif,svg,webp,png,jpg,jpeg,gif,bmp,tif,tiff,webp,ai,psd,ps".split(","),vid:"avi,m4v,mov,mp4,mpg,mpeg,wmv,webm".split(","),aud:"mp3,mpa,ogg,wav,wma,mid,webm".split(","),ppt:"key,odp,pps,ppt,pptx".split(","),xls:"xls,xlsm,xlsx,ods,csv,tsv".split(","),doc:"doc,docx,pdf,rtf,tex,txt,md,rst,xls,xlsm,xlsx,ods,key,odp,pps,ppt,pptx".split(","),zip:"zip,tar,gz,7z,rar,gzip,deflate,br,iso,dmg,z,lz,lz4,lzh,s7z,apl,arg,jar,war".split(","),exe:"exe,bat,sh,cmd,com,app,msi,run,vb,vbs,js,ws,wsh".split(","),att:"bin,oct,dat".split(",")},Bn=Object.keys(es),ct=(e,t)=>`<svg xmlns='http://www.w3.org/2000/svg' aria-hidden='true' role='img' preserveAspectRatio='xMidYMid meet' viewBox='${e}'>${t}</svg>`,rl={img:ct("4 4 16 16","<path fill='currentColor' d='M20 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2zm-2 0H6v6.38l2.19-2.19l5.23 5.23l1-1a1.59 1.59 0 0 1 2.11.11L18 16V6zm-5 3.5a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0z'/>"),vid:ct("0 0 24 24","<path fill='currentColor' d='m14 2l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8m4 18V9h-5V4H6v16h12m-2-2l-2.5-1.7V18H8v-5h5.5v1.7L16 13v5Z'/>"),aud:ct("0 0 24 24","<path fill='currentColor' d='M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6zm10-9h-4v3.88a2.247 2.247 0 0 0-3.5 1.87c0 1.24 1.01 2.25 2.25 2.25S13 17.99 13 16.75V13h3v-2z'/>"),ppt:ct("0 0 48 48","<g fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='4'><path d='M4 8h40'/><path d='M8 8h32v26H8V8Z' clip-rule='evenodd'/><path d='m22 16l5 5l-5 5m-6 16l8-8l8 8'/></g>"),xls:ct("0 0 256 256","<path fill='currentColor' d='M200 26H72a14 14 0 0 0-14 14v26H40a14 14 0 0 0-14 14v96a14 14 0 0 0 14 14h18v26a14 14 0 0 0 14 14h128a14 14 0 0 0 14-14V40a14 14 0 0 0-14-14Zm-42 76h44v52h-44Zm44-62v50h-44V80a14 14 0 0 0-14-14h-2V38h58a2 2 0 0 1 2 2ZM70 40a2 2 0 0 1 2-2h58v28H70ZM38 176V80a2 2 0 0 1 2-2h104a2 2 0 0 1 2 2v96a2 2 0 0 1-2 2H40a2 2 0 0 1-2-2Zm32 40v-26h60v28H72a2 2 0 0 1-2-2Zm130 2h-58v-28h2a14 14 0 0 0 14-14v-10h44v50a2 2 0 0 1-2 2ZM69.2 148.4L84.5 128l-15.3-20.4a6 6 0 1 1 9.6-7.2L92 118l13.2-17.6a6 6 0 0 1 9.6 7.2L99.5 128l15.3 20.4a6 6 0 0 1-9.6 7.2L92 138l-13.2 17.6a6 6 0 1 1-9.6-7.2Z'/>"),doc:ct("0 0 32 32","<path fill='currentColor' d='M26 30H11a2.002 2.002 0 0 1-2-2v-6h2v6h15V6h-9V4h9a2.002 2.002 0 0 1 2 2v22a2.002 2.002 0 0 1-2 2Z'/><path fill='currentColor' d='M17 10h7v2h-7zm-1 5h8v2h-8zm-1 5h9v2h-9zm-6-1a5.005 5.005 0 0 1-5-5V3h2v11a3 3 0 0 0 6 0V5a1 1 0 0 0-2 0v10H8V5a3 3 0 0 1 6 0v9a5.005 5.005 0 0 1-5 5z'/>"),zip:ct("0 0 16 16","<g fill='currentColor'><path d='M6.5 7.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v.938l.4 1.599a1 1 0 0 1-.416 1.074l-.93.62a1 1 0 0 1-1.109 0l-.93-.62a1 1 0 0 1-.415-1.074l.4-1.599V7.5zm2 0h-1v.938a1 1 0 0 1-.03.243l-.4 1.598l.93.62l.93-.62l-.4-1.598a1 1 0 0 1-.03-.243V7.5z'/><path d='M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm5.5-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9v1H8v1h1v1H8v1h1v1H7.5V5h-1V4h1V3h-1V2h1V1z'/></g>"),exe:ct("0 0 16 16","<path fill='currentColor' fill-rule='evenodd' d='M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM2.575 15.202H.785v-1.073H2.47v-.606H.785v-1.025h1.79v-.648H0v3.999h2.575v-.647ZM6.31 11.85h-.893l-.823 1.439h-.036l-.832-1.439h-.931l1.227 1.983l-1.239 2.016h.861l.853-1.415h.035l.85 1.415h.908l-1.254-1.992L6.31 11.85Zm1.025 3.352h1.79v.647H6.548V11.85h2.576v.648h-1.79v1.025h1.684v.606H7.334v1.073Z'/>"),att:ct("0 0 24 24","<path fill='currentColor' d='M14 0a5 5 0 0 1 5 5v12a7 7 0 1 1-14 0V9h2v8a5 5 0 0 0 10 0V5a3 3 0 1 0-6 0v12a1 1 0 1 0 2 0V6h2v11a3 3 0 1 1-6 0V5a5 5 0 0 1 5-5Z'/>")},ta=/[\r\n%#()<>?[\\\]^`{|}]/g,En=1024,la=["Bytes","KB","MB","GB","TB"],na=(()=>{const t="application/",e=t+"vnd.openxmlformats-officedocument.",l="image/",a="text/",s="video/",n={jpg:l+"jpeg",tif:l+"tiff",svg:l+"svg+xml",ico:l+"x-icon",ts:a+"typescript",py:a+"x-python",sh:a+"x-sh",mp3:"audio/mpeg3",mpg:s+"mpeg",ogv:s+"ogg",xlsx:e+"spreadsheetml.sheet",xltx:e+"spreadsheetml.template",docx:e+"wordprocessingml.document",dotx:e+"wordprocessingml.template",pptx:e+"presentationml.presentation",potx:e+"presentationml.template",ppsx:e+"presentationml.slideshow",mdb:t+"vnd.ms-access"};function o(e,t){e.split(",").forEach(e=>n[e]=t)}function r(e,t){e.split(",").forEach(e=>n[e]=t(e))}return r("jpeg,gif,png,tiff,bmp,webp",e=>l+e),r("jsx,csv,css",e=>a+e),r("aac,ac3,aiff,m4a,m4b,m4p,mid,midi,wav",e=>"audio/"+e),r("3gpp,avi,dv,divx,ogg,mp4,webm",e=>s+e),r("rtf,pdf",e=>t+e),o("htm,html,shtm",a+"html"),o("js,mjs,cjs",a+"javascript"),o("yml,yaml",t+"yaml"),o("bat,cmd",t+"bat"),o("xml,csproj,fsproj,vbproj",a+"xml"),o("txt,ps1",a+"plain"),o("qt,mov",s+"quicktime"),o("doc,dot",t+"msword"),o("xls,xlt,xla",t+"excel"),o("ppt,oit,pps,ppa",t+"vnd.ms-powerpoint"),o("cer,crt,der",t+"x-x509-ca-cert"),o("gz,tgz,zip,rar,lzh,z",t+"x-compressed"),o("aaf,aca,asd,bin,cab,chm,class,cur,db,dat,deploy,dll,dsp,exe,fla,ics,inf,mix,msi,mso,obj,ocx,prm,prx,psd,psp,qxd,sea,snp,so,sqlite,toc,ttf,u32,xmp,xsn,xtp",t+"octet-stream"),n})();let Hl=[];function ts(e){return(e=(e=(e=e.replace(/"/g,"'")).replace(/>\s+</g,"><")).replace(/\s{2,}/g," ")).replace(ta,encodeURIComponent)}function ln(e){return"data:image/svg+xml;utf8,"+ts(e)}function ls(e){e=URL.createObjectURL(e);return Hl.push(e),e}function ns(){Hl.forEach(e=>{try{URL.revokeObjectURL(e)}catch(e){console.error("URL.revokeObjectURL",e)}}),Hl=[]}function nn(e){return e?(e=pl(e,"?"),kt(e,"/")):null}function Zt(e){e=nn(e);return null==e||-1===e.indexOf(".")?null:kt(e,".").toLowerCase()}function sn(e){var t=Zt(e.name);return t&&0<=Yn.indexOf(t)?ls(e):pt(e.name)}function on(e){return e&&(!(!e.startsWith("blob:")&&!e.startsWith("data:"))||(e=Zt(e))&&0<=Yn.indexOf(e))||!1}function pt(e){var t;return e?null==(t=Zt(e))||on(e)?e:Nt(t)||ln(rl.doc):null}function Nt(e){e=ss(e);return e&&ln(e)||null}function ss(t){if(rl[t])return rl[t];for(let e=0;e<Bn.length;e++){var l=Bn[e];if(0<=es[l].indexOf(t))return rl[l]}return null}function an(e,t=2){var l;return 0===e?"0 Bytes":(t=t<0?0:t,l=Math.floor(Math.log(e)/Math.log(En)),parseFloat((e/Math.pow(En,l)).toFixed(t))+" "+la[l])}function sa(e){return e.files&&Array.from(e.files).map(e=>({fileName:e.name,contentLength:e.size,filePath:sn(e)}))}function xl(e,t){e.onerror=null,e.src=rn(e.src,t)||""}function rn(e,t){return Nt(kt(e,".").toLowerCase())||(t?Nt(t)||t:null)||Nt("doc")}function zl(e){if(e)return e=kt(e,".").toLowerCase(),na[e]||"application/"+e;throw new Error("fileNameOrExt required")}function G1(){return{extSvg:ss,extSrc:Nt,getExt:Zt,encodeSvg:ts,canPreview:on,getFileName:nn,getMimeType:zl,formatBytes:an,filePathUri:pt,svgToDataUri:ln,fileImageUri:sn,objectUrl:ls,flush:ns,inputFiles:sa,iconOnError:xl,iconFallbackSrc:rn}}class oa{constructor(e){pe(this,"view"),pe(this,"includeTypes"),Object.assign(this,e)}getTypeName(){return"MetadataApp"}getMethod(){return"GET"}createResponse(){return{}}}const Ft="/metadata/app.json",aa={Boolean:"checkbox",DateTime:"date",DateOnly:"date",DateTimeOffset:"date",TimeSpan:"time",TimeOnly:"time",Byte:"number",Short:"number",Int64:"number",Int32:"number",UInt16:"number",UInt32:"number",UInt64:"number",Single:"number",Double:"number",Decimal:"number",String:"text",Guid:"text",Uri:"text"},ia={number:"Int32",checkbox:"Boolean",date:"DateTime","datetime-local":"DateTime",time:"TimeSpan"},Ul={Byte:"byte",Int16:"short",Int32:"int",Int64:"long",UInt16:"ushort",Unt32:"uint",UInt64:"ulong",Single:"float",Double:"double",Decimal:"decimal"},ra=([...Object.keys(Ul),...Object.values(Ul)],{String:"string",Boolean:"bool",...Ul});function ol(e){return ra[e]||e}function os(e,t){return e?(t=t||[],"Nullable`1"===e?ol(t[0])+"?":e.endsWith("[]")?`List<${ol(e.substring(0,e.length-2))}>`:0===t.length?ol(e):pl(ol(e),"`")+"<"+t.join(",")+">"):""}function ua(e){return e&&os(e.name,e.genericArgs)}class Tt{constructor(){pe(this,"Query"),pe(this,"QueryInto"),pe(this,"Create"),pe(this,"Update"),pe(this,"Patch"),pe(this,"Delete")}get AnyQuery(){return this.Query||this.QueryInto}get AnyUpdate(){return this.Patch||this.Update}toArray(){return[this.Query,this.QueryInto,this.Create,this.Update,this.Patch,this.Delete].filter(e=>!!e).map(e=>e)}get empty(){return!(this.Query||this.QueryInto||this.Create||this.Update||this.Patch||this.Delete)}add(e){je.isQueryInto(e)&&!this.QueryInto?this.QueryInto=e:je.isQuery(e)&&!this.Query?this.Query=e:je.isCreate(e)&&!this.Create?this.Create=e:je.isUpdate(e)&&!this.Update?this.Update=e:je.isPatch(e)&&!this.Patch?this.Patch=e:je.isDelete(e)&&!this.Delete&&(this.Delete=e)}static from(e){const t=new Tt;return e.forEach(e=>{t.add(e)}),t}static forType(l,e){var t;let a=new Tt;return l&&(null!=(e=e??(null==(t=X.metadata.value)?void 0:t.api))&&e.operations.forEach(e=>{var t;(null==(t=e.dataModel)?void 0:t.name)==l&&a.add(e)})),a}}const je={Create:"ICreateDb`1",Update:"IUpdateDb`1",Patch:"IPatchDb`1",Delete:"IDeleteDb`1",AnyRead:["QueryDb`1","QueryDb`2"],AnyWrite:["ICreateDb`1","IUpdateDb`1","IPatchDb`1","IDeleteDb`1"],isAnyQuery:e=>Ee(e.request.inherits,e=>0<=je.AnyRead.indexOf(e.name)),isQuery:e=>Ee(e.request.inherits,e=>"QueryDb`1"===e.name),isQueryInto:e=>Ee(e.request.inherits,e=>"QueryDb`2"===e.name),isCrud:e=>{return null==(e=e.request.implements)?void 0:e.some(e=>0<=je.AnyWrite.indexOf(e.name))},isCreate:e=>al(e,je.Create),isUpdate:e=>al(e,je.Update),isPatch:e=>al(e,je.Patch),isDelete:e=>al(e,je.Delete),model:e=>{var t;return e?Ee(e.inherits,e=>0<=je.AnyRead.indexOf(e.name))?null==(t=e.inherits)?void 0:t.genericArgs[0]:null==(e=null==(t=e.implements)?void 0:t.find(e=>0<=je.AnyWrite.indexOf(e.name)))?void 0:e.genericArgs[0]:null}};function da(e){var t;return(null==(t=e.input)?void 0:t.type)||kl(un(e))}function as(e){return e.endsWith("?")?ro(e,1):e}function kl(e){return aa[as(e)]}function ca(e){return e&&ia[e]||"String"}function un(e){return"Nullable`1"===e.type?e.genericArgs[0]:e.type}function ql(e){return e&&"number"==kl(e)||!1}function is(e){return e&&"string"==e.toLowerCase()||!1}function fa(e){return"List`1"==e||e.startsWith("List<")||e.endsWith("[]")}function rs(e){var t;return!(null==e||!e.type||(t=un(e),e.isValueType&&-1==t.indexOf("`"))||e.isEnum||null!=kl(e.type))}function us(e){var t;return!!(null!=e&&e.type&&(t=un(e),e.isValueType&&-1==t.indexOf("`")||e.isEnum||"file"==(null==(t=e.input)?void 0:t.type)||"tag"==(null==(t=e.input)?void 0:t.type)||"combobox"==(null==(t=e.input)?void 0:t.type)||null!=kl(e.type)))}function qt(e,t){let l="string"==typeof e?$l(e):e,a=(l||(console.warn("Metadata not found for: "+e),l={request:{name:e}}),function(e){Object.assign(this,e)}),s=(n.prototype.createResponse=function(){return l.returnsVoid?void 0:new a},n.prototype.getTypeName=function(){return l.request.name},n.prototype.getMethod=function(){return l.method||"POST"},n);function n(e){Object.assign(this,e)}return new s(t)}function ma(e,t,l={}){let a=function(e){Object.assign(this,e)},s=(n.prototype.createResponse=function(){return"function"==typeof l.createResponse?l.createResponse():new a},n.prototype.getTypeName=function(){return e},n.prototype.getMethod=function(){return l.method||"POST"},n);function n(e){Object.assign(this,e)}return new s(t)}function ul(l,e){return l?(Object.keys(l).forEach(e=>{var t=l[e];"string"==typeof t&&t.startsWith("/Date")&&(l[e]=bl(Ct(t)))}),l):{}}function va(e,r){let i={};return Array.from(e.elements).forEach(a=>{var s;if(a.id&&null!=a.value&&""!==a.value){const n=a.id.toLowerCase(),o=r&&r.find(e=>e.name.toLowerCase()==n);let e=null==o?void 0:o.type,t=null==(s=null==o?void 0:o.genericArgs)?void 0:s[0],l="checkbox"===a.type?a.checked:a.value;ql(e)?l=Number(l):"List`1"===e&&"string"==typeof l&&(l=l.split(",").map(e=>ql(t)?Number(e):e)),i[a.id]=l}}),i}function dn(e){var t;return(null==(t=null==e?void 0:e.api)?void 0:t.operations)&&0<e.api.operations.length}function ha(e){if(null!=e&&e.assert&&!X.metadata.value)throw new Error("useMetadata() not configured, see: https://docs.servicestack.net/vue/use-metadata");return X.metadata.value}function Qt(e){return!(!e||!dn(e)||(e.date=ao(new Date),X.metadata.value=e,typeof localStorage<"u"&&localStorage.setItem(Ft,JSON.stringify(e)),0))}function ga(){X.metadata.value=null,typeof localStorage<"u"&&localStorage.removeItem(Ft)}function ds(){if(null!=X.metadata.value)return!0;var e=globalThis.Server;if(dn(e))Qt(e);else{e=typeof localStorage<"u"?localStorage.getItem(Ft):null;if(e)try{Qt(JSON.parse(e))}catch{console.error(`Could not JSON.parse ${Ft} from localStorage`)}}return null!=X.metadata.value}async function Rn(e,t){var l,a=t?await t():await fetch(e);a.ok?(l=await a.text(),Qt(JSON.parse(l))):console.error(`Could not download ${t?"AppMetadata":e}: `+a.statusText),dn(X.metadata.value)||console.warn("AppMetadata is not available")}async function pa(e){var{olderThan:e,resolvePath:t,resolve:l}=e||{};let a=ds()&&0!==e;if(!(a=a&&e&&(!(s=Ct(null==(s=X.metadata.value)?void 0:s.date))||(new Date).getTime()-s.getTime()>e)?!1:a)){if((t||l)&&await Rn(t||Ft,l),null!=X.metadata.value)return;var s=Ne("client");if(null!=s&&(e=await s.api(new oa)).succeeded&&Qt(e.response),null!=X.metadata.value)return;await Rn(Ft)}return X.metadata.value}function rt(t,l){var e,a=null==(a=X.metadata.value)?void 0:a.api;return a&&t?a.types.find(e=>e.name.toLowerCase()===t.toLowerCase()&&(!l||e.namespace==l))||((e=$l(t))?e.request:(e=a.operations.find(e=>e.response&&e.response.name.toLowerCase()===t.toLowerCase()&&(!l||e.response.namespace==l)))?e.response:null):null}function $l(t){var e=null==(e=X.metadata.value)?void 0:e.api;return e?e.operations.find(e=>e.request.name.toLowerCase()===t.toLowerCase()):null}function ya({dataModel:e}){var t=null==(t=X.metadata.value)?void 0:t.api;if(!t)return[];let l=t.operations;if(e){const a="string"==typeof e?rt(e):e;l=l.filter(e=>cs(e.dataModel,a))}return l}function cn(e){return e?rt(e.name,e.namespace):null}function cs(e,t){return e&&t&&e.name===t.name&&(!e.namespace||!t.namespace||e.namespace===t.namespace)}function ba(e,t){e=rt(e);return e&&e.properties&&e.properties.find(e=>e.name.toLowerCase()===t.toLowerCase())}function fs(e){return ms(rt(e))}function ms(t){if(t&&t.isEnum&&null!=t.enumNames){var l={};for(let e=0;e<t.enumNames.length;e++){var a=(t.enumDescriptions?t.enumDescriptions[e]:null)||t.enumNames[e];l[(null!=t.enumValues?t.enumValues[e]:null)||t.enumNames[e]]=a}return l}return null}function vs(e){if(e){var t={},l=e.input&&e.input.allowableEntries;if(l){for(let e=0;e<l.length;e++){var a=l[e];t[a.key]=a.value}return t}var s=e.allowableValues||(e.input?e.input.allowableValues:null);if(s){for(let e=0;e<s.length;e++){var n=s[e];t[n]=n}return t}if(e.isEnum){e=rt(e.genericArgs&&1==e.genericArgs.length?e.genericArgs[0]:e.type);if(e)return ms(e)}}return null}function fn(t){if(t){const l=[];return Object.keys(t).forEach(e=>l.push({key:e,value:t[e]})),l}}function wa(e,t){a=e.name,l=(null==t?void 0:t.type)||da(e)||"text";var l,a=Object.assign({id:a,name:a,type:l},t);return e.isEnum&&(a.type="select",a.allowableEntries=fn(vs(e))),a}function xa(e){let n=[];if(e){const o=Ze(e),t=$l(e.name),r=cn(null==t?void 0:t.dataModel);o.forEach(t=>{var e;if(us(t)){const l=wa(t,t.input);if(l.id=io(l.id),"file"==l.type&&t.uploadTo&&!l.accept&&(e=null==(e=null==(e=X.metadata.value)?void 0:e.plugins.filesUpload)?void 0:e.locations.find(e=>e.name==t.uploadTo))&&!l.accept&&e.allowExtensions&&(l.accept=e.allowExtensions.map(e=>e.startsWith(".")?e:"."+e).join(",")),r&&(e=null==(e=r.properties)?void 0:e.find(e=>e.name==t.name),t.ref||(t.ref=null==e?void 0:e.ref)),l.options)try{const a={input:l,$typeFields:o.map(e=>e.name),$dataModelFields:r?Ze(r).map(e=>e.name):[],...X.config.scopeWhitelist},s=en(l.options,a);Object.keys(s).forEach(e=>{l[e]=s[e]})}catch{console.error(`failed to evaluate '${l.options}'`)}n.push(l)}})}return n}function mn(t,e){if(!e.type)return console.error("enumDescriptions missing {type:'EnumType'} options"),[""+t];var l=rt(e.type);if(null==l||!l.enumValues)return console.error("Could not find metadata for "+e.type),[""+t];var a=[];for(let e=0;e<l.enumValues.length;e++){var s=parseInt(l.enumValues[e]);0<s&&(s&t)===s&&a.push((null==(s=l.enumDescriptions)?void 0:s[e])||(null==(s=l.enumNames)?void 0:s[e])||""+t)}return a}function hs(t){return e=>"number"==typeof e?mn(e,{type:t}):e}function Ze(e){if(!e)return[];let t=[],l={};for(;e;)e.properties&&e.properties.forEach(e=>{l[e.name]||(l[e.name]=1,t.push(e))}),e=e.inherits?cn(e.inherits):null;return t.map(e=>e.type.endsWith("[]")?{...e,type:"List`1",genericArgs:[e.type.substring(0,e.type.length-2)]}:e)}function al(e,t){return(null==(e=e.request.implements)?void 0:e.some(e=>e.name===t))||!1}function Jt(e){return e?gs(e,Ze(e)):null}function gs(e,t){var l=t.find(e=>"id"===e.name.toLowerCase());if(l&&l.isPrimaryKey)return l;t=t.find(e=>e.isPrimaryKey)||l;if(!t){l=je.model(e);if(l)return Ee(rt(l),e=>Jt(e));console.error("Primary Key not found in "+e.name)}return t||null}function ka(e,t){return Ee(Jt(e),e=>fe(t,e.name))}function ps(e,t,l){return e&&"none"===e.valueType?"":"%In"===l.key||"%Between"===l.key?`(${l.value})`:$a(t,l.value)}function $a(e,t){return!e||ql(e=as(e))||"Boolean"===e?t:fa(e)?`[${t}]`:`'${t}'`}function et(){var e=f(()=>{var e;return(null==(e=X.metadata.value)?void 0:e.app)||null}),t=f(()=>{var e;return(null==(e=X.metadata.value)?void 0:e.api)||null}),l=f(()=>{var e;return(null==(e=X.metadata.value)?void 0:e.plugins.autoQuery.viewerConventions)||[]});return ds(),{loadMetadata:pa,getMetadata:ha,setMetadata:Qt,clearMetadata:ga,metadataApp:e,metadataApi:t,filterDefinitions:l,typeOf:rt,typeOfRef:cn,typeEquals:cs,apiOf:$l,findApis:ya,typeName:ua,typeName2:os,property:ba,enumOptions:fs,propertyOptions:vs,createFormLayout:xa,typeProperties:Ze,supportsProp:us,Crud:je,Apis:Tt,getPrimaryKey:Jt,getPrimaryKeyByProps:gs,getId:ka,createDto:qt,makeDto:ma,toFormValues:ul,formValues:va,isComplexProp:rs,asKvps:fn,expandEnumFlags:mn,enumFlagsConverter:hs}}const Xe=class{static async getOrFetchValue(e,t,l,a,s,n,o){return Xe.getValue(l,o,s)??(await Xe.fetchLookupIds(e,t,l,a,s,n,[o]),Xe.getValue(l,o,s))}static getValue(e,t,l){e=Xe.Lookup[e];if(e){e=e[t];if(e)return e[l=l.toLowerCase()]}}static setValue(e,t,l,a){e=Xe.Lookup[e]??(Xe.Lookup[e]={});(e[t]??(e[t]={}))[l=l.toLowerCase()]=a}static setRefValue(e,t){var l=fe(t,e.refId);return null==l||null==e.refLabel?null:(t=fe(t,e.refLabel),Xe.setValue(e.model,l,e.refLabel,t),t)}static async fetchLookupIds(e,t,l,a,s,n,o){t=t.operations.find(e=>{return je.isAnyQuery(e)&&(null==(e=e.dataModel)?void 0:e.name)==l});if(t){const r=Xe.Lookup[l]??(Xe.Lookup[l]={}),i=[];Object.keys(r).forEach(e=>{var t=r[e];fe(t,s)&&i.push(e)});var o=o.filter(e=>!i.includes(e));0!=o.length&&(n=n?null:a+","+s,o={[a+"In"]:o.join(",")},n&&(o.fields=n),n=qt(t,o),(o=await e.api(n,{jsconfig:"edv,eccn"})).succeeded?(fe(o.response,"results")||[]).forEach(e=>{var t,l;fe(e,a)?(t=""+fe(e,a),l=fe(e,s),s=s.toLowerCase(),(r[t]??(r[t]={}))[s]=""+l):console.error(`result[${a}] == null`,e)}):console.error("Failed to call "+t.request.name))}}};let bt=Xe,Ql=(pe(bt,"Lookup",{}),()=>(new Date).getTime()),Ca=["/","T",":","-"],ot={assumeUtc:!0,date:{method:"Intl.DateTimeFormat",options:"{dateStyle:'medium'}"},maxFieldLength:150,maxNestedFields:2,maxNestedFieldLength:30},_a=new Intl.RelativeTimeFormat(ot.locale,{}),Nn=31536e6,Dl={year:Nn,month:Nn/12,day:864e5,hour:36e5,minute:6e4,second:1e3},yt={currency:ys,bytes:bs,link:ws,linkTel:xs,linkMailTo:ks,icon:$s,iconRounded:Cs,attachment:_s,hidden:Ls,time:Vs,relativeTime:hn,relativeTimeFromMs:Cl,enumFlags:Fa,formatDate:jt,formatNumber:vn};"iconOnError"in globalThis||(globalThis.iconOnError=xl);class Re{}function La(e){ot=Object.assign({},ot,e)}function Va(t){Object.keys(t||{}).forEach(e=>{"function"==typeof t[e]&&(yt[e]=t[e])})}function Ma(){return yt}function Xt(e,t){return t?st("span",e,t):e}function ys(e,t){var l=it(t,["currency"]);return Xt(new Intl.NumberFormat(void 0,{style:"currency",currency:(null==t?void 0:t.currency)||"USD"}).format(e),l)}function bs(e,t){return Xt(an(e),t)}function ws(e,t){return st("a",e,wl({...t,href:e}))}function xs(e,t){return st("a",e,wl({...t,href:"tel:"+e}))}function ks(e,t){var{subject:l,body:a}=t=t||{},t=it(t,["subject","body"]),s={};return l&&(s.subject=l),a&&(s.body=a),st("a",e,wl({...t,href:"mailto:"+zt(e,s)}))}function $s(e,t){return st("img",void 0,Object.assign({class:"w-6 h-6",title:e,src:Mt(e),onerror:"iconOnError(this)"},t))}function Cs(e,t){return st("img",void 0,Object.assign({class:"w-8 h-8 rounded-full",title:e,src:Mt(e),onerror:"iconOnError(this)"},t))}function _s(e,t){var l=nn(e),a=(null==Zt(l)||on(e)?Mt:rn)(e),a=Mt(a),s=t&&(t["icon-class"]||t.iconClass),a=st("img",void 0,Object.assign({class:"w-6 h-6",src:a,onerror:"iconOnError(this,'att')"},s?{class:s}:null));return st("a",a+`<span class="pl-1">${l}</span>`,Object.assign({class:"flex",href:Mt(e),title:e},t?it(t,["icon-class","iconClass"]):null))}function Ls(e){return""}function Vs(e,t){var l="string"==typeof e?new Date(1e3*qn(e)):yl(e)?Ct(e):null;return Xt(l?uo(l):e,t)}function jt(e,t){var l,a;return null==e?"":(l="number"==typeof e?new Date(e):"string"==typeof e?Ct(e):e,yl(l)?Xt(("function"==typeof(a=ot.date?_l(ot.date):null)?a:Un)(l),t):(console.warn(l+" is not a Date value"),null==e?"":""+e))}function vn(e,t){if("number"!=typeof e)return e;let l=ot.number?_l(ot.number):null,a="function"==typeof l?l(e):""+e;return""===a&&(console.warn(`formatNumber(${e}) => `+a,l),a=""+e),Xt(a,t)}function Ms(t,l,a){var e=co(t),s=l?_l(l):null;if("function"!=typeof s)return(null!=e?yl(e)?jt(e,a):"number"==typeof e?vn(e,a):e:null)??"";{let e=a;if(null!=l&&l.options)try{e=en(l.options,a)}catch(e){console.error(`Could not evaluate '${l.options}'`,e,", with scope:",a)}return s(t,e)}}function Kt(e,t,l){return($t(e)?Ms:Da)(e,t,l)}function Sa(e){if(null!=e){if("number"==typeof e)return e;if(yl(e))return e.getTime()-Ql();if("string"==typeof e){var t=Number(e);if(!isNaN(t))return t;if("P"===e[0]||e.startsWith("-P"))return 1e3*qn(e)*-1;if(0<=fo(e,Ca))return Ct(e).getTime()-Ql()}}return NaN}function Cl(e,t){for(var l in Dl)if(Math.abs(e)>Dl[l]||"second"===l)return(t||_a).format(Math.round(e/Dl[l]),l)}function hn(e,t){e=Sa(e);return isNaN(e)?"":Cl(e,t)}function Aa(e,t){return Cl(e.getTime()-(t?t.getTime():Ql()))}function Fa(e,t){return mn(e,t).join(", ")}function _l(l){if(l){let{method:e,options:a}=l,s=e+`(${a})`,n=yt[s]||yt[e];if("function"==typeof n)return n;let o=l.locale||ot.locale;if(e.startsWith("Intl.")){l=o?`'${o}'`:"undefined",l=`return new ${e}(${l},${a||"undefined"})`;try{let t=Function(l)();return n="Intl.DateTimeFormat"===e?e=>t.format(Ct(e)):"Intl.NumberFormat"===e?e=>t.format(Number(e)):"Intl.RelativeTimeFormat"===e?e=>hn(e,t):e=>t.format(e),yt[s]=n}catch(e){console.error("Invalid format: "+l,e)}}else{let l=globalThis[e];if("function"==typeof l){let t=null!=a?Function("return "+a)():void 0;return n=e=>l(e,t,o),yt[s]=n}console.error(`No '${e}' function exists`,Object.keys(yt))}}return null}function Ss(e,t){return e?e.length>t?e.substring(0,t)+"...":e:""}function As(e){return"/Date("===e.substring(0,6)?jt(Ct(e)):e}function Ta(e){return gn(It(e)).replace(/"/g,"")}function Fs(e){if(null==e||""===e)return"";if("string"==typeof e)try{return JSON.parse(e)}catch{console.warn("couldn't parse as JSON",e)}return e}function gn(e,t=4){return"object"!=typeof(e=Fs(e))?"string"==typeof e?e:""+e:JSON.stringify(e,void 0,t)}function Ia(e){return"object"!=typeof(e=Fs(e))?"string"==typeof e?e:""+e:gn(e=It(e=Object.assign({},e)))}function It(l){if(null==l)return null;if("string"==typeof l)return As(l);if($t(l))return l;if(l instanceof Date)return jt(l);if(Array.isArray(l))return l.map(It);if("object"!=typeof l)return l;{let t={};return Object.keys(l).forEach(e=>{"__type"!=e&&(t[e]=It(l[e]))}),t}}function Da(e,t,l){let a=e;if(Array.isArray(e)){if($t(e[0]))return a.join(",");null!=e[0]&&(a=e[0])}if(null==a)return"";if(a instanceof Date)return jt(a,l);var s=Object.keys(a),n=[];for(let e=0;e<Math.min(ot.maxNestedFields,s.length);e++){var o=s[e],r=""+It(a[o]);n.push(`<b class="font-medium">${o}</b>: `+Ol(Ss(As(r),ot.maxNestedFieldLength)))}return 2<s.length&&n.push("..."),st("span","{ "+n.join(", ")+" }",Object.assign({title:Ol(Ta(e))},l))}function W1(){return{Formats:Re,setDefaultFormats:La,setFormatters:Va,formatValue:Kt,formatter:_l,dateInputFormat:bl,currency:ys,bytes:bs,link:ws,linkTel:xs,linkMailTo:ks,icon:$s,iconRounded:Cs,attachment:_s,hidden:Ls,time:Vs,relativeTime:hn,relativeTimeFromDate:Aa,relativeTimeFromMs:Cl,formatDate:jt,formatNumber:vn,indentJson:gn,prettyJson:Ia,scrub:It,truncate:Ss,apiValueFmt:Ms,iconOnError:xl}}pe(Re,"currency",{method:"currency"}),pe(Re,"bytes",{method:"bytes"}),pe(Re,"link",{method:"link"}),pe(Re,"linkTel",{method:"linkTel"}),pe(Re,"linkMailTo",{method:"linkMailTo"}),pe(Re,"icon",{method:"icon"}),pe(Re,"iconRounded",{method:"iconRounded"}),pe(Re,"attachment",{method:"attachment"}),pe(Re,"time",{method:"time"}),pe(Re,"relativeTime",{method:"relativeTime"}),pe(Re,"relativeTimeFromMs",{method:"relativeTimeFromMs"}),pe(Re,"date",{method:"formatDate"}),pe(Re,"number",{method:"formatNumber"}),pe(Re,"hidden",{method:"hidden"}),pe(Re,"enumFlags",{method:"enumFlags"});const Pa=["onClick","title"],ja=se({__name:"RouterLink",props:{to:null},setup(l){const e=l,t=_t()["config"],s=()=>t.value.navigate(e.to??"/");return(e,t)=>(a(),u("a",_e({onClick:He(s,["prevent"]),title:l.to,href:"javascript:void(0)"},e.$attrs),[G(e.$slots,"default")],16,Pa))}}),Ht=class{static component(e){var t=Ht.components[e];if(t)return t;const l=jn(e),a=Object.keys(Ht.components).find(e=>jn(e)===l);return a&&Ht.components[a]||null}};let X=Ht;function Oa(e){X.config=Object.assign(X.config,e)}function Ba(e){X.autoQueryGridDefaults=Object.assign(X.autoQueryGridDefaults,e)}function pn(e){return e&&X.config.assetsPathResolver?X.config.assetsPathResolver(e):e}function Ea(e){return e&&X.config.fallbackPathResolver?X.config.fallbackPathResolver(e):e}function _t(){var e=f(()=>X.config),t=f(()=>X.autoQueryGridDefaults);return{config:e,setConfig:Oa,events:X.events,autoQueryGridDefaults:t,setAutoQueryGridDefaults:Ba,assetsPathResolver:pn,fallbackPathResolver:Ea}}pe(X,"config",{redirectSignIn:"/signin",redirectSignOut:"/auth/logout",navigate:e=>location.href=e,assetsPathResolver:e=>e,fallbackPathResolver:e=>e,storage:new Zn,tableIcon:{svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><g fill='none' stroke='currentColor' stroke-width='1.5'><path d='M5 12v6s0 3 7 3s7-3 7-3v-6'/><path d='M5 6v6s0 3 7 3s7-3 7-3V6'/><path d='M12 3c7 0 7 3 7 3s0 3-7 3s-7-3-7-3s0-3 7-3Z'/></g></svg>"},scopeWhitelist:{enumFlagsConverter:hs,...Ma()}}),pe(X,"autoQueryGridDefaults",{deny:[],hide:[],toolbarButtonClass:void 0,tableStyle:"stripedRows",take:25,maxFieldLength:150}),pe(X,"events",mo()),pe(X,"user",S(null)),pe(X,"metadata",S(null)),pe(X,"components",{RouterLink:ja});const Ts=se({inheritAttrs:!1,props:{image:Object,svg:String,src:String,alt:String,type:String},setup(s,{attrs:n}){return()=>{let e=s.image;var t,l;s.type&&(l=et()["typeOf"],(l=l(s.type))||console.warn(`Type ${s.type} does not exist`),null!=l&&l.icon?e=null==l?void 0:l.icon:console.warn(`Type ${s.type} does not have a [Svg] icon`));let a=s.svg||(null==e?void 0:e.svg)||"";return a.startsWith("<svg ")?(l=pl(a,">").indexOf("class="),t=`${(null==e?void 0:e.cls)||""} `+(n.class||""),a=-1==l?`<svg class="${t}" `+a.substring(4):(l=l+6+1,a.substring(0,l)+t+" "+a.substring(l)),gt("span",{innerHTML:a})):gt("img",{class:[null==e?void 0:e.cls,n.class],src:pn(s.src||(null==e?void 0:e.uri)),onError:e=>xl(e.target)})}}}),Ra={class:"text-2xl font-semibold text-gray-900 dark:text-gray-300"},Na={class:"flex"},Ha=s("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),za=s("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1),Ua=[Ha,za],qa=se({__name:"Loading",props:{imageClass:{default:"w-6 h-6"}},setup(l){return(e,t)=>(a(),u("div",Ra,[s("div",Na,[(a(),u("svg",{class:x(["self-center inline mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-gray-600 dark:fill-gray-300",l.imageClass]),role:"status",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ua,2)),s("span",null,[G(e.$slots,"default")])])]))}}),Qa=["href","onClick"],Ka=["type"],Ga=se({__name:"OutlineButton",props:{type:{default:"submit"},href:null},setup(n){const o="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 disabled:text-gray-400 bg-white dark:bg-black hover:bg-gray-50 hover:dark:bg-gray-900 disabled:hover:bg-white dark:disabled:hover:bg-black focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black";return(t,e)=>{var l=q("router-link");return n.href?(a(),Y(l,{key:0,to:n.href},{default:he(({navigate:e})=>[s("button",{class:x(o),href:n.href,onClick:e},[G(t.$slots,"default")],8,Qa)]),_:3},8,["to"])):(a(),u("button",_e({key:1,type:n.type,class:o},t.$attrs),[G(t.$slots,"default")],16,Ka))}}}),Wa=["href","onClick"],Za=["type"],Ja=se({__name:"PrimaryButton",props:{type:{default:"submit"},href:null,color:{default:"indigo"}},setup(n){const e=n,t={blue:"text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:hover:bg-blue-400 focus:ring-indigo-500 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",purple:"text-white bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 disabled:hover:bg-purple-400 focus:ring-indigo-500 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",red:"focus:ring-red-500 text-white bg-red-600 hover:bg-red-700 disabled:bg-red-400 disabled:hover:bg-red-400 focus:ring-red-500 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-500",green:"focus:ring-green-300 text-white bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:hover:bg-green-400 focus:ring-green-500 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-500",sky:"focus:ring-sky-300 text-white bg-sky-600 hover:bg-sky-700 disabled:bg-sky-400 disabled:hover:bg-sky-400 focus:ring-sky-500 dark:bg-sky-600 dark:hover:bg-sky-700 dark:focus:ring-sky-500",cyan:"focus:ring-cyan-300 text-white bg-cyan-600 hover:bg-cyan-700 disabled:bg-cyan-400 disabled:hover:bg-cyan-400 focus:ring-cyan-500 dark:bg-cyan-600 dark:hover:bg-cyan-700 dark:focus:ring-cyan-500",indigo:"focus:ring-2 focus:ring-offset-2 text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 disabled:hover:bg-indigo-400 focus:ring-indigo-500 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},r=f(()=>"inline-flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:ring-offset-black "+(t[e.color]||t.indigo));return(t,e)=>{var l=q("router-link");return n.href?(a(),Y(l,{key:0,to:n.href},{default:he(({navigate:e})=>[s("button",{class:x(o(r)),href:n.href,onClick:e},[G(t.$slots,"default")],10,Wa)]),_:3},8,["to"])):(a(),u("button",_e({key:1,type:n.type,class:o(r)},t.$attrs),[G(t.$slots,"default")],16,Za))}}}),Xa=["type","href","onClick"],Ya=["type"],ei=se({__name:"SecondaryButton",props:{type:null,href:null},setup(n){const o="inline-flex justify-center rounded-md border border-gray-300 py-2 px-4 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-400 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-black";return(t,e)=>{var l=q("router-link");return n.href?(a(),Y(l,{key:0,to:n.href},{default:he(({navigate:e})=>[s("button",{type:n.type??"button",class:x(o),href:n.href,onClick:e},[G(t.$slots,"default")],8,Xa)]),_:3},8,["to"])):(a(),u("button",_e({key:1,type:n.type??"button",class:o},t.$attrs),[G(t.$slots,"default")],16,Ya))}}});function Qe(e,t){return Array.isArray(e)?0<=e.indexOf(t):e==t||e.includes(t)}const vl={blue:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",purple:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",red:"text-red-700 dark:text-red-400 hover:text-red-900 dark:hover:text-red-200",green:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",sky:"text-sky-600 dark:text-sky-400 hover:text-sky-800 dark:hover:text-sky-200",cyan:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-800 dark:hover:text-cyan-200",indigo:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200"},ft={base:"block w-full sm:text-sm rounded-md dark:text-white dark:bg-gray-900 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none",invalid:"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500",valid:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 dark:border-gray-600"},wt={panelClass:"shadow sm:rounded-md",formClass:"space-y-6 bg-white dark:bg-black py-6 px-4 sm:p-6",headingClass:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",subHeadingClass:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Rt={panelClass:"pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg",formClass:"flex h-full flex-col divide-y divide-gray-200 dark:divide-gray-700 shadow-xl bg-white dark:bg-black",titlebarClass:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6",headingClass:"text-lg font-medium text-gray-900 dark:text-gray-100",subHeadingClass:"mt-1 text-sm text-gray-500 dark:text-gray-400",closeButtonClass:"rounded-md bg-gray-50 dark:bg-gray-900 text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:ring-offset-black"},Kl={modalClass:"relative transform overflow-hidden rounded-lg bg-white dark:bg-black text-left shadow-xl transition-all sm:my-8",sizeClass:"sm:max-w-prose lg:max-w-screen-md xl:max-w-screen-lg 2xl:max-w-screen-xl sm:w-full"},Ge={panelClass(e="slideOver"){return("card"==e?wt:Rt).panelClass},formClass(e="slideOver"){return("card"==e?wt:Rt).formClass},headingClass(e="slideOver"){return("card"==e?wt:Rt).headingClass},subHeadingClass(e="slideOver"){return("card"==e?wt:Rt).subHeadingClass},buttonsClass:"mt-4 px-4 py-3 bg-gray-50 dark:bg-gray-900 sm:px-6 flex flex-wrap justify-between",legendClass:"text-base font-medium text-gray-900 dark:text-gray-100 text-center mb-4"},ue={getGridClass(e=0){return ue.gridClass},getGrid2Class(e="stripedRows"){return Qe(e,"fullWidth")?"overflow-x-auto":ue.grid2Class},getGrid3Class(e="stripedRows"){return Qe(e,"fullWidth")?"inline-block min-w-full py-2 align-middle":ue.grid3Class},getGrid4Class(e="stripedRows"){return Qe(e,"whiteBackground")?"":Qe(e,"fullWidth")?"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5":ue.grid4Class},getTableClass(e="stripedRows"){return Qe(e,"fullWidth")||Qe(e,"verticalLines")?"min-w-full divide-y divide-gray-300":ue.tableClass},getTheadClass(e="stripedRows"){return Qe(e,"whiteBackground")?"":ue.theadClass},getTheadRowClass(e="stripedRows"){return ue.theadRowClass+(Qe(e,"verticalLines")?" divide-x divide-gray-200 dark:divide-gray-700":"")},getTheadCellClass(e="stripedRows"){return ue.theadCellClass+(Qe(e,"uppercaseHeadings")?" uppercase":"")},getTbodyClass(e="stripedRows"){return(Qe(e,"whiteBackground")||Qe(e,"verticalLines")?"divide-y divide-gray-200 dark:divide-gray-800":ue.tableClass)+(Qe(e,"verticalLines")?" bg-white":"")},getTableRowClass(e="stripedRows",t,l,a){return(a?"cursor-pointer ":"")+(l?"bg-indigo-100 dark:bg-blue-800":(a?"hover:bg-yellow-50 dark:hover:bg-blue-900 ":"")+(!Qe(e,"stripedRows")||t%2==0?"bg-white dark:bg-black":"bg-gray-50 dark:bg-gray-800"))+(Qe(e,"verticalLines")?" divide-x divide-gray-200 dark:divide-gray-700":"")},gridClass:"flex flex-col",grid2Class:"",grid3Class:"inline-block min-w-full py-2 align-middle",grid4Class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",tableClass:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",theadClass:"bg-gray-50 dark:bg-gray-900",tableCellClass:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",theadRowClass:"select-none",theadCellClass:"px-6 py-4 text-left text-sm font-medium tracking-wider whitespace-nowrap",toolbarButtonClass:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 dark:border-gray-700 shadow-sm text-sm font-medium rounded text-gray-700 dark:text-gray-300 bg-white dark:bg-black hover:bg-gray-50 dark:hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black"},ti={colspans:"col-span-3 sm:col-span-3"},Z1=Object.freeze(Object.defineProperty({__proto__:null,a:vl,card:wt,dummy:ti,form:Ge,grid:ue,input:ft,modal:Kl,slideOver:Rt},Symbol.toStringTag,{value:"Module"})),li=se({__name:"TextLink",props:{color:{default:"blue"}},setup(e){const t=e,l=Zs(),s=f(()=>(vl[t.color]||vl.blue)+(l.href?"":" cursor-pointer"));return(e,t)=>(a(),u("a",{class:x(o(s))},[G(e.$slots,"default")],2))}}),ni={class:"flex","aria-label":"Breadcrumb"},si={role:"list",class:"flex items-center space-x-4"},oi=["href","title"],ai=s("svg",{class:"h-6 w-6 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z","clip-rule":"evenodd"})],-1),ii={class:"sr-only"},ri=se({__name:"Breadcrumbs",props:{homeHref:{default:"/"},homeLabel:{default:"Home"}},setup(l){return(e,t)=>(a(),u("nav",ni,[s("ol",si,[s("li",null,[s("div",null,[s("a",{href:l.homeHref,class:"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400",title:l.homeLabel},[ai,s("span",ii,M(l.homeLabel),1)],8,oi)])]),G(e.$slots,"default")])]))}}),ui={class:"flex items-center"},di=s("svg",{class:"h-6 w-6 flex-shrink-0 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})],-1),ci=["href","title"],fi=["title"],mi=se({__name:"Breadcrumb",props:{href:null,title:null},setup(l){return(e,t)=>(a(),u("li",null,[s("div",ui,[di,l.href?(a(),u("a",{key:0,href:l.href,class:"ml-4 text-lg font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",title:l.title},[G(e.$slots,"default")],8,ci)):(a(),u("span",{key:1,class:"ml-4 text-lg font-medium text-gray-700 dark:text-gray-300",title:l.title},[G(e.$slots,"default")],8,fi))])]))}}),vi={key:0,class:"text-base font-semibold text-gray-500 dark:text-gray-400"},hi={role:"list",class:"mt-4 divide-y divide-gray-200 dark:divide-gray-800 border-t border-b border-gray-200 dark:border-gray-800"},gi=se({__name:"NavList",props:{title:null},setup(l){return(e,t)=>(a(),u("div",null,[l.title?(a(),u("h2",vi,M(l.title),1)):$("",!0),s("ul",hi,[G(e.$slots,"default")])]))}}),pi={class:"relative flex items-start space-x-4 py-6"},yi={class:"flex-shrink-0"},bi={class:"flex h-12 w-12 items-center justify-center rounded-lg bg-indigo-50 dark:bg-indigo-900"},wi={class:"min-w-0 flex-1"},xi={class:"text-base font-medium text-gray-900 dark:text-gray-100"},ki={class:"rounded-sm focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2"},$i=["href"],Ci=s("span",{class:"absolute inset-0","aria-hidden":"true"},null,-1),_i={class:"text-base text-gray-500"},Li=s("div",{class:"flex-shrink-0 self-center"},[s("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})])],-1),Vi=se({__name:"NavListItem",props:{title:null,href:null,icon:null,iconSvg:null,iconSrc:null,iconAlt:null},setup(n){return(e,t)=>{var l=q("Icon");return a(),u("li",pi,[s("div",yi,[s("span",bi,[ge(l,{class:"w-6 h-6 text-indigo-700 dark:text-indigo-300",image:n.icon,src:n.iconSrc,svg:n.iconSvg,alt:n.iconAlt},null,8,["image","src","svg","alt"])])]),s("div",wi,[s("h3",xi,[s("span",ki,[s("a",{href:n.href,class:"focus:outline-none"},[Ci,ye(" "+M(n.title),1)],8,$i)])]),s("p",_i,[G(e.$slots,"default")])]),Li])}}});function Mi(e){X.user.value=e,X.events.publish("signIn",e)}function Si(){X.user.value=null,X.events.publish("signOut",null)}function Is(e){var t;return 0<=((null==(t=X.user.value)?void 0:t.roles)||[]).indexOf(e)}function Ai(e){var t;return 0<=((null==(t=X.user.value)?void 0:t.permissions)||[]).indexOf(e)}function yn(){return Is("Admin")}function dl(e){if(!e)return!1;if(!e.requiresAuth)return!0;var t=X.user.value;if(!t)return!1;if(yn())return!0;let[l,a]=[t.roles||[],t.permissions||[]],[s,n,o,r]=[e.requiredRoles||[],e.requiredPermissions||[],e.requiresAnyRole||[],e.requiresAnyPermission||[]];return!(!s.every(e=>0<=l.indexOf(e))||0<o.length&&!o.some(e=>0<=l.indexOf(e))||!n.every(e=>0<=a.indexOf(e))||0<r.length&&!r.every(e=>0<=a.indexOf(e)))}function Fi(e){if(!e||!e.requiresAuth)return null;var t=X.user.value;if(!t)return`<b>${e.request.name}</b> requires Authentication`;if(yn())return null;let[l,a]=[t.roles||[],t.permissions||[]],[s,n,o,r]=[e.requiredRoles||[],e.requiredPermissions||[],e.requiresAnyRole||[],e.requiresAnyPermission||[]],i=s.filter(e=>l.indexOf(e)<0);return 0<i.length?`Requires ${i.map(e=>"<b>"+e+"</b>").join(", ")} Role`+(1<i.length?"s":""):0<(t=n.filter(e=>a.indexOf(e)<0)).length?`Requires ${t.map(e=>"<b>"+e+"</b>").join(", ")} Permission`+(1<t.length?"s":""):0<o.length&&!o.some(e=>0<=l.indexOf(e))?`Requires any ${o.filter(e=>l.indexOf(e)<0).map(e=>"<b>"+e+"</b>").join(", ")} Role`+(1<i.length?"s":""):0<r.length&&!r.every(e=>0<=a.indexOf(e))?`Requires any ${r.filter(e=>a.indexOf(e)<0).map(e=>"<b>"+e+"</b>").join(", ")} Permission`+(1<t.length?"s":""):null}function bn(){return{signIn:Mi,signOut:Si,user:f(()=>X.user.value||null),isAuthenticated:f(()=>null!=X.user.value),hasRole:Is,hasPermission:Ai,isAdmin:yn,canAccess:dl,invalidAccessMessage:Fi}}const Ti={key:0},Ii={class:"md:p-4"},Ds=se({__name:"EnsureAccess",props:{invalidAccess:null,alertClass:null},emits:["done"],setup(r){const i=bn()["isAuthenticated"],t=_t()["config"],d=()=>{var e=location.href.substring(location.origin.length)||"/",e=zt(t.value.redirectSignIn,{redirect:e});t.value.navigate(e)},c=()=>{var e=location.href.substring(location.origin.length)||"/",e=zt(t.value.redirectSignOut,{ReturnUrl:e});t.value.navigate(e)};return(e,t)=>{var l=q("Alert"),n=q("SecondaryButton");return r.invalidAccess?(a(),u("div",Ti,[ge(l,{class:x(r.alertClass),innerHTML:r.invalidAccess},null,8,["class","innerHTML"]),s("div",Ii,[o(i)?(a(),Y(n,{key:1,onClick:c},{default:he(()=>[ye("Sign Out")]),_:1})):(a(),Y(n,{key:0,onClick:d},{default:he(()=>[ye("Sign In")]),_:1}))])])):$("",!0)}}}),Di={class:"absolute top-0 right-0 bg-white dark:bg-black border dark:border-gray-800 rounded normal-case text-sm shadow w-80"},Pi={class:"p-4"},ji=s("h3",{class:"text-base font-medium mb-3 dark:text-gray-100"},"Sort",-1),Oi={class:"flex w-full justify-center"},Bi=s("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},[s("g",{fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10.082 5.629L9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"}),s("path",{d:"M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999l.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"})])],-1),Ei=s("span",null,"ASC",-1),Ri=[Bi,Ei],Ni=gl('<svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="currentColor"><path d="M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V7z"></path><path fill-rule="evenodd" d="M10.082 12.629L9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371h-1.781zm1.57-.785L11 9.688h-.047l-.652 2.156h1.351z"></path><path d="M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999l.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"></path></g></svg><span>DESC</span>',2),Hi=[Ni],zi=s("h3",{class:"text-base font-medium mt-4 mb-2"}," Filter ",-1),Ui={key:0},qi=["id","value"],Qi=["for"],Ki={key:1},Gi={class:"mb-2"},Wi={class:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-indigo-100 text-indigo-700"},Zi=["onClick"],Ji=s("svg",{class:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8"},[s("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M1 1l6 6m0-6L1 7"})],-1),Xi=[Ji],Yi={class:"flex"},er=s("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),tr=[er],lr={class:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},wn=se({__name:"FilterColumn",props:{definitions:null,column:null,topLeft:null},emits:["done","save"],setup(d,{emit:t}){const c=d,v=S(),p=S(""),m=S(""),g=S([]),y=f(()=>1==c.column.meta.isEnum),h=f(()=>1==c.column.meta.isEnum?fn(fs(c.column.type)):[]),b=f(()=>{var e;return(null==(e=l(c.column.type))?void 0:e.map(e=>({key:e.value,value:e.name})))||[]}),w=S({filters:[]}),k=f(()=>w.value.filters);function l(e){let t=c.definitions;return t=is(e)?t:t.filter(e=>"string"!==e.types)}function C(e,t){return l(e).find(e=>e.value===t)}function L(){var e;p.value&&(e=null==(e=C(c.column.type,p.value))?void 0:e.name)&&(w.value.filters.push({key:p.value,name:e,value:m.value}),p.value=m.value="")}function V(){t("done")}function A(){var e;p.value="%",null!=(e=v.value)&&e.focus()}function j(){var e;m.value&&L(),y.value&&(e=Object.values(g.value).filter(e=>e),w.value.filters=0<e.length?[{key:"%In",name:"In",value:e.join(",")}]:[]),t("save",w.value),t("done")}function T(e){w.value.sort=e===w.value.sort?void 0:e,hl(j)}return jl(()=>w.value=Object.assign({},c.column.settings,{filters:Array.from(c.column.settings.filters)})),jl(()=>{var e;return g.value=(null==(e=null==(e=null==(e=c.column.settings.filters)?void 0:e[0])?void 0:e.value)?void 0:e.split(","))||[]}),(e,t)=>{var l=q("SelectInput"),n=q("TextInput"),r=q("PrimaryButton"),i=q("SecondaryButton");return a(),u("div",{class:"fixed z-20 inset-0 overflow-y-auto",onClick:V,onVnodeMounted:A},[s("div",{class:"absolute",style:Gl(`top:${d.topLeft.y}px;left:${d.topLeft.x}px`),onClick:t[5]||(t[5]=He(()=>{},["stop"]))},[s("div",Di,[s("div",Pi,[ji,s("div",Oi,[s("button",{type:"button",title:"Sort Ascending",onClick:t[0]||(t[0]=e=>T("ASC")),class:x(`${"ASC"===w.value.sort?"bg-indigo-100 border-indigo-500":"bg-white hover:bg-gray-50 border-gray-300"} mr-1 inline-flex items-center px-2.5 py-1.5 border shadow-sm text-sm font-medium rounded text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`)},Ri,2),s("button",{type:"button",title:"Sort Descending",onClick:t[1]||(t[1]=e=>T("DESC")),class:x(`${"DESC"===w.value.sort?"bg-indigo-100 border-indigo-500":"bg-white hover:bg-gray-50 border-gray-300"} ml-1 inline-flex items-center px-2.5 py-1.5 border shadow-sm text-sm font-medium rounded text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`)},Hi,2)]),zi,o(y)?(a(),u("div",Ui,[(a(!0),u(ke,null,Me(o(h),e=>(a(),u("div",{key:e.key,class:"flex items-center"},[xt(s("input",{type:"checkbox",id:e.key,value:e.key,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),class:"h-4 w-4 border-gray-300 rounded text-indigo-600 focus:ring-indigo-500"},null,8,qi),[[Wl,g.value]]),s("label",{for:e.key,class:"ml-3"},M(e.value),9,Qi)]))),128))])):(a(),u("div",Ki,[(a(!0),u(ke,null,Me(o(k),(e,l)=>{return a(),u("div",Gi,[s("span",Wi,[ye(M(d.column.name)+" "+M(e.name)+" "+M((e=e,ps(C(c.column.type,e.key),c.column.type,e)))+" ",1),s("button",{type:"button",onClick:e=>{var t;t=l,w.value.filters.splice(t,1)},class:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:outline-none focus:bg-indigo-500 focus:text-white"},Xi,8,Zi)])])}),256)),s("div",Yi,[ge(l,{id:"filterRule",class:"w-32 mr-1",modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),entries:o(b),label:"",placeholder:""},null,8,["modelValue","entries"]),"none"!==(null==(l=C(d.column.type,p.value))?void 0:l.valueType)?(a(),Y(n,{key:0,ref_key:"txtFilter",ref:v,id:"filterValue",class:"w-32 mr-1",type:"text",modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=e=>m.value=e),onKeyup:Js(L,["enter"]),label:"",placeholder:""},null,8,["modelValue","onKeyup"])):$("",!0),s("div",{class:"pt-1"},[s("button",{type:"button",onClick:L,class:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},tr)])])]))]),s("div",lr,[ge(r,{onClick:j,color:"red",class:"ml-2"},{default:he(()=>[ye(" Save ")]),_:1}),ge(i,{onClick:V},{default:he(()=>[ye(" Cancel ")]),_:1})])])],4)],512)}}}),nr={class:"px-4 sm:px-6 lg:px-8 text-sm"},sr={class:"flex flex-wrap"},or={class:"group pr-4 sm:pr-6 lg:pr-8"},ar={class:"flex justify-between w-full font-medium"},ir={class:"w-6 flex justify-end"},rr={class:"hidden group-hover:inline"},ur=["onClick","title"],dr=s("svg",{class:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8"},[s("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M1 1l6 6m0-6L1 7"})],-1),cr=[dr],fr={key:0,class:"pt-2"},mr={class:"ml-2"},vr={key:1},hr={class:"pt-2"},gr={class:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-indigo-100 text-indigo-700"},pr=["onClick"],yr=s("svg",{class:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8"},[s("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M1 1l6 6m0-6L1 7"})],-1),br=[yr],wr=s("span",null,"Clear All",-1),xr=[wr],xn=se({__name:"FilterViews",props:{definitions:null,columns:null},emits:["done","change"],setup(e,{emit:r}){const l=e,n=f(()=>l.columns.filter(e=>0<e.settings.filters.length));function i(e,t){return function(e){let t=l.definitions;return t=is(e)?t:t.filter(e=>"string"!==e.types)}(e).find(e=>e.value===t)}function d(){l.columns.forEach(e=>{e.settings.filters=[],r("change",e)}),r("done")}return(e,t)=>(a(),u("div",nr,[s("div",sr,[(a(!0),u(ke,null,Me(o(n),n=>{return a(),u("fieldset",or,[s("legend",ar,[s("span",null,M(o(Oe)(n.name)),1),s("span",ir,[s("span",rr,[s("button",{onClick:e=>{var t;(t=n).settings.filters=[],r("change",t)},title:`Clear all ${o(Oe)(n.name)} filters`,class:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-red-600 hover:bg-red-200 hover:text-red-500 focus:outline-none focus:bg-red-500 focus:text-white"},cr,8,ur)])])]),n.meta.isEnum?(a(),u("div",fr,[(a(!0),u(ke,null,Me(null==(e=null==(e=null==(e=n.settings.filters)?void 0:e[0])?void 0:e.value)?void 0:e.split(","),e=>(a(),u("div",{key:e,class:"flex items-center"},[s("label",mr,M(e),1)]))),128))])):(a(),u("div",vr,[(a(!0),u(ke,null,Me(n.settings.filters,(e,l)=>{return a(),u("div",hr,[s("span",gr,[ye(M(n.name)+" "+M(e.name)+" "+M((e=e,ps(i((t=n).type,e.value),t.type,e)))+" ",1),s("button",{type:"button",onClick:e=>{var t;(t=n).settings.filters.splice(l,1),r("change",t)},class:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:outline-none focus:bg-indigo-500 focus:text-white"},br,8,pr)])]);var t}),256))]))]);var e}),256))]),s("div",{class:"flex justify-center pt-4"},[s("button",{type:"button",onClick:d,class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-sm font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},xr)])]))}}),kr={class:"bg-white dark:bg-black px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},$r={class:""},Cr={class:"mt-3 text-center sm:mt-0 sm:mx-4 sm:text-left"},_r=s("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100"},"Query Preferences",-1),Lr={class:"mt-4"},Vr=["for"],Mr=["id"],Sr=["value","selected"],Ar={class:"mt-4 flex items-center py-4 border-b border-gray-200 dark:border-gray-800"},Fr=["id","checked"],Tr=["for"],Ir={class:"mt-4"},Dr={class:"pb-2 px-4"},Pr={class:""},jr=["id","value"],Or=["for"],Br={class:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},kn=se({__name:"QueryPrefs",props:{id:{default:"QueryPrefs"},columns:null,prefs:null,maxLimit:null},emits:["done","save"],setup(r,{emit:e}){const i=r,t=_t()["autoQueryGridDefaults"],d=S({}),c=(jl(()=>d.value=Object.assign({take:t.value.take,selectedColumns:[]},i.prefs)),[10,25,50,100,250,500,1e3]);function f(){e("done")}function v(){e("save",d.value)}return(e,t)=>{const l=q("PrimaryButton"),n=q("SecondaryButton"),o=q("ModalDialog");return a(),Y(o,{id:r.id,onDone:f,"size-class":"w-full sm:max-w-prose"},{default:he(()=>[s("div",kr,[s("div",$r,[s("div",Cr,[_r,s("div",Lr,[s("label",{for:r.id+"-take",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Results per page",8,Vr),xt(s("select",{id:r.id+"-take","onUpdate:modelValue":t[0]||(t[0]=e=>d.value.take=e),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-white dark:bg-black border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[(a(!0),u(ke,null,Me(c.filter(e=>null==i.maxLimit||e<=i.maxLimit),e=>(a(),u("option",{value:e,selected:e===d.value.take},M(e),9,Sr))),256))],8,Mr),[[Xs,d.value.take]])]),s("div",Ar,[s("input",{type:"radio",id:r.id+"-allColumns",onClick:t[1]||(t[1]=e=>d.value.selectedColumns=[]),checked:0===d.value.selectedColumns.length,class:"focus:ring-indigo-500 h-4 w-4 bg-white dark:bg-black text-indigo-600 dark:text-indigo-400 border-gray-300 dark:border-gray-700"},null,8,Fr),s("label",{class:"ml-3 block text-gray-700 dark:text-gray-300",for:r.id+"-allColumns"},"View all columns",8,Tr)]),s("div",Ir,[s("div",Dr,[s("div",Pr,[(a(!0),u(ke,null,Me(r.columns,e=>(a(),u("div",{key:e.name,class:"flex items-center"},[xt(s("input",{type:"checkbox",id:e.name,value:e.name,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value.selectedColumns=e),class:"h-4 w-4 bg-white dark:bg-black border-gray-300 dark:border-gray-700 rounded text-indigo-600 dark:text-indigo-400 focus:ring-indigo-500"},null,8,jr),[[Wl,d.value.selectedColumns]]),s("label",{for:e.name,class:"ml-3"},M(e.name),9,Or)]))),128))])])])])])]),s("div",Br,[ge(l,{onClick:v,color:"red",class:"ml-2"},{default:he(()=>[ye(" Save ")]),_:1}),ge(n,{onClick:f},{default:he(()=>[ye(" Cancel ")]),_:1})])]),_:1},8,["id"])}}}),Er={key:0},Rr={key:1},Nr={key:2,class:"pt-1"},Hr={key:0},zr={key:1},Ur={key:3},qr={class:"pl-1 pt-1 flex flex-wrap"},Qr={class:"flex mt-1"},Kr=["title"],Gr=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("g",{"stroke-width":"1.5",fill:"none"},[s("path",{d:"M9 3H3.6a.6.6 0 0 0-.6.6v16.8a.6.6 0 0 0 .6.6H9M9 3v18M9 3h6M9 21h6m0-18h5.4a.6.6 0 0 1 .6.6v16.8a.6.6 0 0 1-.6.6H15m0-18v18",stroke:"currentColor"})])],-1),Wr=[Gr],Zr=["disabled"],Jr=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6l6 6zM6 6h2v12H6z",fill:"currentColor"})],-1),Xr=[Jr],Yr=["disabled"],eu=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M15.41 7.41L14 6l-6 6l6 6l1.41-1.41L10.83 12z",fill:"currentColor"})],-1),tu=[eu],lu=["disabled"],nu=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z",fill:"currentColor"})],-1),su=[nu],ou=["disabled"],au=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6l-6-6zM16 6h2v12h-2z",fill:"currentColor"})],-1),iu=[au],ru={key:0,class:"flex mt-1"},uu={class:"px-4 text-lg text-black dark:text-white"},du={key:0},cu={key:1},fu=s("span",{class:"hidden xl:inline"}," Showing Results ",-1),mu={key:2},vu={class:"flex flex-wrap"},hu={key:0,class:"pl-2 mt-1"},gu=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 20v-5h-5M4 4v5h5m10.938 2A8.001 8.001 0 0 0 5.07 8m-1.008 5a8.001 8.001  0 0 0 14.868 3"})],-1),pu=[gu],yu={key:1,class:"pl-2 mt-1"},bu=gl('<svg class="w-5 h-5 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28.781 4.405h-10.13V2.018L2 4.588v22.527l16.651 2.868v-3.538h10.13A1.162 1.162 0 0 0 30 25.349V5.5a1.162 1.162 0 0 0-1.219-1.095zm.16 21.126H18.617l-.017-1.889h2.487v-2.2h-2.506l-.012-1.3h2.518v-2.2H18.55l-.012-1.3h2.549v-2.2H18.53v-1.3h2.557v-2.2H18.53v-1.3h2.557v-2.2H18.53v-2h10.411z" fill="#20744a" fill-rule="evenodd"></path><path fill="#20744a" d="M22.487 7.439h4.323v2.2h-4.323z"></path><path fill="#20744a" d="M22.487 10.94h4.323v2.2h-4.323z"></path><path fill="#20744a" d="M22.487 14.441h4.323v2.2h-4.323z"></path><path fill="#20744a" d="M22.487 17.942h4.323v2.2h-4.323z"></path><path fill="#20744a" d="M22.487 21.443h4.323v2.2h-4.323z"></path><path fill="#fff" fill-rule="evenodd" d="M6.347 10.673l2.146-.123l1.349 3.709l1.594-3.862l2.146-.123l-2.606 5.266l2.606 5.279l-2.269-.153l-1.532-4.024l-1.533 3.871l-2.085-.184l2.422-4.663l-2.238-4.993z"></path></svg><span class="text-green-900 dark:text-green-100">Excel</span>',2),wu=[bu],xu={key:2,class:"pl-2 mt-1"},ku={key:0,class:"w-5 h-5 mr-1 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},$u=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),Cu=[$u],_u={key:1,class:"w-5 h-5 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Lu=s("g",{fill:"none"},[s("path",{d:"M8 4v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.242a2 2 0 0 0-.602-1.43L16.083 2.57A2 2 0 0 0 14.685 2H10a2 2 0 0 0-2 2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M16 18v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Vu=[Lu],Mu=s("span",{class:"whitespace-nowrap"},"Copy URL",-1),Su={key:3,class:"pl-2 mt-1"},Au=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M6.78 2.72a.75.75 0 0 1 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75a.75.75 0 0 1 1.5 0a6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0Z"})],-1),Fu=[Au],Tu={key:4,class:"pl-2 mt-1"},Iu=s("svg",{class:"flex-none w-5 h-5 mr-2 text-gray-400 dark:text-gray-500 group-hover:text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z","clip-rule":"evenodd"})],-1),Du={class:"mr-1"},Pu={key:0,class:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},ju=s("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"},null,-1),Ou=[ju],Bu={key:1,class:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Eu=s("path",{"fill-rule":"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1),Ru=[Eu],Nu={key:5,class:"pl-2 mt-1"},Hu=["title"],zu=s("svg",{class:"w-5 h-5 mr-1 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",fill:"currentColor"})],-1),Uu={class:"whitespace-nowrap"},qu={key:7},Qu={key:0,class:"cursor-pointer flex justify-between items-center hover:text-gray-900 dark:hover:text-gray-50"},Ku={class:"mr-1 select-none"},Gu={key:1,class:"flex justify-between items-center"},Wu={class:"mr-1 select-none"},Zu=se({__name:"AutoQueryGrid",props:{filterDefinitions:null,id:{default:"AutoQueryGrid"},apis:null,type:null,prefs:null,deny:null,hide:null,selectedColumns:null,toolbarButtonClass:null,tableStyle:null,gridClass:null,grid2Class:null,grid3Class:null,grid4Class:null,tableClass:null,theadClass:null,tbodyClass:null,theadRowClass:null,theadCellClass:null,headerTitle:null,headerTitles:null,visibleFrom:null,rowClass:null,rowStyle:null,apiPrefs:null,canFilter:null,disableKeyBindings:null,configureField:null,skip:{default:0},create:{type:Boolean},edit:null,filters:null},emits:["headerSelected","rowSelected"],setup(p,{expose:t,emit:v}){const r=p,{config:W,autoQueryGridDefaults:Z}=_t(),K=Z,J=Ne("client"),l=W.value.storage,i=e=>"string"==typeof e?e.split(","):e||[];function e(e,t){const l=i(t);return e.reduce((e,t)=>(e[t]=!l.includes(t),e),{})}const ee="filtering,queryString,queryFilters".split(","),te="copyApiUrl,downloadCsv,filtersView,newItem,pagingInfo,pagingNav,preferences,refresh,resetPreferences,toolbar".split(","),le=f(()=>r.deny?e(ee,r.deny):e(ee,K.value.deny)),ae=f(()=>r.hide?e(te,r.hide):e(te,K.value.hide));function m(e){return le.value[e]}function g(e){return ae.value[e]}const y=f(()=>r.tableStyle??K.value.tableStyle),se=f(()=>r.gridClass??ue.getGridClass(y.value)),ne=f(()=>r.grid2Class??ue.getGrid2Class(y.value)),oe=f(()=>r.grid3Class??ue.getGrid3Class(y.value)),re=f(()=>r.grid4Class??ue.getGrid4Class(y.value)),ie=f(()=>r.tableClass??ue.getTableClass(y.value)),de=f(()=>r.theadClass??ue.getTheadClass(y.value)),ce=f(()=>r.theadRowClass??ue.getTheadRowClass(y.value)),ve=f(()=>r.theadCellClass??ue.getTheadCellClass(y.value)),h=f(()=>r.toolbarButtonClass??ue.toolbarButtonClass);function pe(e,t){var l,a;return r.rowClass?r.rowClass(e,t):(l=!!U.value.AnyUpdate,a=(null!=(a=d.value)&&a.name?fe(e,d.value.name):null)==A.value,ue.getTableRowClass(r.tableStyle,t,a,l))}const b=Zl(),me=f(()=>{var e;return st((null==(e=U.value.AnyQuery.viewModel)?void 0:e.name)||U.value.AnyQuery.dataModel.name)}),be=f(()=>{const t=Object.keys(b).map(e=>e.toLowerCase());return Ze(me.value).filter(e=>t.includes(e.name.toLowerCase())||t.includes(e.name.toLowerCase()+"-header")).map(e=>e.name)});const w=f(()=>{var e=(0<(e=i(r.selectedColumns)).length?e:0<be.value.length?be.value:[]).map(e=>e.toLowerCase());const l=Ze(me.value);return 0<e.length?e.map(t=>l.find(e=>e.name.toLowerCase()===t)).filter(e=>null!=e):l}),xe=f(()=>{let e=w.value.map(e=>e.name),t=i(_.value.selectedColumns).map(e=>e.toLowerCase());return 0<t.length?e.filter(e=>t.includes(e.toLowerCase())):e}),k=S([]),C=S(new Ye),we=S(new Ye),L=S(),V=S(!1),A=S(),j=S(),T=S(!1),F=S(),O=S(r.skip),I=S(!1),_=S({take:25}),D=S(!1),ke=f(()=>k.value.some(e=>0<e.settings.filters.length||!!e.settings.sort)||_.value.selectedColumns),Ce=f(()=>k.value.map(e=>e.settings.filters.length).reduce((e,t)=>e+t,0)),Se=f(()=>{var e;return Ze(st(c.value||(null==(e=U.value.AnyQuery)?void 0:e.dataModel.name)))}),d=f(()=>{var e;return Jt(st(c.value||(null==(e=U.value.AnyQuery)?void 0:e.dataModel.name)))}),B=f(()=>_.value.take??25),E=f(()=>C.value.response?fe(C.value.response,"results"):[]),N=f(()=>{var e;return(null==(e=C.value.response)?void 0:e.total)??E.value.length??0}),Le=f(()=>0<O.value),Ve=f(()=>0<O.value),$e=f(()=>E.value.length>=B.value),Ae=f(()=>E.value.length>=B.value),H=S(),P=S(),je={NoQuery:"No Query API was found"};function Te(t){if(t){if(r.canFilter)return r.canFilter(t);var e=Se.value.find(e=>e.name.toLowerCase()==t.toLowerCase());if(e)return!rs(e)}}function n(e){m("queryString")&&Yl(e)}async function Fe(e){O.value+=e,O.value<0&&(O.value=0);e=Math.floor(N.value/B.value)*B.value;O.value>e&&(O.value=e),n({skip:O.value||void 0}),await R()}async function Oe(e,t){var l,a;j.value=null,A.value=t,e&&t&&(a=qt(U.value.AnyQuery,{[e]:t}),(a=await J.api(a)).succeeded)&&((a=null==(a=fe(a.response,"results"))?void 0:a[0])||console.warn(`API ${null==(l=U.value.AnyQuery)?void 0:l.request.name}(${e}:${t}) returned no results`),j.value=a)}async function Ie(e,t){v("rowSelected",e,t);t=null==(t=d.value)?void 0:t.name,e=t?fe(e,t):null;t&&e&&(n({edit:e}),Oe(t,e))}function _e(t,e){var l,a,s;m("filtering")&&(l=e.target,Te(t)&&"TD"!==(null==l?void 0:l.tagName)&&(l=null==(l=null==l?void 0:l.closest("TABLE"))?void 0:l.getBoundingClientRect(),a=k.value.find(e=>e.name.toLowerCase()==t.toLowerCase()))&&l&&(s=l.x+318+10,F.value={column:a,topLeft:{x:Math.max(Math.floor(e.clientX+159),s),y:l.y+45}}),v("headerSelected",t,e))}function De(){F.value=null}async function Be(e){var t=null==(t=F.value)?void 0:t.column;t&&(t.settings=e,l.setItem(tt(t.name),JSON.stringify(t.settings)),await R()),F.value=null}async function Ee(e){l.setItem(tt(e.name),JSON.stringify(e.settings)),await R()}async function He(e){T.value=!1,_.value=e,l.setItem(Je(),JSON.stringify(e)),await R()}function Pe(){null!=(e=H.value)&&e.forceUpdate(),null!=(e=P.value)&&e.forceUpdate();var e=We();null!=(e=null==e?void 0:e.proxy)&&e.$forceUpdate()}async function R(){await ze(qe())}async function Re(){await R()}async function ze(a){var s=U.value.AnyQuery;if(s){let e=qt(s,a),t=Qn(e=>{C.value.response=C.value.error=void 0,D.value=e}),l=await J.api(e);t(),hl(()=>C.value=l);s=fe(l.response,"results")||[];l.succeeded&&s.label}else console.error(je.NoQuery)}function qe(){let a={include:"total",take:B.value},t=i(_.value.selectedColumns||r.selectedColumns);if(0<t.length){var l=d.value;l&&t.includes(l.name)&&(t=[l.name,...t]);const s=Se.value,n=[];t.forEach(t=>{var e,l=s.find(e=>e.name.toLowerCase()==t.toLowerCase());null!=(e=null==l?void 0:l.ref)&&e.selfId&&n.push(l.ref.selfId),fe(b,t)&&n.push(...s.filter(e=>{return(null==(e=null==(e=e.ref)?void 0:e.selfId)?void 0:e.toLowerCase())==t.toLowerCase()}).map(e=>e.name))}),n.forEach(e=>{t.includes(e)||t.push(e)}),a.fields=t.join(",")}let e=[];if(k.value.forEach(l=>{l.settings.sort&&e.push(("DESC"===l.settings.sort?"-":"")+l.name),l.settings.filters.forEach(e=>{var t=e.key.replace("%",l.name);a[t]=e.value})}),r.filters&&Object.keys(r.filters).forEach(t=>{w.value.find(e=>e.name.toLowerCase()===t.toLowerCase())&&(a[t]=r.filters[t])}),m("queryString")&&m("queryFilters")){var l=location.search||(location.hash.includes("?")?"?"+Tl(location.hash,"?"):"");let e=Bl(l);Object.keys(e).forEach(t=>{w.value.find(e=>e.name.toLowerCase()===t.toLowerCase())&&(a[t]=e[t])}),typeof e.skip<"u"&&(l=parseInt(e.skip),isNaN(l)||(O.value=a.skip=l))}return"u"<typeof a.skip&&0<O.value&&(a.skip=O.value),0<e.length&&(a.orderBy=e.join(",")),a}function Ge(){var e=Qe("csv");Nl(e),typeof window<"u"&&window.open(e)}function Ue(){Nl(Qe("json")),I.value=!0,setTimeout(()=>I.value=!1,3e3)}function Qe(e="json"){var t=qe(),l="/api/"+(null==(l=U.value.AnyQuery)?void 0:l.request.name),l=vo(J.baseUrl,zt(l,{...t,jsconfig:"edv"}));return 0<=l.indexOf("?")?pl(l,"?")+"."+e+"?"+Tl(l,"?"):l+".json"}async function Xe(){k.value.forEach(e=>{e.settings={filters:[]},l.removeItem(tt(e.name))}),_.value={take:25},l.removeItem(Je()),await R()}function Ke(){V.value=!0,n({create:null})}t({update:R,search:ze,createRequestArgs:qe,reset:ht,createDone:X,createSave:yt,editDone:Q,editSave:gt,forceUpdate:Pe,setEdit:function(e){Object.assign(j.value,e),Pe()},edit:j});const c=f(()=>Pt(r.type)),z=f(()=>{var e;return c.value||(null==(e=U.value.AnyQuery)?void 0:e.dataModel.name)}),Je=()=>{var e;return r.id+"/ApiPrefs/"+(c.value||(null==(e=U.value.AnyQuery)?void 0:e.dataModel.name))},tt=e=>{var t;return`Column/${r.id}:${c.value||(null==(t=U.value.AnyQuery)?void 0:t.dataModel.name)}.`+e},{metadataApi:lt,typeOf:st,apiOf:nt,filterDefinitions:ot}=et(),rt=bn()["invalidAccessMessage"],it=f(()=>r.filterDefinitions||ot.value),U=f(()=>{var e=i(r.apis);return 0<e.length?Tt.from(e.map(e=>nt(e)).filter(e=>null!=e).map(e=>e)):Tt.forType(c.value,lt.value)}),ut=e=>`<span class="text-yellow-700">${e}</span>`,dt=f(()=>{var e;return lt.value?0<(e=i(r.apis).map(e=>null==nt(e)?e:null).filter(e=>null!=e)).length?ut(`Unknown API${1<e.length?"s":""}: `+e.join(", ")):(e=U.value).empty?ut("Mising DataModel in property 'type' or AutoQuery APIs to use in property 'apis'"):e.AnyQuery?null:ut(je.NoQuery):ut(`AppMetadata not loaded, see <a class="${vl.blue}" href="https://docs.servicestack.net/vue/use-metadata" target="_blank">useMetadata()</a>`)}),ct=f(()=>U.value.AnyQuery&&rt(U.value.AnyQuery)),ft=f(()=>U.value.Create&&rt(U.value.Create)),vt=f(()=>U.value.AnyUpdate&&rt(U.value.AnyUpdate)),pt=f(()=>dl(U.value.Create)),mt=(f(()=>dl(U.value.AnyUpdate)),f(()=>dl(U.value.Delete)));function Q(){j.value=null,A.value=null,n({edit:void 0})}function X(){V.value=!1,n({create:void 0})}async function gt(){await R(),Q()}async function yt(){await R(),X()}function ht(){C.value=new Ye,we.value=new Ye,V.value=!1,A.value=null,j.value=null,T.value=!1,F.value=null,O.value=r.skip,I.value=!1,_.value={take:25},D.value=!1;var e,t=r.prefs||ml(l.getItem(Je())),t=(t&&(_.value=t),k.value=w.value.map(e=>({name:e.name,type:e.type,meta:e,settings:Object.assign({filters:[]},ml(l.getItem(tt(e.name))))})),isNaN(r.skip)||(O.value=r.skip),null==(t=d.value)?void 0:t.name);m("queryString")&&(e=location.search||(location.hash.includes("?")?"?"+Tl(location.hash,"?"):""),typeof(e=Bl(e)).create<"u"?V.value=typeof e.create<"u":!t||"string"!=typeof e.edit&&"number"!=typeof e.edit||Oe(t,e.edit)),!0===r.create&&(V.value=!0),t&&null!=r.edit&&Oe(t,r.edit)}return at(async()=>{ht(),await R()}),(l,e)=>{const t=q("Alert"),n=q("EnsureAccessDialog"),r=q("AutoCreateForm"),i=q("AutoEditForm"),d=q("ErrorSummary"),c=q("Loading"),f=q("SettingsIcons"),v=q("DataGrid");return o(dt)?(a(),u("div",Er,[ge(t,{innerHTML:o(dt)},null,8,["innerHTML"])])):o(ct)?(a(),u("div",Rr,[ge(Ds,{"invalid-access":o(ct)},null,8,["invalid-access"])])):(a(),u("div",Nr,[V.value&&o(U).Create?(a(),u("div",Hr,[o(ft)?(a(),Y(n,{key:0,title:"Create "+o(z),"invalid-access":o(ft),"alert-class":"text-yellow-700",onDone:X},null,8,["title","invalid-access"])):o(b).createform?G(l.$slots,"createform",{key:1,type:o(U).Create.request.name,configure:p.configureField,done:X,save:yt}):(a(),Y(r,{key:2,ref_key:"createForm",ref:H,type:o(U).Create.request.name,configure:p.configureField,onDone:X,onSave:yt},{header:he(()=>[G(l.$slots,"formheader",{form:"create",formInstance:H.value,apis:o(U),type:o(z)})]),footer:he(()=>[G(l.$slots,"formfooter",{form:"create",formInstance:H.value,apis:o(U),type:o(z)})]),_:3},8,["type","configure"]))])):j.value&&o(U).AnyUpdate?(a(),u("div",zr,[o(vt)?(a(),Y(n,{key:0,title:"Update "+o(z),"invalid-access":o(vt),"alert-class":"text-yellow-700",onDone:Q},null,8,["title","invalid-access"])):o(b).editform?G(l.$slots,"editform",{key:1,model:j.value,type:o(U).AnyUpdate.request.name,deleteType:o(mt)?o(U).Delete.request.name:null,configure:p.configureField,done:Q,save:gt}):(a(),Y(i,{key:2,ref_key:"editForm",ref:P,modelValue:j.value,"onUpdate:modelValue":e[0]||(e[0]=e=>j.value=e),type:o(U).AnyUpdate.request.name,deleteType:o(mt)?o(U).Delete.request.name:null,configure:p.configureField,onDone:Q,onSave:gt,onDelete:gt},{header:he(()=>[G(l.$slots,"formheader",{form:"edit",formInstance:P.value,apis:o(U),type:o(z),model:j.value,id:A.value})]),footer:he(()=>[G(l.$slots,"formfooter",{form:"edit",formInstance:P.value,apis:o(U),type:o(z),model:j.value,id:A.value})]),_:3},8,["modelValue","type","deleteType","configure"]))])):$("",!0),o(b).toolbar?G(l.$slots,"toolbar",{key:2}):g("toolbar")?(a(),u("div",Ur,[T.value?(a(),Y(kn,{key:0,columns:o(w),prefs:_.value,onDone:e[1]||(e[1]=e=>T.value=!1),onSave:He},null,8,["columns","prefs"])):$("",!0),s("div",qr,[s("div",Qr,[g("preferences")?(a(),u("button",{key:0,type:"button",class:"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400",title:o(z)+" Preferences",onClick:e[2]||(e[2]=e=>T.value=!T.value)},Wr,8,Kr)):$("",!0),g("pagingNav")?(a(),u("button",{key:1,type:"button",class:x(["pl-2",o(Le)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"First page",disabled:!o(Le),onClick:e[3]||(e[3]=e=>Fe(-o(N)))},Xr,10,Zr)):$("",!0),g("pagingNav")?(a(),u("button",{key:2,type:"button",class:x(["pl-2",o(Ve)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"Previous page",disabled:!o(Ve),onClick:e[4]||(e[4]=e=>Fe(-o(B)))},tu,10,Yr)):$("",!0),g("pagingNav")?(a(),u("button",{key:3,type:"button",class:x(["pl-2",o($e)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"Next page",disabled:!o($e),onClick:e[5]||(e[5]=e=>Fe(o(B)))},su,10,lu)):$("",!0),g("pagingNav")?(a(),u("button",{key:4,type:"button",class:x(["pl-2",o(Ae)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"Last page",disabled:!o(Ae),onClick:e[6]||(e[6]=e=>Fe(o(N)))},iu,10,ou)):$("",!0)]),g("pagingInfo")?(a(),u("div",ru,[s("div",uu,[D.value?(a(),u("span",du,"Querying...")):$("",!0),o(E).length?(a(),u("span",cu,[fu,ye(" "+M(O.value+1)+" - "+M(Math.min(O.value+o(E).length,o(N)))+" ",1),s("span",null," of "+M(o(N)),1)])):C.value.completed?(a(),u("span",mu,"No Results")):$("",!0)])])):$("",!0),s("div",vu,[g("refresh")?(a(),u("div",hu,[s("button",{type:"button",onClick:Re,title:"Refresh",class:x(o(h))},pu,2)])):$("",!0),g("downloadCsv")?(a(),u("div",yu,[s("button",{type:"button",onClick:Ge,title:"Download CSV",class:x(o(h))},wu,2)])):$("",!0),g("copyApiUrl")?(a(),u("div",xu,[s("button",{type:"button",onClick:Ue,title:"Copy API URL",class:x(o(h))},[I.value?(a(),u("svg",ku,Cu)):(a(),u("svg",_u,Vu)),Mu],2)])):$("",!0),o(ke)&&g("resetPreferences")?(a(),u("div",Su,[s("button",{type:"button",onClick:Xe,title:"Reset Preferences & Filters",class:x(o(h))},Fu,2)])):$("",!0),g("filtersView")&&0<o(Ce)?(a(),u("div",Tu,[s("button",{type:"button",onClick:e[7]||(e[7]=e=>L.value="filters"==L.value?null:"filters"),class:x(o(h)),"aria-expanded":"false"},[Iu,s("span",Du,M(o(Ce))+" "+M(1==o(Ce)?"Filter":"Filters"),1),"filters"!=L.value?(a(),u("svg",Pu,Ou)):(a(),u("svg",Bu,Ru))],2)])):$("",!0),g("newItem")&&o(U).Create&&o(pt)?(a(),u("div",Nu,[s("button",{type:"button",onClick:Ke,title:o(z),class:x(o(h))},[zu,s("span",Uu,"New "+M(o(z)),1)],10,Hu)])):$("",!0),o(b).toolbarbuttons?G(l.$slots,"toolbarbuttons",{key:6,toolbarButtonClass:o(h)}):$("",!0)])])])):$("",!0),"filters"==L.value?(a(),Y(xn,{key:4,class:"border-y border-gray-200 dark:border-gray-800 py-8 my-2",definitions:o(it),columns:k.value,onDone:e[8]||(e[8]=e=>L.value=null),onChange:Ee},null,8,["definitions","columns"])):$("",!0),we.value.error??C.value.error?(a(),Y(d,{key:5,status:we.value.error??C.value.error},null,8,["status"])):D.value?(a(),Y(c,{key:6,class:"p-2"})):$("",!0),F.value?(a(),u("div",qu,[ge(wn,{definitions:o(it),column:F.value.column,"top-left":F.value.topLeft,onDone:De,onSave:Be},null,8,["definitions","column","top-left"])])):$("",!0),o(E).length?(a(),Y(v,{key:8,id:p.id,items:o(E),type:p.type,"selected-columns":o(xe),class:"mt-1",onFiltersChanged:R,tableStyle:o(y),gridClass:o(se),grid2Class:o(ne),grid3Class:o(oe),grid4Class:o(re),tableClass:o(ie),theadClass:o(de),theadRowClass:o(ce),theadCellClass:o(ve),tbodyClass:p.tbodyClass,rowClass:pe,onRowSelected:Ie,rowStyle:p.rowStyle,headerTitle:p.headerTitle,headerTitles:p.headerTitles,visibleFrom:p.visibleFrom,onHeaderSelected:_e},Jl({header:he(({column:t,label:e})=>{var l;return[m("filtering")&&Te(t)?(a(),u("div",Qu,[s("span",Ku,M(e),1),ge(f,{column:k.value.find(e=>e.name.toLowerCase()===t.toLowerCase()),"is-open":(null==(l=F.value)?void 0:l.column.name)===t},null,8,["column","is-open"])])):(a(),u("div",Gu,[s("span",Wu,M(e),1)]))]}),_:2},[Me(Object.keys(o(b)),t=>({name:t,fn:he(e=>[G(l.$slots,t,St(cl(e)))])}))]),1032,["id","items","type","selected-columns","tableStyle","gridClass","grid2Class","grid3Class","grid4Class","tableClass","theadClass","theadRowClass","theadCellClass","tbodyClass","rowStyle","headerTitle","headerTitles","visibleFrom"])):$("",!0)]))}}}),Ju={class:"flex"},Xu={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Yu=s("g",{fill:"none"},[s("path",{d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586V4z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),ed=[Yu],td=s("path",{d:"M505.5 658.7c3.2 4.4 9.7 4.4 12.9 0l178-246c3.8-5.3 0-12.7-6.5-12.7H643c-10.2 0-19.9 4.9-25.9 13.2L512 558.6L406.8 413.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246z",fill:"currentColor"},null,-1),ld=s("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:"currentColor"},null,-1),nd=[td,ld],sd={key:2,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},od=s("g",{fill:"none"},[s("path",{d:"M8.998 4.71L6.354 7.354a.5.5 0 1 1-.708-.707L9.115 3.18A.499.499 0 0 1 9.498 3H9.5a.5.5 0 0 1 .354.147l.01.01l3.49 3.49a.5.5 0 1 1-.707.707l-2.65-2.649V16.5a.5.5 0 0 1-1 0V4.71z",fill:"currentColor"})],-1),ad=[od],id={key:3,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},rd=s("g",{fill:"none"},[s("path",{d:"M10.002 15.29l2.645-2.644a.5.5 0 0 1 .707.707L9.886 16.82a.5.5 0 0 1-.384.179h-.001a.5.5 0 0 1-.354-.147l-.01-.01l-3.49-3.49a.5.5 0 1 1 .707-.707l2.648 2.649V3.5a.5.5 0 0 1 1 0v11.79z",fill:"currentColor"})],-1),ud=[rd],dd=se({__name:"SettingsIcons",props:{column:null,isOpen:{type:Boolean}},setup(s){return(e,t)=>{var l;return a(),u("div",Ju,[null!=(l=null==(l=null==(l=s.column)?void 0:l.settings)?void 0:l.filters)&&l.length?(a(),u("svg",Xu,ed)):(a(),u("svg",{key:1,class:x(["w-4 h-4 transition-transform",s.isOpen?"rotate-180":""]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},nd,2)),"ASC"===(null==(l=null==(l=s.column)?void 0:l.settings)?void 0:l.sort)?(a(),u("svg",sd,ad)):"DESC"===(null==(l=null==(l=s.column)?void 0:l.settings)?void 0:l.sort)?(a(),u("svg",id,ud)):$("",!0)])}}}),cd=se({__name:"EnsureAccessDialog",props:{title:null,subtitle:null,invalidAccess:null,alertClass:null},emits:["done"],setup(n){return(t,e)=>{const l=q("EnsureAccess"),s=q("SlideOver");return n.invalidAccess?(a(),Y(s,{key:0,title:n.title,onDone:e[0]||(e[0]=e=>t.$emit("done")),"content-class":"relative flex-1"},Jl({default:he(()=>[ge(l,{alertClass:n.alertClass,invalidAccess:n.invalidAccess},null,8,["alertClass","invalidAccess"])]),_:2},[n.subtitle?{name:"subtitle",fn:he(()=>[ye(M(n.subtitle),1)]),key:"0"}:void 0]),1032,["title"])):$("",!0)}}}),fd=["for"],md={class:"mt-1 relative rounded-md shadow-sm"},vd=["type","name","id","placeholder","value","aria-invalid","aria-describedby"],hd={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},gd=s("svg",{class:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),pd=[gd],yd=["id"],bd=["id"],wd={inheritAttrs:!1},xd=se({...wd,__name:"TextInput",props:{status:null,id:null,type:null,inputClass:null,label:null,labelClass:null,help:null,placeholder:null,modelValue:null},setup(l,{expose:e}){const t=l,n=(e({focus:function(){var e;null!=(e=n.value)&&e.focus()}}),S());const r=f(()=>t.type||"text"),i=f(()=>t.label??Oe(nt(t.id))),d=f(()=>t.placeholder??i.value);let c=Ne("ApiState",void 0);const v=f(()=>vt.call({responseStatus:t.status??(null==c?void 0:c.error.value)},t.id)),p=f(()=>[ft.base,v.value?ft.invalid:ft.valid,t.inputClass]);return(t,e)=>(a(),u("div",{class:x([t.$attrs.class])},[G(t.$slots,"header",_e({inputElement:n.value,id:l.id,modelValue:l.modelValue,status:l.status},t.$attrs)),o(i)?(a(),u("label",{key:0,for:l.id,class:x("block text-sm font-medium text-gray-700 dark:text-gray-300 "+(l.labelClass??""))},M(o(i)),11,fd)):$("",!0),s("div",md,[s("input",_e({ref_key:"inputElement",ref:n,type:o(r),name:l.id,id:l.id,class:o(p),placeholder:o(d),value:l.modelValue,onInput:e[0]||(e[0]=e=>t.$emit("update:modelValue",e.target.value)),"aria-invalid":null!=o(v),"aria-describedby":l.id+"-error",step:"any"},o(it)(t.$attrs,["class"])),null,16,vd),o(v)?(a(),u("div",hd,pd)):$("",!0)]),o(v)?(a(),u("p",{key:1,class:"mt-2 text-sm text-red-500",id:l.id+"-error"},M(o(v)),9,yd)):l.help?(a(),u("p",{key:2,class:"mt-2 text-sm text-gray-500",id:l.id+"-description"},M(l.help),9,bd)):$("",!0),G(t.$slots,"footer",_e({inputElement:n.value,id:l.id,modelValue:l.modelValue,status:l.status},t.$attrs))],2))}}),kd=["for"],$d={class:"mt-1 relative rounded-md shadow-sm"},Cd=["name","id","placeholder","aria-invalid","aria-describedby"],_d=["id"],Ld=["id"],Vd={inheritAttrs:!1},Md=se({...Vd,__name:"TextareaInput",props:{status:null,id:null,inputClass:null,label:null,labelClass:null,help:null,placeholder:null,modelValue:null},setup(l){const e=l,n=f(()=>e.label??Oe(nt(e.id))),r=f(()=>e.placeholder??n.value);let t=Ne("ApiState",void 0);const i=f(()=>vt.call({responseStatus:e.status??(null==t?void 0:t.error.value)},e.id)),d=f(()=>["shadow-sm "+ft.base,i.value?"text-red-900 focus:ring-red-500 focus:border-red-500 border-red-300":"text-gray-900 "+ft.valid,e.inputClass]);return(t,e)=>(a(),u("div",{class:x([t.$attrs.class])},[o(n)?(a(),u("label",{key:0,for:l.id,class:x("block text-sm font-medium text-gray-700 dark:text-gray-300 "+(l.labelClass??""))},M(o(n)),11,kd)):$("",!0),s("div",$d,[s("textarea",_e({name:l.id,id:l.id,class:o(d),placeholder:o(r),onInput:e[0]||(e[0]=e=>t.$emit("update:modelValue",e.target.value)),"aria-invalid":null!=o(i),"aria-describedby":l.id+"-error"},o(it)(t.$attrs,["class"])),M(l.modelValue),17,Cd)]),o(i)?(a(),u("p",{key:1,class:"mt-2 text-sm text-red-500",id:l.id+"-error"},M(o(i)),9,_d)):l.help?(a(),u("p",{key:2,class:"mt-2 text-sm text-gray-500",id:l.id+"-description"},M(l.help),9,Ld)):$("",!0)],2))}}),Sd=["for"],Ad=["id","name","value","aria-invalid","aria-describedby"],Fd=["value"],Td=["id"],Id={inheritAttrs:!1},Dd=se({...Id,__name:"SelectInput",props:{status:null,id:null,modelValue:null,inputClass:null,label:null,labelClass:null,options:null,values:null,entries:null},setup(l){const t=l,n=f(()=>t.label??Oe(nt(t.id)));let e=Ne("ApiState",void 0);const r=f(()=>vt.call({responseStatus:t.status??(null==e?void 0:e.error.value)},t.id)),i=f(()=>t.entries||(t.values?t.values.map(e=>({key:e,value:e})):t.options?Object.keys(t.options).map(e=>({key:e,value:t.options[e]})):[]));return(t,e)=>(a(),u("div",{class:x([t.$attrs.class])},[o(n)?(a(),u("label",{key:0,for:l.id,class:x("block text-sm font-medium text-gray-700 dark:text-gray-300 "+(l.labelClass??""))},M(o(n)),11,Sd)):$("",!0),s("select",_e({id:l.id,name:l.id,class:["mt-1 block w-full pl-3 pr-10 py-2 text-base focus:outline-none sm:text-sm rounded-md dark:text-white dark:bg-gray-900 dark:border-gray-600",o(r)?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":"border-gray-300 text-gray-900 focus:ring-indigo-500 focus:border-indigo-500",l.inputClass],value:l.modelValue,onInput:e[0]||(e[0]=e=>t.$emit("update:modelValue",e.target.value)),"aria-invalid":null!=o(r),"aria-describedby":l.id+"-error"},o(it)(t.$attrs,["class"])),[(a(!0),u(ke,null,Me(o(i),e=>(a(),u("option",{value:e.key},M(e.value),9,Fd))),256))],16,Ad),o(r)?(a(),u("p",{key:1,class:"mt-2 text-sm text-red-500",id:l.id+"-error"},M(o(r)),9,Td)):$("",!0)],2))}}),Pd={class:"flex items-center h-5"},jd=["id","name","checked"],Od={class:"ml-3 text-sm"},Bd=["for"],Ed={key:0,class:"mt-2 text-sm text-red-500",id:"`${id}-error`"},Rd={key:1,class:"mt-2 text-sm text-gray-500",id:"`${id}-description`"},Nd={inheritAttrs:!1},Hd=se({...Nd,__name:"CheckboxInput",props:{modelValue:{type:Boolean},status:null,id:null,inputClass:null,label:null,labelClass:null,help:null},emits:["update:modelValue"],setup(l,{}){const e=l,n=f(()=>e.label??Oe(nt(e.id)));let t=Ne("ApiState",void 0);const r=f(()=>vt.call({responseStatus:e.status??(null==t?void 0:t.error.value)},e.id));return(t,e)=>(a(),u("div",{class:x(["relative flex items-start",t.$attrs.class])},[s("div",Pd,[s("input",_e({id:l.id,name:l.id,type:"checkbox",checked:l.modelValue,onInput:e[0]||(e[0]=e=>t.$emit("update:modelValue",e.target.checked)),class:["focus:ring-indigo-500 h-4 w-4 text-indigo-600 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-800",l.inputClass]},o(it)(t.$attrs,["class"])),null,16,jd)]),s("div",Od,[s("label",{for:l.id,class:x("font-medium text-gray-700 dark:text-gray-300 "+(l.labelClass??""))},M(o(n)),11,Bd),o(r)?(a(),u("p",Ed,M(o(r)),1)):l.help?(a(),u("p",Rd,M(l.help),1)):$("",!0)])],2))}}),zd=["id"],Ud=["for"],qd={class:"mt-1 relative rounded-md shadow-sm"},Qd=["id","name","value"],Kd=["onClick"],Gd={class:"flex flex-wrap pb-1.5"},Wd={class:"pt-1.5 pl-1"},Zd={class:"inline-flex rounded-full items-center py-0.5 pl-2.5 pr-1 text-sm font-medium bg-indigo-100 dark:bg-indigo-800 text-indigo-700 dark:text-indigo-300"},Jd=["onClick"],Xd=s("svg",{class:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8"},[s("path",{"stroke-linecap":"round","stroke-width":"1.5",d:"M1 1l6 6m0-6L1 7"})],-1),Yd=[Xd],ec={class:"pt-1.5 pl-1 shrink"},tc=["type","name","id","aria-invalid","aria-describedby","onPaste"],lc=["id"],nc=["onMouseover","onClick"],sc={class:"block truncate"},oc={key:1,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},ac=s("svg",{class:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),ic=[ac],rc=["id"],uc=["id"],dc={inheritAttrs:!1},cc=se({...dc,__name:"TagInput",props:{status:null,id:null,type:null,inputClass:null,label:null,labelClass:null,help:null,modelValue:{default:()=>[]},delimiters:{default:()=>[","]},allowableValues:null,string:{type:Boolean},converter:null},emits:["update:modelValue"],setup(l,{emit:t}){const n=l;const r=f(()=>{return Ee((e=n.modelValue,n.converter?n.converter(e):e),e=>"string"==typeof e?0==e.trim().length?[]:e.split(","):e)||[];var e}),i=S(),d=S(!1),c=f(()=>n.allowableValues&&0!=n.allowableValues.length?n.allowableValues.filter(e=>!r.value.includes(e)&&e.toLowerCase().includes(p.value.toLowerCase())):[]);const v=S(null),p=S(""),m=f(()=>n.type||"text"),g=f(()=>n.label??Oe(nt(n.id)));let e=Ne("ApiState",void 0);const y=f(()=>vt.call({responseStatus:n.status??(null==e?void 0:e.error.value)},n.id)),h=f(()=>["w-full cursor-text flex flex-wrap sm:text-sm rounded-md dark:text-white dark:bg-gray-900 border focus-within:border-transparent focus-within:ring-1 focus-within:outline-none",y.value?"pr-10 border-red-300 text-red-900 placeholder-red-300 focus-within:outline-none focus-within:ring-red-500 focus-within:border-red-500":"shadow-sm border-gray-300 dark:border-gray-600 focus-within:ring-indigo-500 focus-within:border-indigo-500",n.inputClass]),b=t=>V(r.value.filter(e=>e!=t));function w(e){document.activeElement===e.target&&null!=(e=v.value)&&e.focus()}const k=S();function C(){d.value=!0,k.value=!0}function L(){_(j()),k.value=!1,setTimeout(()=>{k.value||(d.value=!1)},200)}function V(e){e=n.string?e.join(","):e;t("update:modelValue",e)}function A(e){var t;"Backspace"==e.key&&0==p.value.length&&0<r.value.length&&b(r.value[r.value.length-1]),n.allowableValues&&0!=n.allowableValues.length&&("Escape"==e.code||"Tab"==e.code?d.value=!1:"Home"==e.code?(i.value=c.value[0],O()):"End"==e.code?(i.value=c.value[c.value.length-1],O()):"ArrowDown"==e.code?(d.value=!0,i.value?(t=c.value.indexOf(i.value),i.value=t+1<c.value.length?c.value[t+1]:c.value[0]):i.value=c.value[0],I()):"ArrowUp"==e.code?(i.value?(t=c.value.indexOf(i.value),i.value=0<=t-1?c.value[t-1]:c.value[c.value.length-1]):i.value=c.value[c.value.length-1],I()):"Enter"==e.code?i.value&&d.value?(_(i.value),e.preventDefault()):d.value=!1:d.value=0<c.value.length)}function j(){if(0==p.value.length)return"";let e=ho(p.value.trim(),",");return 0==(e=(e=","==e[0]?e.substring(1):e).trim()).length&&d.value&&0<c.value.length?i.value:e}function T(t){var e,l=j();0<l.length&&((e=n.delimiters.some(e=>e==t.key))&&t.preventDefault(),"Enter"==t.key||"NumpadEnter"==t.key||1==t.key.length&&e)&&_(l)}const F={behavior:"smooth",block:"nearest",inline:"nearest",scrollMode:"if-needed"};function O(){setTimeout(()=>{var e=fl(`#${n.id}-tag li.active`);e&&e.scrollIntoView(F)},0)}function I(){setTimeout(()=>{var e=fl(`#${n.id}-tag li.active`);e&&("scrollIntoViewIfNeeded"in e?e.scrollIntoViewIfNeeded(F):e.scrollIntoView(F))},0)}function _(e){var t;0!==e.length&&(-1==(t=Array.from(r.value)).indexOf(e)&&t.push(e),V(t),p.value="",d.value=!1)}function D(e){e=null==(e=e.clipboardData)?void 0:e.getData("Text");if(e){const t=new RegExp("\\n|\\t|"+n.delimiters.join("|")),l=Array.from(r.value);e.split(t).map(e=>e.trim()).forEach(e=>{-1==l.indexOf(e)&&l.push(e)}),V(l),p.value=""}}return(e,t)=>(a(),u("div",{class:x([e.$attrs.class]),id:l.id+"-tag",onmousemove:"cancelBlur=true"},[o(g)?(a(),u("label",{key:0,for:l.id,class:x("block text-sm font-medium text-gray-700 dark:text-gray-300 "+(l.labelClass??""))},M(o(g)),11,Ud)):$("",!0),s("div",qd,[s("input",{type:"hidden",id:l.id,name:l.id,value:o(r).join(",")},null,8,Qd),s("button",{class:x(o(h)),onClick:He(w,["prevent"]),onFocus:t[2]||(t[2]=e=>d.value=!0),tabindex:"-1"},[s("div",Gd,[(a(!0),u(ke,null,Me(o(r),t=>(a(),u("div",Wd,[s("span",Zd,[ye(M(t)+" ",1),s("button",{type:"button",onClick:e=>b(t),class:"flex-shrink-0 ml-1 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 dark:text-indigo-500 hover:bg-indigo-200 dark:hover:bg-indigo-800 hover:text-indigo-500 dark:hover:text-indigo-400 focus:outline-none focus:bg-indigo-500 focus:text-white dark:focus:text-black"},Yd,8,Jd)])]))),256)),s("div",ec,[xt(s("input",_e({ref_key:"txtInput",ref:v,type:o(m),role:"combobox","aria-controls":"options","aria-expanded":"false",autocomplete:"off",spellcheck:"false",name:l.id+"-txt",id:l.id+"-txt",class:"p-0 dark:bg-transparent rounded-md border-none focus:!border-none focus:!outline-none",style:`box-shadow:none !important;width:${p.value.length+1}ch`,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),"aria-invalid":null!=o(y),"aria-describedby":l.id+"-error",onKeydown:A,onKeypress:T,onPaste:He(D,["prevent","stop"]),onFocus:C,onBlur:L,onClick:t[1]||(t[1]=e=>d.value=!0)},o(it)(e.$attrs,["class","required"])),null,16,tc),[[Ys,p.value]])])])],42,Kd),d.value&&o(c).length?(a(),u("ul",{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-black py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",onKeydown:A,id:l.id+"-options",role:"listbox"},[(a(!0),u(ke,null,Me(o(c),l=>(a(),u("li",{class:x([l===i.value?"active bg-indigo-600 text-white":"text-gray-900 dark:text-gray-100","relative cursor-default select-none py-2 pl-3 pr-9"]),onMouseover:e=>{var t;t=l,i.value=t},onClick:e=>_(l),role:"option",tabindex:"-1"},[s("span",sc,M(l),1)],42,nc))),256))],40,lc)):$("",!0),o(y)?(a(),u("div",oc,ic)):$("",!0)]),o(y)?(a(),u("p",{key:1,class:"mt-2 text-sm text-red-500",id:l.id+"-error"},M(o(y)),9,rc)):l.help?(a(),u("p",{key:2,class:"mt-2 text-sm text-gray-500",id:l.id+"-description"},M(l.help),9,uc)):$("",!0)],10,zd))}}),fc={class:"relative flex-grow mr-2 sm:mr-4"},mc=["for"],vc={class:"block mt-2"},hc={class:"sr-only"},gc=["multiple","name","id","placeholder","aria-invalid","aria-describedby"],pc={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},yc=s("svg",{class:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),bc=[yc],wc=["id"],xc=["id"],kc={key:0},$c=["title"],Cc=["alt","src"],_c={key:1,class:"mt-3"},Lc={class:"w-full"},Vc={class:"pr-6 align-bottom pb-2"},Mc=["title"],Sc=["src","onError"],Ac=["href"],Fc={key:1,class:"overflow-hidden"},Tc={class:"align-top pb-2 whitespace-nowrap"},Ic={key:0,class:"text-gray-500 dark:text-gray-400 text-sm bg-white dark:bg-black"},Dc=se({__name:"FileInput",props:{multiple:{type:Boolean},status:null,id:null,inputClass:null,label:null,labelClass:null,help:null,placeholder:null,modelValue:null,values:null,files:null},setup(l){var e;const t=l,n=S(null),{assetsPathResolver:r,fallbackPathResolver:i}=_t(),d={},c=S(),v=S((null==(e=t.files)?void 0:e.map(p))||[]);function p(e){return e.filePath=r(e.filePath),e}t.values&&0<t.values.length&&(v.value=t.values.map(e=>{e=e.replace(/\\/g,"/");return{fileName:go(kt(e,"/"),"."),filePath:e,contentType:zl(e)}}).map(p));const m=f(()=>t.label??Oe(nt(t.id))),g=f(()=>t.placeholder??m.value);let y=Ne("ApiState",void 0);const h=f(()=>vt.call({responseStatus:t.status??(null==y?void 0:y.error.value)},t.id)),b=f(()=>["block w-full sm:text-sm rounded-md dark:text-white dark:bg-gray-900 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 dark:file:bg-violet-900 file:text-violet-700 dark:file:text-violet-200 hover:file:bg-violet-100 dark:hover:file:bg-violet-800",h.value?"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"text-slate-500 dark:text-slate-400",t.inputClass]),w=e=>{e=e.target;c.value="",v.value=Array.from(e.files||[]).map(e=>({fileName:e.name,filePath:sn(e),contentLength:e.size,contentType:e.type||zl(e.name)}))},k=()=>{var e;return null==(e=n.value)?void 0:e.click()},C=e=>null!=e&&(e.startsWith("data:")||e.startsWith("blob:")),L=f(()=>{var e;return 0<v.value.length?v.value[0].filePath:(e="string"==typeof t.modelValue?t.modelValue:t.values&&t.values[0])&&pt(r(e))||null}),V=e=>!e||e.startsWith("data:")||e.endsWith(".svg")?"":"rounded-full object-cover";function A(e){c.value=i(L.value)}return Gt(ns),(e,t)=>(a(),u("div",{class:x(["flex",l.multiple?"flex-col":"justify-between"])},[s("div",fc,[o(m)?(a(),u("label",{key:0,for:l.id,class:x("block text-sm font-medium text-gray-700 dark:text-gray-300 "+(l.labelClass??""))},M(o(m)),11,mc)):$("",!0),s("div",vc,[s("span",hc,M(l.help??o(m)),1),s("input",_e({ref_key:"input",ref:n,type:"file",multiple:l.multiple,name:l.id,id:l.id,class:o(b),placeholder:o(g),"aria-invalid":null!=o(h),"aria-describedby":l.id+"-error"},e.$attrs,{onChange:w}),null,16,gc),o(h)?(a(),u("div",pc,bc)):$("",!0)]),o(h)?(a(),u("p",{key:1,class:"mt-2 text-sm text-red-500",id:l.id+"-error"},M(o(h)),9,wc)):l.help?(a(),u("p",{key:2,class:"mt-2 text-sm text-gray-500",id:l.id+"-description"},M(l.help),9,xc)):$("",!0)]),l.multiple?(a(),u("div",_c,[s("table",Lc,[(a(!0),u(ke,null,Me(v.value,t=>(a(),u("tr",null,[s("td",Vc,[s("div",{class:"flex w-full",title:C(t.filePath)?"":t.filePath},[s("img",{src:d[o(pt)(t.filePath)]||o(r)(o(pt)(t.filePath)),class:x(["mr-2 h-8 w-8",V(t.filePath)]),onError:e=>d[o(pt)(t.filePath)]=o(i)(o(pt)(t.filePath))},null,42,Sc),C(t.filePath)?(a(),u("span",Fc,M(t.fileName),1)):(a(),u("a",{key:0,href:o(r)(t.filePath||""),target:"_blank",class:"overflow-hidden"},M(t.fileName),9,Ac))],8,Mc)]),s("td",Tc,[t.contentLength&&0<t.contentLength?(a(),u("span",Ic,M(o(an)(t.contentLength)),1)):$("",!0)])]))),256))])])):(a(),u("div",kc,[o(L)?(a(),u("div",{key:0,class:"shrink-0 cursor-pointer",title:C(o(L))?"":o(L)},[s("img",{onClick:k,class:x(["h-16 w-16",V(o(L))]),alt:"Current "+(o(m)??""),src:c.value||o(r)(o(L)),onError:A},null,42,Cc)],8,$c)):$("",!0)]))],2))}}),Pc=["id"],jc=["for"],Oc={class:"relative mt-1"},Bc=["id","placeholder"],Ec=s("svg",{class:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})],-1),Rc=[Ec],Nc=["id"],Hc=["onMouseover","onClick"],zc=s("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z","clip-rule":"evenodd"})],-1),Uc=[zc],qc={key:2,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",tabindex:"-1"},Qc=s("svg",{class:"h-5 w-5 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),Kc=[Qc],Gc=["id"],Wc=["id"],Zc=se({__name:"Autocomplete",props:{status:null,id:null,type:null,label:null,help:null,placeholder:null,multiple:{type:Boolean,default:!1},required:{type:Boolean},options:{default:()=>[]},modelValue:null,match:null,viewCount:{default:100},pageSize:{default:8}},emits:["update:modelValue"],setup(l,{expose:e,emit:n}){const r=l,i=S(!1);function d(e){return Array.isArray(r.modelValue)&&0<=r.modelValue.indexOf(e)}e({toggle:O});const c=f(()=>r.label??Oe(nt(r.id)));let t=Ne("ApiState",void 0);const v=f(()=>vt.call({responseStatus:r.status??(null==t?void 0:t.error.value)},r.id)),p=f(()=>[ft.base,v.value?ft.invalid:ft.valid]),m=S(null),g=S(""),y=S(null),h=S(r.viewCount),b=S([]),w=f(()=>g.value?r.options.filter(e=>r.match(e,g.value)).slice(0,h.value):r.options),k=["Tab","Escape","ArrowDown","ArrowUp","Enter","PageUp","PageDown","Home","End"];const C=[",",`
`,"\t"];function L(t){var l=null==(t=t.clipboardData)?void 0:t.getData("Text");if(l){t=C.some(e=>l.includes(e));if(r.multiple&&t){if(t){t=new RegExp("\\r|\\n|\\t|,"),t=l.split(t).filter(e=>e.trim()).map(t=>r.options.find(e=>r.match(e,t))).filter(e=>!!e);if(0<t.length){g.value="",i.value=!1,y.value=null;let e=Array.from(r.modelValue||[]);t.forEach(t=>{d(t)?e=e.filter(e=>e!=t):e.push(t)}),n("update:modelValue",e),il()}}}else{t=r.options.filter(e=>r.match(e,l));1==t.length&&(_(t[0]),i.value=!1,il())}}}function V(e){k.indexOf(e.code)||I()}function A(e){var t;e.shiftKey||e.ctrlKey||e.altKey||(i.value?"Escape"==e.code?i.value&&(e.stopPropagation(),i.value=!1):"Tab"==e.code?i.value=!1:"Home"==e.code?(y.value=b.value[0],T()):"End"==e.code?(y.value=b.value[b.value.length-1],T()):"ArrowDown"==e.code?(y.value?(t=b.value.indexOf(y.value),y.value=t+1<b.value.length?b.value[t+1]:b.value[0]):y.value=b.value[0],F()):"ArrowUp"==e.code?(y.value?(t=b.value.indexOf(y.value),y.value=0<=t-1?b.value[t-1]:b.value[b.value.length-1]):y.value=b.value[b.value.length-1],F()):"Enter"==e.code&&(y.value?(_(y.value),r.multiple||(e.preventDefault(),il())):i.value=!1):"ArrowDown"==e.code&&(i.value=!0,y.value=b.value[0]))}const j={behavior:"smooth",block:"nearest",inline:"nearest",scrollMode:"if-needed"};function T(){setTimeout(()=>{var e=fl(`#${r.id}-autocomplete li.active`);e&&e.scrollIntoView(j)},0)}function F(){setTimeout(()=>{var e=fl(`#${r.id}-autocomplete li.active`);e&&("scrollIntoViewIfNeeded"in e?e.scrollIntoViewIfNeeded(j):e.scrollIntoView(j))},0)}function O(e){(i.value=e)&&(I(),null!=(e=m.value))&&e.focus()}function I(){i.value=!0,D()}function _(t){if(g.value="",i.value=!1,r.multiple){let e=Array.from(r.modelValue||[]);d(t)?e=e.filter(e=>e!=t):e.push(t),y.value=null,n("update:modelValue",e)}else{let e=t;r.modelValue==t&&(e=null),n("update:modelValue",e)}}function D(){b.value=w.value}return Dt(g,D),(e,t)=>(a(),u("div",{id:l.id+"-autocomplete"},[o(c)?(a(),u("label",{key:0,for:l.id+"-text",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},M(o(c)),9,jc)):$("",!0),s("div",Oc,[xt(s("input",_e({ref_key:"txtInput",ref:m,id:l.id+"-text",type:"text",role:"combobox","aria-controls":"options","aria-expanded":"false",autocomplete:"off",spellcheck:"false","onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),class:o(p),placeholder:l.multiple||!l.modelValue?l.placeholder:"",onFocus:I,onKeydown:A,onKeyup:V,onClick:I,onPaste:L,required:!1},e.$attrs),null,16,Bc),[[eo,g.value]]),s("button",{type:"button",onClick:t[1]||(t[1]=e=>O(!i.value)),class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none",tabindex:"-1"},Rc),i.value?(a(),u("ul",{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-black py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",onKeydown:A,id:l.id+"-options",role:"listbox"},[(a(!0),u(ke,null,Me(b.value,l=>(a(),u("li",{class:x([l===y.value?"active bg-indigo-600 text-white":"text-gray-900 dark:text-gray-100","relative cursor-default select-none py-2 pl-3 pr-9"]),onMouseover:e=>{return t=l,y.value=t,void(b.value.indexOf(t)>Math.floor(.9*h.value)&&(h.value+=r.viewCount,D()));var t},onClick:e=>_(l),role:"option",tabindex:"-1"},[G(e.$slots,"item",St(cl(l))),d(l)?(a(),u("span",{key:0,class:x(["absolute inset-y-0 right-0 flex items-center pr-4",l===y.value?"text-white":"text-indigo-600"])},Uc,2)):$("",!0)],42,Hc))),256))],40,Nc)):!l.multiple&&l.modelValue?(a(),u("div",{key:1,onKeydown:A,onClick:t[2]||(t[2]=e=>O(!i.value)),class:"h-8 -mt-8 ml-3 pt-0.5"},[G(e.$slots,"item",St(cl(l.modelValue)))],32)):$("",!0),o(v)?(a(),u("div",qc,Kc)):$("",!0)]),o(v)?(a(),u("p",{key:1,class:"mt-2 text-sm text-red-500",id:l.id+"-error"},M(o(v)),9,Gc)):l.help?(a(),u("p",{key:2,class:"mt-2 text-sm text-gray-500",id:l.id+"-description"},M(l.help),9,Wc)):$("",!0)],8,Pc))}}),Jc=["id","name","value"],Xc={class:"block truncate"},Yc=se({__name:"Combobox",props:{id:null,modelValue:null,multiple:{type:Boolean},options:null,values:null,entries:null},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const l=n;function r(e){t("update:modelValue",e)}e({toggle(e){var t;null!=(t=d.value)&&t.toggle(e)}});const i=f(()=>null!=l.multiple?l.multiple:Array.isArray(l.modelValue)),d=S();function c(e,t){return!t||e.value.toLowerCase().includes(t.toLowerCase())}const v=f(()=>l.entries||(l.values?l.values.map(e=>({key:e,value:e})):l.options?Object.keys(l.options).map(e=>({key:e,value:l.options[e]})):[])),p=S(i.value?[]:null),m=(at(()=>{null==l.modelValue||""===l.modelValue?p.value=i.value?[]:null:"string"==typeof l.modelValue?p.value=v.value.find(e=>e.key===l.modelValue)||null:Array.isArray(l.modelValue)&&(p.value=v.value.filter(e=>l.modelValue.includes(e.key)))}),f(()=>null==p.value?"":Array.isArray(p.value)?p.value.map(e=>encodeURIComponent(e.key)).join(","):p.value.key));return(e,t)=>{var l=q("Autocomplete");return a(),u(ke,null,[s("input",{type:"hidden",id:n.id,name:n.id,value:o(m)},null,8,Jc),ge(l,_e({ref_key:"input",ref:d,id:n.id,options:o(v),match:c,multiple:o(i)},e.$attrs,{modelValue:p.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>p.value=e),r]}),{item:he(({value:e})=>[s("span",Xc,M(e),1)]),_:1},16,["id","options","multiple","modelValue"])],64)}}}),e0=se({__name:"DynamicInput",props:{input:null,modelValue:null,api:null},emits:["update:modelValue"],setup(v,{emit:e}){const l=v,p=f(()=>l.input.type||"text"),t="ignore,css,options,meta,allowableValues,allowableEntries,op,prop,type,id,name".split(","),m=f(()=>it(l.input,t)),g=S(Ee(l.modelValue[l.input.id],e=>"file"===l.input.type?null:"date"===l.input.type&&e instanceof Date?bl(e):"time"===l.input.type?Gn(e):e)),y=(Dt(g,()=>{l.modelValue[l.input.id]=g.value,e("update:modelValue",l.modelValue)}),f(()=>{var e=l.modelValue[l.input.id];if("file"!==l.input.type||!e)return[];if("string"==typeof e)return[{filePath:e,fileName:kt(e,"/")}];if(!Array.isArray(e)&&"object"==typeof e)return e;if(Array.isArray(e)){const t=[];return e.forEach(e=>{"string"==typeof e?t.push({filePath:e,fileName:kt(e,"/")}):"object"==typeof e&&t.push(e)}),t}}));return(e,t)=>{var l,s=q("SelectInput"),n=q("CheckboxInput"),r=q("TagInput"),i=q("Combobox"),u=q("FileInput"),d=q("TextareaInput"),c=q("TextInput");return o(X).component(o(p))?(a(),Y(zn(o(X).component(o(p))),_e({key:0,id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),status:null==(l=v.api)?void 0:l.error,"input-class":null==(l=v.input.css)?void 0:l.input,"label-class":null==(l=v.input.css)?void 0:l.label},o(m)),null,16,["id","modelValue","status","input-class","label-class"])):"select"==o(p)?(a(),Y(s,_e({key:1,id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),status:null==(l=v.api)?void 0:l.error,"input-class":null==(s=v.input.css)?void 0:s.input,"label-class":null==(l=v.input.css)?void 0:l.label,entries:v.input.allowableEntries,values:v.input.allowableValues},o(m)),null,16,["id","modelValue","status","input-class","label-class","entries","values"])):"checkbox"==o(p)?(a(),Y(n,_e({key:2,id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),status:null==(s=v.api)?void 0:s.error,"input-class":null==(l=v.input.css)?void 0:l.input,"label-class":null==(n=v.input.css)?void 0:n.label},o(m)),null,16,["id","modelValue","status","input-class","label-class"])):"tag"==o(p)?(a(),Y(r,_e({key:3,id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=e=>g.value=e),status:null==(s=v.api)?void 0:s.error,"input-class":null==(l=v.input.css)?void 0:l.input,"label-class":null==(n=v.input.css)?void 0:n.label,allowableValues:v.input.allowableValues,string:"String"==(null==(r=v.input.prop)?void 0:r.type)},o(m)),null,16,["id","modelValue","status","input-class","label-class","allowableValues","string"])):"combobox"==o(p)?(a(),Y(i,_e({key:4,id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=e=>g.value=e),status:null==(s=v.api)?void 0:s.error,"input-class":null==(l=v.input.css)?void 0:l.input,"label-class":null==(n=v.input.css)?void 0:n.label,entries:v.input.allowableEntries,values:v.input.allowableValues},o(m)),null,16,["id","modelValue","status","input-class","label-class","entries","values"])):"file"==o(p)?(a(),Y(u,_e({key:5,id:v.input.id,status:null==(r=v.api)?void 0:r.error,modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=e=>g.value=e),"input-class":null==(i=v.input.css)?void 0:i.input,"label-class":null==(s=v.input.css)?void 0:s.label,files:o(y)},o(m)),null,16,["id","status","modelValue","input-class","label-class","files"])):"textarea"==o(p)?(a(),Y(d,_e({key:6,id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=e=>g.value=e),status:null==(l=v.api)?void 0:l.error,"input-class":null==(n=v.input.css)?void 0:n.input,"label-class":null==(u=v.input.css)?void 0:u.label},o(m)),null,16,["id","modelValue","status","input-class","label-class"])):(a(),Y(c,_e({key:7,type:o(p),id:v.input.id,modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=e=>g.value=e),status:null==(r=v.api)?void 0:r.error,"input-class":null==(i=v.input.css)?void 0:i.input,"label-class":null==(s=v.input.css)?void 0:s.label},o(m)),null,16,["type","id","modelValue","status","input-class","label-class"]))}}}),t0={class:"lookup-field"},l0=["name","value"],n0={key:0,class:"flex justify-between"},s0=["for"],o0={key:0,class:"flex items-center"},a0={class:"text-sm text-gray-500 dark:text-gray-400 pr-1"},i0=s("span",{class:"sr-only"},"Clear",-1),r0=s("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),u0=[i0,r0],d0={key:1,class:"mt-1 relative"},c0={class:"w-full inline-flex truncate"},f0={class:"text-blue-700 dark:text-blue-300 flex cursor-pointer"},m0=s("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[s("svg",{class:"h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1),v0=["id"],h0=["id"],g0=se({__name:"LookupInput",props:{id:null,status:null,input:null,metadataType:null,modelValue:null,label:null,labelClass:null,help:null},emits:["update:modelValue"],setup(r,{emit:i}){const d=r,t=_t()["config"],n=et()["metadataApi"],c=f(()=>d.id||d.input.id),v=f(()=>d.label??Oe(nt(c.value)));let e=Ne("ApiState",void 0);const p=Ne("client"),m=f(()=>vt.call({responseStatus:d.status??(null==e?void 0:e.error.value)},c.value)),g=S(""),y=S(""),h=f(()=>fe(d.modelValue,c.value)),b=f(()=>Ze(d.metadataType).find(e=>e.name.toLowerCase()==c.value.toLowerCase())),w=f(()=>{var e;return(null==(e=rt(null==(e=null==(e=b.value)?void 0:e.ref)?void 0:e.model))?void 0:e.icon)||t.value.tableIcon});let k;function C(){d.modelValue[c.value]=null,g.value=""}return at(async()=>{k=Ne("ModalProvider",void 0);var t,l=d.modelValue;d.modelValue[c.value]||(d.modelValue[c.value]=null);const a=b.value,s=null==a?void 0:a.ref;if(s){g.value="";let e=null==s.selfId?fe(l,a.name):fe(l,s.selfId);null==(e=Ut(e)?fe(l,s.refId):e)||null==(null==(t=n.value)?void 0:t.operations.find(e=>{return(null==(e=e.dataModel)?void 0:e.name)==s.model}))||Ut(t=fe(l,a.name))||(g.value=""+t,y.value=a.name,null!=s.refLabel&&(null==(t=Ze(d.metadataType).find(e=>e.type==s.model))&&console.warn(`Could not find ${s.model} Property on `+d.metadataType.name),null!=(l=null!=t?fe(l,t.name):null)?(t=fe(l,s.refLabel))&&(g.value=""+t,bt.setValue(s.model,e,s.refLabel,t)):(t=1==(null==(l=a.attributes)?void 0:l.some(e=>"Computed"==e.name)),l=await bt.getOrFetchValue(p,n.value,s.model,s.refId,s.refLabel,t,e),g.value=l||s.model+": "+g.value)))}else console.warn(`No RefInfo for property '${c.value}'`)}),(e,t)=>{var l,n=q("Icon");return a(),u("div",t0,[s("input",{type:"hidden",name:o(c),value:o(h)},null,8,l0),o(v)?(a(),u("div",n0,[s("label",{for:o(c),class:x("block text-sm font-medium text-gray-700 dark:text-gray-300 "+(r.labelClass??""))},M(o(v)),11,s0),o(h)?(a(),u("div",o0,[s("span",a0,M(o(h)),1),s("button",{onClick:C,type:"button",title:"clear",class:"mr-1 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:ring-offset-black"},u0)])):$("",!0)])):$("",!0),null!=(l=o(b))&&l.ref?(a(),u("div",d0,[s("button",{type:"button",class:"lookup flex relative w-full bg-white dark:bg-black border border-gray-300 dark:border-gray-700 rounded-md shadow-sm pl-3 pr-10 py-2 text-left focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onClick:t[0]||(t[0]=e=>{var l;(l=o(b).ref)&&(null==k?console.warn("No ModalProvider required by LookupInput"):k.openModal({name:"ModalLookup",ref:l},e=>{var t;console.debug("openModal",g.value," -> ",e,bt.setRefValue(l,e),l),e&&(t=fe(e,l.refId),g.value=bt.setRefValue(l,e)||t,(e=o(d.modelValue))[c.value]=t,i("update:modelValue",e))}))}),"aria-haspopup":"listbox","aria-expanded":"true","aria-labelledby":"listbox-label"},[s("span",c0,[s("span",f0,[ge(n,{class:"mr-1 w-5 h-5",image:o(w)},null,8,["image"]),s("span",null,M(g.value),1)])]),m0])])):$("",!0),o(m)?(a(),u("p",{key:2,class:"mt-2 text-sm text-red-500",id:o(c)+"-error"},M(o(m)),9,v0)):r.help?(a(),u("p",{key:3,class:"mt-2 text-sm text-gray-500",id:o(c)+"-description"},M(r.help),9,h0)):$("",!0)])}}}),p0=se({__name:"AutoFormFields",props:{modelValue:null,type:null,api:null,formLayout:null,configureField:null,configureFormLayout:null,hideSummary:{type:Boolean},flexClass:{default:"flex flex-1 flex-col justify-between"},divideClass:{default:"divide-y divide-gray-200 px-4 sm:px-6"},spaceClass:{default:"space-y-6 pt-6 pb-5"},fieldsetClass:{default:"grid grid-cols-12 gap-6"}},emits:["update:modelValue"],setup(d,{expose:e,emit:l}){const r=d;function n(){var e=We();null!=(e=null==e?void 0:e.proxy)&&e.$forceUpdate()}function c(e,t){r.modelValue[e]=t,l("update:modelValue",r.modelValue),n()}e({forceUpdate:n,props:r,updateValue:c});const{metadataApi:t,apiOf:i,typeOf:v,typeOfRef:p,createFormLayout:m}=et(),g=f(()=>r.type||Pt(r.modelValue)),y=f(()=>v(g.value)),h=f(()=>{var e;return p(null==(e=null==(e=t.value)?void 0:e.operations.find(e=>e.request.name==g.value))?void 0:e.dataModel)||y.value}),b=f(()=>{var e,t=y.value;if(!t){if(r.formLayout)return e=r.formLayout.map(e=>{var t={name:e.id,type:ca(e.type)},t=Object.assign({prop:t},e);return r.configureField&&r.configureField(t),t}),r.configureFormLayout&&r.configureFormLayout(e),e;throw new Error(`MetadataType for ${g.value} not found`)}const a=Ze(t),s=h.value,l=r.formLayout||m(t),n=[],o=i(t.name);return l.forEach(t=>{var e,l=a.find(e=>e.name==t.name);t.ignore||(e=(null==(e=null==s?void 0:s.properties)?void 0:e.find(e=>{return e.name.toLowerCase()==(null==(e=t.name)?void 0:e.toLowerCase())}))??l,l=Object.assign({prop:e,op:o},t),r.configureField&&r.configureField(l),n.push(l))}),r.configureFormLayout&&r.configureFormLayout(n),n}),w=f(()=>b.value.filter(e=>"hidden"!=e.type).map(e=>e.id));return(l,n)=>{var e;const t=q("ErrorSummary"),r=q("LookupInput"),i=q("DynamicInput");return a(),u(ke,null,[d.hideSummary?$("",!0):(a(),Y(t,{key:0,status:null==(e=d.api)?void 0:e.error,except:o(w)},null,8,["status","except"])),s("div",{class:x(d.flexClass)},[s("div",{class:x(d.divideClass)},[s("div",{class:x(d.spaceClass)},[s("fieldset",{class:x(d.fieldsetClass)},[(a(!0),u(ke,null,Me(o(b),t=>{var e;return a(),u("div",{key:t.id,class:x(["w-full",(null==(e=t.css)?void 0:e.field)??("textarea"==t.type?"col-span-12":"col-span-12 xl:col-span-6"+("checkbox"==t.type?" flex items-center":"")),"hidden"==t.type?"hidden":""])},[null==(null==(e=t.prop)?void 0:e.ref)||"file"==t.type||t.prop.isPrimaryKey?(a(),Y(i,{key:1,input:t,modelValue:d.modelValue,"onUpdate:modelValue":n[0]||(n[0]=e=>l.$emit("update:modelValue",e)),api:d.api},null,8,["input","modelValue","api"])):(a(),Y(r,{key:0,metadataType:o(h),input:t,modelValue:d.modelValue,"onUpdate:modelValue":e=>{c(t.id,fe(e,t.id))},status:null==(e=d.api)?void 0:e.error},null,8,["metadataType","input","modelValue","onUpdate:modelValue","status"]))],2)}),128))],2)],2)],2)],2)],64)}}});function Ll(){const s=S(!1),n=S(),o=S(),r=Ne("client");function i({message:e,errorCode:t,fieldName:l,errors:a}){return t=t||"Exception",a=a||[],n.value=new Il(l?{errorCode:t,message:e,errors:[new On({fieldName:l,errorCode:t,message:e})]}:{errorCode:t,message:e,errors:a})}var e={setError:i,addFieldError:function({fieldName:t,message:e,errorCode:l}){var a;l=l||"Exception",n.value?((a=new Il(n.value)).errors=[...(a.errors||[]).filter(e=>{return(null==(e=e.fieldName)?void 0:e.toLowerCase())!==(null==t?void 0:t.toLowerCase())}),new On({fieldName:t,message:e,errorCode:l})],n.value=a):i({fieldName:t,message:e,errorCode:l})},loading:s,error:n,api:async function(e,t,l){return s.value=!0,e=await r.api(Vt(e),t,l),s.value=!1,o.value=e.response,n.value=e.error,e},apiVoid:async function(e,t,l){return s.value=!0,e=await r.apiVoid(Vt(e),t,l),s.value=!1,o.value=e.response,n.value=e.error,e},apiForm:async function(e,t,l,a){return s.value=!0,e=await r.apiForm(Vt(e),t,l,a),s.value=!1,o.value=e.response,n.value=e.error,e},apiFormVoid:async function(e,t,l,a){return s.value=!0,e=await r.apiFormVoid(Vt(e),t,l,a),s.value=!1,o.value=e.response,n.value=e.error,e},swr:async function(e,t,l,a){return Xn(r,e,t,l,a)},unRefs:Vt,setRef:Wn};return Wt("ApiState",e),e}const y0=["onSubmit"],b0={key:0},w0={key:2},x0=["innerHTML"],k0=s("input",{type:"submit",class:"hidden"},null,-1),$0={class:"flex justify-end"},C0=s("div",null,null,-1),_0=se({__name:"AutoForm",props:{type:null,modelValue:null,heading:null,subHeading:null,showLoading:{type:Boolean,default:!0},jsconfig:{default:"eccn,edv"},configureField:null,bodyClass:null,formClass:{default:"shadow sm:rounded-md"},innerFormClass:null,headerClass:{default:"p-6"},buttonsClass:null,headingClass:null,subHeadingClass:null,submitLabel:{default:"Submit"},allowSubmit:null},emits:["success","error","update:modelValue"],setup(c,{emit:n}){const r=c,v=(Wt("ModalProvider",{openModal:function(e,t){v.value=e,l.value=t}}),S()),l=S();async function p(e){l.value&&l.value(e),v.value=void 0,l.value=void 0}const i=Ll(),t=ea()["getTypeName"],{typeOf:d,createDto:e}=et(),m=S(new Ye),g=f(()=>"string"==typeof r.buttonsClass?r.formClass:Ge.buttonsClass),y=f(()=>"string"==typeof r.headingClass?r.formClass:wt.headingClass),h=f(()=>("string"==typeof r.subHeadingClass?r:wt).subHeadingClass),b=f(()=>{var e;return r.type?t(r.type):null!=(e=r.modelValue)&&e.getTypeName?r.modelValue.getTypeName():null}),w=f(()=>d(b.value)),k=S(r.modelValue||V()),C=f(()=>i.loading.value),L=f(()=>{var e;return r.heading||(null==(e=d(b.value))?void 0:e.description)||Oe(b.value)});function V(){return"string"==typeof r.type?e(r.type):r.type?new r.type:r.modelValue}async function A(e){var e=e.target,t=V(),l=Ee(null==t?void 0:t.getMethod,e=>"function"==typeof e?e():null)||"POST",a=null==Ee(null==t?void 0:t.createResponse,e=>"function"==typeof e?e():null),s=r.jsconfig;Xl.hasRequestBody(l)?(l=new t.constructor,e=new FormData(e),console.debug("AutoForm.submitForm",l,e),m.value=a?await i.apiFormVoid(l,e,{jsconfig:s}):await i.apiForm(l,e,{jsconfig:s})):(l=new t.constructor(k.value),console.debug("AutoForm.submit",l),m.value=a?await i.apiVoid(l,{jsconfig:s}):await i.api(l,{jsconfig:s})),m.value.succeeded?n("success",m.value.response):n("error",m.value.error)}function j(e){n("update:modelValue",e)}return(e,t)=>{var l;const n=q("AutoFormFields"),r=q("FormLoading"),i=q("PrimaryButton"),d=q("ModalLookup");return o(w)?(a(),u("form",{key:0,onSubmit:He(A,["prevent"]),autocomplete:"off",class:x(c.formClass)},[s("div",{class:x(c.innerFormClass)},[s("div",{class:x(c.bodyClass)},[s("div",{class:x(c.headerClass)},[e.$slots.heading?(a(),u("div",b0,[G(e.$slots,"heading")])):(a(),u("h3",{key:1,class:x(o(y))},M(o(L)),3)),e.$slots.subheading?(a(),u("div",w0,[G(e.$slots,"subheading")])):c.subHeading?(a(),u("p",{key:3,class:x(o(h))},M(c.subHeading),3)):null!=(l=o(w))&&l.notes?(a(),u("p",{key:4,class:x(["notes",o(h)]),innerHTML:null==(l=o(w))?void 0:l.notes},null,10,x0)):$("",!0)],2),G(e.$slots,"header"),k0,ge(n,{type:c.type,modelValue:k.value,"onUpdate:modelValue":j,api:m.value,configureField:c.configureField},null,8,["type","modelValue","api","configureField"]),G(e.$slots,"footer")],2),G(e.$slots,"buttons",{},()=>[s("div",{class:x(o(g))},[s("div",null,[c.showLoading&&o(C)?(a(),Y(r,{key:0})):$("",!0)]),s("div",$0,[C0,ge(i,{disabled:!!c.allowSubmit&&!c.allowSubmit(k.value)},{default:he(()=>[ye(M(c.submitLabel),1)]),_:1},8,["disabled"])])],2)])],2),"ModalLookup"==(null==(l=v.value)?void 0:l.name)&&v.value.ref?(a(),Y(d,{key:0,"ref-info":v.value.ref,onDone:p},null,8,["ref-info"])):$("",!0)],42,y0)):$("",!0)}}}),L0={key:0},V0={class:"text-red-700"},M0=s("b",null,"type",-1),S0=["onSubmit"],A0={key:0},F0={key:2},T0=["innerHTML"],I0={class:"flex justify-end"},D0={key:2,class:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},P0=s("div",{class:"fixed inset-0"},null,-1),j0={class:"fixed inset-0 overflow-hidden"},O0=["onSubmit"],B0={class:"flex min-h-0 flex-1 flex-col overflow-auto"},E0={class:"flex-1"},R0={class:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6"},N0={class:"flex items-start justify-between space-x-3"},H0={class:"space-y-1"},z0={key:0},U0={key:2},q0=["innerHTML"],Q0={class:"flex h-7 items-center"},K0={class:"flex justify-end"},G0=se({__name:"AutoCreateForm",props:{type:null,formStyle:{default:"slideOver"},panelClass:null,formClass:null,headingClass:null,subHeadingClass:null,buttonsClass:null,heading:null,subHeading:null,autosave:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},configureField:null,configureFormLayout:null},emits:["done","save","error"],setup(v,{expose:e,emit:n}){const r=v,p=S(),m=S(1);function t(){m.value++,null!=(e=p.value)&&e.forceUpdate();var e=We();null!=(e=null==e?void 0:e.proxy)&&e.$forceUpdate()}function g(e){}e({forceUpdate:t,props:r,setModel:function(e){Object.assign(L.value,e),t()},formFields:p}),Wt("ModalProvider",{openModal:function(e,t){y.value=e,l.value=t}});const y=S(),l=S();async function h(e){l.value&&l.value(e),y.value=void 0,l.value=void 0}const{typeOf:i,typeProperties:d,Crud:c,createDto:b,formValues:w}=et(),k=f(()=>Pt(r.type)),C=f(()=>i(k.value)),L=S("string"==typeof r.type?b(r.type):r.type?new r.type:null),V=f(()=>r.panelClass||Ge.panelClass(r.formStyle)),A=f(()=>r.formClass||Ge.formClass(r.formStyle)),j=f(()=>r.headingClass||Ge.headingClass(r.formStyle)),T=f(()=>r.subHeadingClass||Ge.subHeadingClass(r.formStyle)),F=f(()=>r.buttonsClass||Ge.buttonsClass),O=f(()=>c.model(C.value)),I=f(()=>{var e;return r.heading||(null==(e=i(k.value))?void 0:e.description)||(O.value?"New "+Oe(O.value):Oe(k.value))}),_=S(new Ye);let D=Ll(),B=f(()=>D.loading.value);async function E(e){var t,l,a,e=e.target;r.autosave?(l=Ee(null==(l=L.value)?void 0:l.getMethod,e=>"function"==typeof e?e():null)||"POST",t=null==Ee(null==(t=L.value)?void 0:t.createResponse,e=>"function"==typeof e?e():null),Xl.hasRequestBody(l)?(l=new L.value.constructor,a=new FormData(e),_.value=t?await D.apiFormVoid(l,a,{jsconfig:"eccn"}):await D.apiForm(l,a,{jsconfig:"eccn"})):(l=w(e,d(C.value)),a=new L.value.constructor(l),_.value=t?await D.apiVoid(a,{jsconfig:"eccn"}):await D.api(a,{jsconfig:"eccn"})),_.value.succeeded?(e.reset(),n("save",_.value.response)):n("error",_.value.error)):n("save",new L.value.constructor(w(e,d(C.value))))}function N(){n("done")}const H=S(!1),P=S(""),R={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};function z(){"slideOver"==r.formStyle?H.value=!1:N()}Dt(H,()=>{At(R,P,H.value),H.value||setTimeout(N,700)}),H.value=!0;const U=e=>{"Escape"===e.key&&z()};return at(()=>window.addEventListener("keydown",U)),Gt(()=>window.removeEventListener("keydown",U)),(e,t)=>{var l,n=q("AutoFormFields"),r=q("FormLoading"),i=q("SecondaryButton"),d=q("PrimaryButton"),c=q("CloseButton"),f=q("ModalLookup");return a(),u("div",null,[o(C)?"card"==v.formStyle?(a(),u("div",{key:1,class:x(o(V))},[s("form",{onSubmit:He(E,["prevent"])},[s("div",{class:x(o(A))},[s("div",null,[e.$slots.heading?(a(),u("div",A0,[G(e.$slots,"heading")])):(a(),u("h3",{key:1,class:x(o(j))},M(o(I)),3)),e.$slots.subheading?(a(),u("div",F0,[G(e.$slots,"subheading")])):v.subHeading?(a(),u("p",{key:3,class:x(o(T))},M(v.subHeading),3)):null!=(l=o(C))&&l.notes?(a(),u("p",{key:4,class:x(["notes",o(T)]),innerHTML:null==(l=o(C))?void 0:l.notes},null,10,T0)):$("",!0)]),G(e.$slots,"header",{formInstance:null==(l=We())?void 0:l.exposed,model:L.value}),(a(),Y(n,{ref_key:"formFields",ref:p,key:m.value,modelValue:L.value,"onUpdate:modelValue":g,api:_.value,configureField:v.configureField,configureFormLayout:v.configureFormLayout},null,8,["modelValue","api","configureField","configureFormLayout"])),G(e.$slots,"footer",{formInstance:null==(l=We())?void 0:l.exposed,model:L.value})],2),s("div",{class:x(o(F))},[s("div",null,[v.showLoading&&o(B)?(a(),Y(r,{key:0})):$("",!0)]),s("div",I0,[v.showCancel?(a(),Y(i,{key:0,onClick:z,disabled:o(B)},{default:he(()=>[ye("Cancel")]),_:1},8,["disabled"])):$("",!0),ge(d,{type:"submit",class:"ml-4",disabled:o(B)},{default:he(()=>[ye("Save")]),_:1},8,["disabled"])])],2)],40,S0)],2)):(a(),u("div",D0,[P0,s("div",j0,[s("div",{onMousedown:z,class:"absolute inset-0 overflow-hidden"},[s("div",{onMousedown:t[0]||(t[0]=He(()=>{},["stop"])),class:"pointer-events-none fixed inset-y-0 right-0 flex pl-10"},[s("div",{class:x(["pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg",P.value])},[s("form",{class:x(o(A)),onSubmit:He(E,["prevent"])},[s("div",B0,[s("div",E0,[s("div",R0,[s("div",N0,[s("div",H0,[e.$slots.heading?(a(),u("div",z0,[G(e.$slots,"heading")])):(a(),u("h3",{key:1,class:x(o(j))},M(o(I)),3)),e.$slots.subheading?(a(),u("div",U0,[G(e.$slots,"subheading")])):v.subHeading?(a(),u("p",{key:3,class:x(o(T))},M(v.subHeading),3)):null!=(l=o(C))&&l.notes?(a(),u("p",{key:4,class:x(["notes",o(T)]),innerHTML:null==(t=o(C))?void 0:t.notes},null,10,q0)):$("",!0)]),s("div",Q0,[ge(c,{"button-class":"bg-gray-50 dark:bg-gray-900",onClose:z})])])]),G(e.$slots,"header",{formInstance:null==(l=We())?void 0:l.exposed,model:L.value}),(a(),Y(n,{ref_key:"formFields",ref:p,key:m.value,modelValue:L.value,"onUpdate:modelValue":g,api:_.value,configureField:v.configureField,configureFormLayout:v.configureFormLayout},null,8,["modelValue","api","configureField","configureFormLayout"])),G(e.$slots,"footer",{formInstance:null==(t=We())?void 0:t.exposed,model:L.value})])]),s("div",{class:x(o(F))},[s("div",null,[v.showLoading&&o(B)?(a(),Y(r,{key:0})):$("",!0)]),s("div",K0,[v.showCancel?(a(),Y(i,{key:0,onClick:z,disabled:o(B)},{default:he(()=>[ye("Cancel")]),_:1},8,["disabled"])):$("",!0),ge(d,{type:"submit",class:"ml-4",disabled:o(B)},{default:he(()=>[ye("Save")]),_:1},8,["disabled"])])],2)],42,O0)],2)],32)],32)])])):(a(),u("div",L0,[s("p",V0,[ye("Could not create form for unknown "),M0,ye(" "+M(o(k)),1)])])),"ModalLookup"==(null==(c=y.value)?void 0:c.name)&&y.value.ref?(a(),Y(f,{key:3,"ref-info":y.value.ref,onDone:h},null,8,["ref-info"])):$("",!0)])}}}),W0={key:0},Z0={class:"text-red-700"},J0=s("b",null,"type",-1),X0=["onSubmit"],Y0={key:0},ef={key:2},tf=["innerHTML"],lf={class:"flex justify-end"},nf={key:2,class:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},sf=s("div",{class:"fixed inset-0"},null,-1),of={class:"fixed inset-0 overflow-hidden"},af=["onSubmit"],rf={class:"flex min-h-0 flex-1 flex-col overflow-auto"},uf={class:"flex-1"},df={class:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6"},cf={class:"flex items-start justify-between space-x-3"},ff={class:"space-y-1"},mf={key:0},vf={key:2},hf=["innerHTML"],gf={class:"flex h-7 items-center"},pf={class:"flex justify-end"},yf=se({__name:"AutoEditForm",props:{modelValue:null,type:null,deleteType:null,formStyle:{default:"slideOver"},panelClass:null,formClass:null,headingClass:null,subHeadingClass:null,heading:null,subHeading:null,autosave:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},configureField:null,configureFormLayout:null},emits:["done","save","delete","error"],setup(p,{expose:e,emit:n}){const d=p,m=S(),g=S(1);function y(e){}e({forceUpdate:function(){g.value++,V.value=L();var e=We();null!=(e=null==e?void 0:e.proxy)&&e.$forceUpdate()},props:d,setModel:function(e){Object.assign(V.value,e)},formFields:m}),Wt("ModalProvider",{openModal:function(e,t){h.value=e,l.value=t}});const h=S(),l=S();async function b(e){l.value&&l.value(e),h.value=void 0,l.value=void 0}const{typeOf:t,apiOf:c,typeProperties:r,createFormLayout:Q,getPrimaryKey:X,Crud:v,createDto:i,formValues:w}=et(),k=f(()=>Pt(d.type)),C=f(()=>t(k.value)),L=()=>"string"==typeof d.type?i(d.type,ul(d.modelValue)):d.type?new d.type(ul(d.modelValue)):null,V=S(L()),W=f(()=>d.panelClass||Ge.panelClass(d.formStyle)),A=f(()=>d.formClass||Ge.formClass(d.formStyle)),j=f(()=>d.headingClass||Ge.headingClass(d.formStyle)),T=f(()=>d.subHeadingClass||Ge.subHeadingClass(d.formStyle)),F=f(()=>v.model(C.value)),O=f(()=>{var e;return d.heading||(null==(e=t(k.value))?void 0:e.description)||(F.value?"Update "+Oe(F.value):Oe(k.value))}),I=S(new Ye);let _=Ll(),D=f(()=>_.loading.value);const B=()=>Ee(t(v.model(C.value)),e=>X(e));function Z(e){var{op:t,prop:l}=e;t&&(v.isPatch(t)||v.isUpdate(t))&&(e.disabled=null==l?void 0:l.isPrimaryKey),d.configureField&&d.configureField(e)}async function E(a){a=a.target;if(d.autosave){let e=Ee(null==(s=V.value)?void 0:s.getMethod,e=>"function"==typeof e?e():null)||"POST",t=null==Ee(null==(s=V.value)?void 0:s.createResponse,e=>"function"==typeof e?e():null),u=B();if(Xl.hasRequestBody(e)){let e=new V.value.constructor,l=fe(d.modelValue,u.name),r=new FormData(a),i=(u&&!Array.from(r.keys()).some(e=>e.toLowerCase()==u.name.toLowerCase())&&r.append(u.name,l),[]);var s=k.value&&c(k.value);if(s&&v.isPatch(s)){let e=ul(d.modelValue),t=Q(C.value),o={};if(u&&(o[u.name]=l),t.forEach(a=>{var s=a.id,n=fe(e,s);if(!u||u.name.toLowerCase()!==s.toLowerCase()){let e=r.get(s),t=null!=e,l="checkbox"===a.type?t!=!!n:"file"===a.type?t:e!=n;(l=e||n?l:!1)&&(e?o[s]=e:"file"!==a.type&&i.push(s))}}),Array.from(r.keys()).filter(e=>!o[e]).forEach(e=>r.delete(e)),0==Array.from(r.keys()).filter(e=>e.toLowerCase()!=u.name.toLowerCase()).length&&0==i.length)return void z()}s=0<i.length?{jsconfig:"eccn",reset:i}:{jsconfig:"eccn"};I.value=t?await _.apiFormVoid(e,r,s):await _.apiForm(e,r,s)}else{s=w(a,r(C.value)),s=(u&&!fe(s,u.name)&&(s[u.name]=fe(d.modelValue,u.name)),new V.value.constructor(s));I.value=t?await _.apiVoid(s,{jsconfig:"eccn"}):await _.api(s,{jsconfig:"eccn"})}I.value.succeeded?(a.reset(),n("save",I.value.response)):n("error",I.value.error)}else n("save",new V.value.constructor(w(a,r(C.value))))}async function N(e){var t=B(),l=t?fe(d.modelValue,t.name):null;l?(t={[t.name]:l},l="string"==typeof d.deleteType?i(d.deleteType,t):d.deleteType?new d.deleteType(t):null,null==Ee(l.createResponse,e=>"function"==typeof e?e():null)?I.value=await _.apiVoid(l):I.value=await _.api(l),I.value.succeeded?n("delete",I.value.response):n("error",I.value.error)):console.error(`Could not find Primary Key for Type ${k.value} (${F.value})`)}function H(){n("done")}const P=S(!1),R=S(""),K={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}};function z(){"slideOver"==d.formStyle?P.value=!1:H()}Dt(P,()=>{At(K,R,P.value),P.value||setTimeout(H,700)}),P.value=!0;const U=e=>{"Escape"===e.key&&z()};return at(()=>window.addEventListener("keydown",U)),Gt(()=>window.removeEventListener("keydown",U)),(e,t)=>{var l,n=q("AutoFormFields"),r=q("ConfirmDelete"),i=q("FormLoading"),d=q("SecondaryButton"),c=q("PrimaryButton"),f=q("CloseButton"),v=q("ModalLookup");return a(),u("div",null,[o(C)?"card"==p.formStyle?(a(),u("div",{key:1,class:x(o(W))},[s("form",{onSubmit:He(E,["prevent"])},[s("div",{class:x(o(A))},[s("div",null,[e.$slots.heading?(a(),u("div",Y0,[G(e.$slots,"heading")])):(a(),u("h3",{key:1,class:x(o(j))},M(o(O)),3)),e.$slots.subheading?(a(),u("div",ef,[G(e.$slots,"subheading")])):p.subHeading?(a(),u("p",{key:3,class:x(o(T))},M(p.subHeading),3)):null!=(l=o(C))&&l.notes?(a(),u("p",{key:4,class:x(["notes",o(T)]),innerHTML:null==(l=o(C))?void 0:l.notes},null,10,tf)):$("",!0)]),G(e.$slots,"header",{formInstance:null==(l=We())?void 0:l.exposed,model:V.value}),(a(),Y(n,{ref_key:"formFields",ref:m,key:g.value,modelValue:V.value,"onUpdate:modelValue":y,api:I.value,configureField:p.configureField,configureFormLayout:p.configureFormLayout},null,8,["modelValue","api","configureField","configureFormLayout"])),G(e.$slots,"footer",{formInstance:null==(l=We())?void 0:l.exposed,model:V.value})],2),s("div",{class:x(o(Ge).buttonsClass)},[s("div",null,[p.deleteType?(a(),Y(r,{key:0,onDelete:N})):$("",!0)]),s("div",null,[p.showLoading&&o(D)?(a(),Y(i,{key:0})):$("",!0)]),s("div",lf,[ge(d,{onClick:z,disabled:o(D)},{default:he(()=>[ye("Cancel")]),_:1},8,["disabled"]),ge(c,{type:"submit",class:"ml-4",disabled:o(D)},{default:he(()=>[ye("Save")]),_:1},8,["disabled"])])],2)],40,X0)],2)):(a(),u("div",nf,[sf,s("div",of,[s("div",{onMousedown:z,class:"absolute inset-0 overflow-hidden"},[s("div",{onMousedown:t[0]||(t[0]=He(()=>{},["stop"])),class:"pointer-events-none fixed inset-y-0 right-0 flex pl-10"},[s("div",{class:x(["pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg",R.value])},[s("form",{class:x(o(A)),onSubmit:He(E,["prevent"])},[s("div",rf,[s("div",uf,[s("div",df,[s("div",cf,[s("div",ff,[e.$slots.heading?(a(),u("div",mf,[G(e.$slots,"heading")])):(a(),u("h3",{key:1,class:x(o(j))},M(o(O)),3)),e.$slots.subheading?(a(),u("div",vf,[G(e.$slots,"subheading")])):p.subHeading?(a(),u("p",{key:3,class:x(o(T))},M(p.subHeading),3)):null!=(l=o(C))&&l.notes?(a(),u("p",{key:4,class:x(["notes",o(T)]),innerHTML:null==(t=o(C))?void 0:t.notes},null,10,hf)):$("",!0)]),s("div",gf,[ge(f,{"button-class":"bg-gray-50 dark:bg-gray-900",onClose:z})])])]),G(e.$slots,"header",{formInstance:null==(l=We())?void 0:l.exposed,model:V.value}),(a(),Y(n,{ref_key:"formFields",ref:m,key:g.value,modelValue:V.value,"onUpdate:modelValue":y,api:I.value,configureField:Z,configureFormLayout:p.configureFormLayout},null,8,["modelValue","api","configureFormLayout"])),G(e.$slots,"footer",{formInstance:null==(t=We())?void 0:t.exposed,model:V.value})])]),s("div",{class:x(o(Ge).buttonsClass)},[s("div",null,[p.deleteType?(a(),Y(r,{key:0,onDelete:N})):$("",!0)]),s("div",null,[p.showLoading&&o(D)?(a(),Y(i,{key:0})):$("",!0)]),s("div",pf,[ge(d,{onClick:z,disabled:o(D)},{default:he(()=>[ye("Cancel")]),_:1},8,["disabled"]),ge(c,{type:"submit",class:"ml-4",disabled:o(D)},{default:he(()=>[ye("Save")]),_:1},8,["disabled"])])],2)],42,af)],2)],32)],32)])])):(a(),u("div",W0,[s("p",Z0,[ye("Could not create form for unknown "),J0,ye(" "+M(o(k)),1)])])),"ModalLookup"==(null==(f=h.value)?void 0:f.name)&&h.value.ref?(a(),Y(v,{key:3,"ref-info":h.value.ref,onDone:b},null,8,["ref-info"])):$("",!0)])}}}),bf=s("label",{for:"confirmDelete",class:"ml-2 mr-2 select-none"},"confirm",-1),wf=["onClick"],xf=se({__name:"ConfirmDelete",emits:["delete"],setup(e,{emit:t}){let l=S(!1);const n=()=>{l.value&&t("delete")},r=f(()=>["select-none inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white",l.value?"cursor-pointer bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500":"bg-red-400"]);return(e,t)=>(a(),u(ke,null,[xt(s("input",{id:"confirmDelete",type:"checkbox",class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 rounded border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:ring-offset-black","onUpdate:modelValue":t[0]||(t[0]=e=>Hn(l)?l.value=e:l=e)},null,512),[[Wl,o(l)]]),bf,s("span",_e({onClick:He(n,["prevent"]),class:o(r)},e.$attrs),[G(e.$slots,"default",{},()=>[ye("Delete")])],16,wf)],64))}}),kf={class:"flex",title:"loading..."},$f={key:0,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30"},Cf=gl('<rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="8" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="16" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect>',3),_f=[Cf],Lf={class:"ml-2 mt-1 text-gray-400"},Vf=se({__name:"FormLoading",props:{icon:{type:Boolean,default:!0},text:{default:"loading..."}},setup(l){return Ne("ApiState",void 0),(e,t)=>(a(),u("div",kf,[l.icon?(a(),u("svg",$f,_f)):$("",!0),s("span",Lf,M(l.text),1)]))}}),Mf=["onClick"],Sf={key:3,class:"flex justify-between items-center"},Af={class:"mr-1 select-none"},Ff=["onClick"],Tf=se({__name:"DataGrid",props:{items:{default:()=>[]},id:{default:"DataGrid"},type:null,tableStyle:{default:"stripedRows"},selectedColumns:null,gridClass:null,grid2Class:null,grid3Class:null,grid4Class:null,tableClass:null,theadClass:null,tbodyClass:null,theadRowClass:null,theadCellClass:null,isSelected:null,headerTitle:null,headerTitles:null,visibleFrom:null,rowClass:null,rowStyle:null},emits:["headerSelected","rowSelected"],setup(t,{emit:d}){const c=t,l=S(),v=S(null),p=Zl(),m=t=>Object.keys(p).find(e=>e.toLowerCase()==t.toLowerCase()+"-header"),g=t=>Object.keys(p).find(e=>e.toLowerCase()==t.toLowerCase()),n=f(()=>El(c.items).filter(e=>!(!p[e]&&!p[e+"-header"]))),{typeOf:e,typeProperties:r}=et(),i=f(()=>Pt(c.type)),y=f(()=>e(i.value)),h=f(()=>r(y.value));function b(e){e=c.headerTitles&&fe(c.headerTitles,e)||e;return c.headerTitle?c.headerTitle(e):Kn(e)}function w(e){const t=e.toLowerCase();return h.value.find(e=>e.name.toLowerCase()==t)}const k={xs:"xs:table-cell",sm:"sm:table-cell",md:"md:table-cell",lg:"lg:table-cell",xl:"xl:table-cell","2xl":"2xl:table-cell",never:""};function C(e){e=c.visibleFrom&&fe(c.visibleFrom,e);return e&&Ee(k[e],e=>"hidden "+e)}const L=f(()=>c.gridClass??ue.getGridClass(c.tableStyle)),V=f(()=>c.grid2Class??ue.getGrid2Class(c.tableStyle)),A=f(()=>c.grid3Class??ue.getGrid3Class(c.tableStyle)),j=f(()=>c.grid4Class??ue.getGrid4Class(c.tableStyle)),T=f(()=>c.tableClass??ue.getTableClass(c.tableStyle)),F=f(()=>c.tbodyClass??ue.getTbodyClass(c.tbodyClass)),O=f(()=>c.theadClass??ue.getTheadClass(c.tableStyle)),I=f(()=>c.theadRowClass??ue.getTheadRowClass(c.tableStyle)),_=f(()=>c.theadCellClass??ue.getTheadCellClass(c.tableStyle));const D=f(()=>{const e=("string"==typeof c.selectedColumns?c.selectedColumns.split(","):c.selectedColumns)||(0<n.value.length?n.value:El(c.items)),t=h.value.reduce((e,t)=>(e[t.name.toLowerCase()]=t.format,e),{});return e.filter(e=>{return"hidden"!=(null==(e=t[e.toLowerCase()])?void 0:e.method)})});return(n,e)=>{const r=q("CellFormat"),i=q("PreviewFormat");return t.items.length?(a(),u("div",{key:0,ref_key:"refResults",ref:l,class:x(o(L))},[s("div",{class:x(o(V))},[s("div",{class:x(o(A))},[s("div",{class:x(o(j))},[s("table",{class:x(o(T))},[s("thead",{class:x(o(O))},[s("tr",{class:x(o(I))},[(a(!0),u(ke,null,Me(o(D),t=>{return a(),u("td",{class:x([C(t),o(_),(e=t,v.value===e?"text-gray-900 dark:text-gray-50":"text-gray-500 dark:text-gray-400")])},[s("div",{onClick:e=>{d("headerSelected",t,e)}},[o(p)[t+"-header"]?G(n.$slots,t+"-header",{key:0,column:t}):m(t)?G(n.$slots,m(t),{key:1,column:t}):o(p).header?G(n.$slots,"header",{key:2,column:t,label:b(t)}):(a(),u("div",Sf,[s("span",Af,M(b(t)),1)]))],8,Mf)],2);var e}),256))],2)],2),s("tbody",{class:x(o(F))},[(a(!0),u(ke,null,Me(t.items,(t,e)=>{return a(),u("tr",{class:x((l=t,s=e,c.rowClass?c.rowClass(l,s):ue.getTableRowClass(c.tableStyle,s,!(!c.isSelected||!c.isSelected(l)),null!=c.isSelected))),style:Gl((s=t,l=e,c.rowStyle?c.rowStyle(s,l):void 0)),onClick:e=>{d("rowSelected",t,e)}},[(a(!0),u(ke,null,Me(o(D),e=>{return a(),u("td",{class:x([C(e),o(ue).tableCellClass])},[o(p)[e]?G(n.$slots,e,St(_e({key:0},t))):g(e)?G(n.$slots,g(e),St(_e({key:1},t))):w(e)?(a(),Y(r,{key:2,type:o(y),propType:w(e),modelValue:t},null,8,["type","propType","modelValue"])):(a(),Y(i,{key:3,value:o(fe)(t,e),format:null!=(e=w(e=e))&&e.format?e.format:"TimeSpan"==(null==e?void 0:e.type)||"TimeOnly"==(null==e?void 0:e.type)?{method:"time"}:null},null,8,["value","format"]))],2)}),256))],14,Ff);var l,s}),256))],2)],2)],2)],2)],2)],2)):$("",!0)}}}),If=se({props:{type:Object,propType:Object,modelValue:Object},setup(i,{attrs:u}){const d=et()["typeOf"];return()=>{var e,t;const l=null!=(e=i.propType)&&e.format?e.format:"TimeSpan"==(null==e?void 0:e.type)||"TimeOnly"==(null==e?void 0:e.type)?{method:"time"}:null,a=fe(i.modelValue,i.propType.name),s=Object.assign({},i,u),n=gt("span",{innerHTML:Kt(a,l,s)}),o=Ut(a)&&Array.isArray(a)?gt("span",{},[gt("span",{class:"mr-2"},""+a.length),n]):n,r=null==(e=i.propType)?void 0:e.ref;return r&&(e=Ze(i.type).find(e=>e.type===r.model))&&(e=(e=fe(i.modelValue,e.name))&&r.refLabel&&fe(e,r.refLabel))?(t=(t=null==(t=d(r.model))?void 0:t.icon)?gt(Ts,{image:t,class:"w-5 h-5 mr-1"}):null,gt("span",{class:"flex",title:r.model+" "+a},[t,e])):o}}}),Df={key:0},Pf={key:0,class:"mr-2"},jf=["innerHTML"],Of=["innerHTML"],Bf={inheritAttrs:!1},Ef=se({...Bf,__name:"PreviewFormat",props:{value:null,format:null,includeIcon:{type:Boolean,default:!0},includeCount:{type:Boolean,default:!0},maxFieldLength:{default:150},maxNestedFields:{default:2},maxNestedFieldLength:{default:30}},setup(l){const e=l,n=f(()=>Array.isArray(e.value));return(e,t)=>o(Ut)(l.value)?(a(),u("span",Df,[l.includeCount&&o(n)?(a(),u("span",Pf,M(l.value.length),1)):$("",!0),s("span",{innerHTML:o(Kt)(l.value,l.format,e.$attrs)},null,8,jf)])):(a(),u("span",{key:1,innerHTML:o(Kt)(l.value,l.format,e.$attrs)},null,8,Of))}}),Rf=["innerHTML"],Nf={key:0},Hf=s("b",null,null,-1),zf={key:2},Uf=se({__name:"HtmlFormat",props:{value:null,depth:{default:0},fieldAttrs:null,classes:{type:Function,default:(e,t,l,a,s)=>a}},setup(r){const t=r,i=f(()=>$t(t.value)),d=f(()=>Array.isArray(t.value)),c=e=>Kn(e),v=e=>t.fieldAttrs?t.fieldAttrs(e):null,p=f(()=>El(t.value));return(e,t)=>{const l=q("HtmlFormat",!0);return a(),u("div",{class:x(0==r.depth?"prose html-format":"")},[o(i)?(a(),u("div",{key:0,innerHTML:o(Kt)(r.value)},null,8,Rf)):o(d)?(a(),u("div",{key:1,class:x(r.classes("array","div",r.depth,o(ue).gridClass))},[o($t)(r.value[0])?(a(),u("div",Nf,"[ "+M(r.value.join(", "))+" ]",1)):(a(),u("div",{key:1,class:x(r.classes("array","div",r.depth,o(ue).grid2Class))},[s("div",{class:x(r.classes("array","div",r.depth,o(ue).grid3Class))},[s("div",{class:x(r.classes("array","div",r.depth,o(ue).grid4Class))},[s("table",{class:x(r.classes("object","table",r.depth,o(ue).tableClass))},[s("thead",{class:x(r.classes("array","thead",r.depth,o(ue).theadClass))},[s("tr",null,[(a(!0),u(ke,null,Me(o(p),e=>(a(),u("th",{class:x(r.classes("array","th",r.depth,o(ue).theadCellClass+" whitespace-nowrap"))},[Hf,ye(M(c(e)),1)],2))),256))])],2),s("tbody",null,[(a(!0),u(ke,null,Me(r.value,(t,e)=>(a(),u("tr",{class:x(r.classes("array","tr",r.depth,e%2==0?"bg-white":"bg-gray-50",e))},[(a(!0),u(ke,null,Me(o(p),e=>(a(),u("td",{class:x(r.classes("array","td",r.depth,o(ue).tableCellClass))},[ge(l,_e({value:t[e],"field-attrs":r.fieldAttrs,depth:r.depth+1,classes:r.classes},v(e)),null,16,["value","field-attrs","depth","classes"])],2))),256))],2))),256))])],2)],2)],2)],2))],2)):(a(),u("div",zf,[s("table",{class:x(r.classes("object","table",r.depth,"table-object"))},[(a(!0),u(ke,null,Me((n=r.value)?Object.keys(n).map(e=>({key:c(e),val:n[e]})):[],e=>(a(),u("tr",{class:x(r.classes("object","tr",r.depth,""))},[s("th",{class:x(r.classes("object","th",r.depth,"align-top py-2 px-4 text-left text-sm font-medium tracking-wider whitespace-nowrap"))},M(e.key),3),s("td",{class:x(r.classes("object","td",r.depth,"align-top py-2 px-4 text-sm"))},[ge(l,_e({value:e.val,"field-attrs":r.fieldAttrs,depth:r.depth+1,classes:r.classes},v(e.key)),null,16,["value","field-attrs","depth","classes"])],2)],2))),256))],2)]))],2);var n}}}),qf={class:"absolute top-0 right-0 pt-4 pr-4"},Qf=s("span",{class:"sr-only"},"Close",-1),Kf=s("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Gf=[Qf,Kf],Wf=se({__name:"CloseButton",props:{buttonClass:{default:"bg-white dark:bg-black"}},emits:["close"],setup(l,{}){return(t,e)=>(a(),u("div",qf,[s("button",{type:"button",onClick:e[0]||(e[0]=e=>t.$emit("close")),class:x([l.buttonClass,"rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black"])},Gf,2)]))}}),Zf=["id","aria-labelledby"],Jf=s("div",{class:"fixed inset-0"},null,-1),Xf={class:"fixed inset-0 overflow-hidden"},Yf={class:"flex h-full flex-col bg-white dark:bg-black shadow-xl"},em={class:"flex min-h-0 flex-1 flex-col overflow-auto"},tm={class:"flex-1"},lm={class:"bg-gray-50 dark:bg-gray-900 px-4 py-6 sm:px-6"},nm={class:"flex items-start justify-between space-x-3"},sm={class:"space-y-1"},om=["id"],am={key:1,class:"text-sm text-gray-500"},im={class:"flex h-7 items-center"},rm={class:"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 px-4 py-5 sm:px-6"},um=se({__name:"SlideOver",props:{id:{default:"SlideOver"},title:null,contentClass:{default:"relative mt-6 flex-1 px-4 sm:px-6"}},emits:["done"],setup(n,{emit:e}){const t=S(!1),o=S(""),l={entering:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-full",to:"translate-x-0"},leaving:{cls:"transform transition ease-in-out duration-500 sm:duration-700",from:"translate-x-0",to:"translate-x-full"}},r=(Dt(t,()=>{At(l,o,t.value),t.value||setTimeout(()=>e("done"),700)}),t.value=!0,()=>t.value=!1),i=e=>{"Escape"===e.key&&r()};return at(()=>window.addEventListener("keydown",i)),Gt(()=>window.removeEventListener("keydown",i)),(e,t)=>{var l=q("CloseButton");return a(),u("div",{id:n.id,class:"relative z-10","aria-labelledby":n.id+"-title",role:"dialog","aria-modal":"true"},[Jf,s("div",Xf,[s("div",{onMousedown:r,class:"absolute inset-0 overflow-hidden"},[s("div",{onMousedown:t[0]||(t[0]=He(()=>{},["stop"])),class:"pointer-events-none fixed inset-y-0 right-0 flex pl-10"},[s("div",{class:x(["pointer-events-auto w-screen xl:max-w-3xl md:max-w-xl max-w-lg",o.value])},[s("div",Yf,[s("div",em,[s("div",tm,[s("div",lm,[s("div",nm,[s("div",sm,[n.title?(a(),u("h2",{key:0,class:"text-lg font-medium text-gray-900 dark:text-gray-50",id:n.id+"-title"},M(n.title),9,om)):$("",!0),e.$slots.subtitle?(a(),u("p",am,[G(e.$slots,"subtitle")])):$("",!0)]),s("div",im,[ge(l,{"button-class":"bg-gray-50 dark:bg-gray-900",onClose:r})])])]),s("div",{class:x(n.contentClass)},[G(e.$slots,"default")],2)])]),s("div",rm,[G(e.$slots,"footer")])])],2)],32)],32)])],8,Zf)}}}),dm=["id","data-transition-for","aria-labelledby"],cm={class:"fixed inset-0 z-10 overflow-y-auto"},fm={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},mm=s("span",{class:"sr-only"},"Close",-1),vm=s("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),hm=[mm,vm],gm=se({__name:"ModalDialog",props:{id:{default:"ModalDialog"},modalClass:{default:Kl.modalClass},sizeClass:{default:Kl.sizeClass}},emits:["done"],setup(n,{emit:e}){const t=S(!1),o=S(""),l={entering:{cls:"ease-out duration-300",from:"opacity-0",to:"opacity-100"},leaving:{cls:"ease-in duration-200",from:"opacity-100",to:"opacity-0"}},r=S(""),i={entering:{cls:"ease-out duration-300",from:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",to:"opacity-100 translate-y-0 sm:scale-100"},leaving:{cls:"ease-in duration-200",from:"opacity-100 translate-y-0 sm:scale-100",to:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}},d=(Dt(t,()=>{At(l,o,t.value),At(i,r,t.value),t.value||setTimeout(()=>e("done"),200)}),t.value=!0,()=>t.value=!1),c=(Wt("ModalProvider",{openModal:function(e,t){c.value=e,f.value=t}}),S()),f=S();async function v(e){f.value&&f.value(e),c.value=void 0,f.value=void 0}const p=e=>{"Escape"===e.key&&d()};return at(()=>window.addEventListener("keydown",p)),Gt(()=>window.removeEventListener("keydown",p)),(e,t)=>{var l=q("ModalLookup");return a(),u("div",{id:n.id,"data-transition-for":n.id,onMousedown:d,class:"relative z-10","aria-labelledby":n.id+"-title",role:"dialog","aria-modal":"true"},[s("div",{class:x(["fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",o.value])},null,2),s("div",cm,[s("div",fm,[s("div",{class:x([n.modalClass,n.sizeClass,r.value]),onMousedown:t[0]||(t[0]=He(()=>{},["stop"]))},[s("div",null,[s("div",{class:"hidden sm:block absolute top-0 right-0 pt-4 pr-4 z-10"},[s("button",{type:"button",onClick:d,class:"bg-white dark:bg-black rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black"},hm)]),G(e.$slots,"default")])],34)])]),"ModalLookup"==(null==(t=c.value)?void 0:t.name)&&c.value.ref?(a(),Y(l,{key:0,"ref-info":c.value.ref,onDone:v},null,8,["ref-info"])):$("",!0)],40,dm)}}}),pm={class:"pt-2 overflow-auto",style:{"min-height":"620px"}},ym={class:"mt-3 pl-5 flex flex-wrap items-center"},bm={class:"hidden sm:block text-xl leading-6 font-medium text-gray-900 dark:text-gray-50 mr-3"},wm={class:"hidden md:inline"},xm={class:"flex pb-1 sm:pb-0"},km=["title"],$m=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("g",{"stroke-width":"1.5",fill:"none"},[s("path",{d:"M9 3H3.6a.6.6 0 0 0-.6.6v16.8a.6.6 0 0 0 .6.6H9M9 3v18M9 3h6M9 21h6m0-18h5.4a.6.6 0 0 1 .6.6v16.8a.6.6 0 0 1-.6.6H15m0-18v18",stroke:"currentColor"})])],-1),Cm=[$m],_m=["disabled"],Lm=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6l6 6zM6 6h2v12H6z",fill:"currentColor"})],-1),Vm=[Lm],Mm=["disabled"],Sm=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M15.41 7.41L14 6l-6 6l6 6l1.41-1.41L10.83 12z",fill:"currentColor"})],-1),Am=[Sm],Fm=["disabled"],Tm=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z",fill:"currentColor"})],-1),Im=[Tm],Dm=["disabled"],Pm=s("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6l-6-6zM16 6h2v12h-2z",fill:"currentColor"})],-1),jm=[Pm],Om={key:0,class:"flex pb-1 sm:pb-0"},Bm={class:"px-4 text-lg text-black dark:text-white"},Em={key:0},Rm={key:1},Nm=s("span",{class:"hidden xl:inline"}," Showing Results ",-1),Hm={key:2},zm={key:1,class:"pl-2"},Um=s("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M6.78 2.72a.75.75 0 0 1 0 1.06L4.56 6h8.69a7.75 7.75 0 1 1-7.75 7.75a.75.75 0 0 1 1.5 0a6.25 6.25 0 1 0 6.25-6.25H4.56l2.22 2.22a.75.75 0 1 1-1.06 1.06l-3.5-3.5a.75.75 0 0 1 0-1.06l3.5-3.5a.75.75 0 0 1 1.06 0Z"})],-1),qm=[Um],Qm={class:"flex pb-1 sm:pb-0"},Km={key:0,class:"pl-2"},Gm=s("svg",{class:"flex-none w-5 h-5 mr-2 text-gray-400 dark:text-gray-500 group-hover:text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z","clip-rule":"evenodd"})],-1),Wm={class:"mr-1"},Zm={key:0,class:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},Jm=s("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"},null,-1),Xm=[Jm],Ym={key:1,class:"h-5 w-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},e1=s("path",{"fill-rule":"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1),t1=[e1],l1={key:1},n1={key:4},s1={key:0},o1={key:0,class:"cursor-pointer flex justify-between items-center hover:text-gray-900 dark:hover:text-gray-50"},a1={class:"mr-1 select-none"},i1={key:1,class:"flex justify-between items-center"},r1={class:"mr-1 select-none"},u1=se({__name:"ModalLookup",props:{id:{default:"ModalLookup"},refInfo:null,skip:{default:0},prefs:null,selectedColumns:null,allowFiltering:{type:[Boolean,null],default:!0},showPreferences:{type:[Boolean,null],default:!0},showPagingNav:{type:[Boolean,null],default:!0},showPagingInfo:{type:[Boolean,null],default:!0},showResetPreferences:{type:[Boolean,null],default:!0},showFiltersView:{type:[Boolean,null],default:!0},toolbarButtonClass:null,canFilter:null},emits:["done"],setup(c,{emit:l}){const v=c,p=Zl(),e=_t()["config"],{metadataApi:t,filterDefinitions:n}=et(),r=Ne("client"),i=e.value.storage,m=f(()=>v.toolbarButtonClass??ue.toolbarButtonClass),g=f(()=>n.value),y=S({take:25}),h=S(new Ye),b=S(v.skip),w=S(!1),k=S(),d=e=>"string"==typeof e?e.split(","):e||[];function C(e,t){return ue.getTableRowClass("fullWidth",t,!1,!0)}const L=f(()=>rt(v.refInfo.model)),V=f(()=>{var e=(0<(e=d(v.selectedColumns)).length?e:[]).map(e=>e.toLowerCase());const l=Ze(L.value);return 0<e.length?e.map(t=>l.find(e=>e.name.toLowerCase()===t)).filter(e=>null!=e):l}),A=f(()=>{let e=V.value.map(e=>e.name),t=d(y.value.selectedColumns).map(e=>e.toLowerCase());return 0<t.length?e.filter(e=>t.includes(e.toLowerCase())):e}),j=f(()=>y.value.take??25),T=f(()=>h.value.response?fe(h.value.response,"results"):[]),F=f(()=>{var e;return(null==(e=h.value.response)?void 0:e.total)??T.value.length??0}),O=f(()=>0<b.value),I=f(()=>0<b.value),_=f(()=>T.value.length>=j.value),D=f(()=>T.value.length>=j.value),B=S([]),Q=f(()=>B.value.some(e=>0<e.settings.filters.length||!!e.settings.sort)),E=f(()=>B.value.map(e=>e.settings.filters.length).reduce((e,t)=>e+t,0)),X=f(()=>Jt(L.value)),W=f(()=>{var e;return null==(e=t.value)?void 0:e.operations.find(e=>{var t;return(null==(t=e.dataModel)?void 0:t.name)==v.refInfo.model&&je.isAnyQuery(e)})}),Z=S(),N=S(!1),H=S(),P=()=>v.id+"/ApiPrefs/"+v.refInfo.model,R=e=>`Column/${v.id}:${v.refInfo.model}.`+e;async function z(e){b.value+=e,b.value<0&&(b.value=0);e=Math.floor(F.value/j.value)*j.value;b.value>e&&(b.value=e),await U()}async function K(e,t){l("done",e)}function J(){l("done",null)}function ee(t,e){var l,a=e.target;"TD"!==(null==a?void 0:a.tagName)&&(a=null==(a=null==a?void 0:a.closest("TABLE"))?void 0:a.getBoundingClientRect(),l=B.value.find(e=>e.name.toLowerCase()==t.toLowerCase()))&&a&&(e=("DIV"===(null==(a=e.target)?void 0:a.tagName)?e.target:null==(a=e.target)?void 0:a.closest("DIV")).getBoundingClientRect(),H.value={column:l,topLeft:{x:Math.max(Math.floor(e.x+25),343),y:Math.floor(115)}})}function te(){H.value=null}async function le(e){var t=null==(t=H.value)?void 0:t.column;t&&(t.settings=e,i.setItem(R(t.name),JSON.stringify(t.settings)),await U()),H.value=null}async function ae(e){i.setItem(R(e.name),JSON.stringify(e.settings)),await U()}async function se(e){N.value=!1,y.value=e,i.setItem(P(),JSON.stringify(e)),await U()}async function U(){(async function(a){var s=W.value;if(s){let e=qt(s,a),t=Qn(e=>{h.value.response=h.value.error=void 0,w.value=e}),l=await r.api(e);t(),hl(()=>h.value=l);s=fe(l.response,"results")||[];l.succeeded&&s.label}else console.error("No Query API was found for "+v.refInfo.model)})(function(){let a={include:"total",take:j.value},e=d(y.value.selectedColumns||v.selectedColumns);{var t;0<e.length&&((t=X.value)&&e.includes(t.name)&&(e=[t.name,...e]),a.fields=e.join(","))}let s=[];return B.value.forEach(l=>{l.settings.sort&&s.push(("DESC"===l.settings.sort?"-":"")+l.name),l.settings.filters.forEach(e=>{var t=e.key.replace("%",l.name);a[t]=e.value})}),"u"<typeof a.skip&&0<b.value&&(a.skip=b.value),0<s.length&&(a.orderBy=s.join(",")),a}())}async function ne(){B.value.forEach(e=>{e.settings={filters:[]},i.removeItem(R(e.name))}),await U()}return at(async()=>{var e=v.prefs||ml(i.getItem(P()));e&&(y.value=e),B.value=V.value.map(e=>({name:e.name,type:e.type,meta:e,settings:Object.assign({filters:[]},ml(i.getItem(R(e.name))))})),isNaN(v.skip)||(b.value=v.skip),await U()}),(l,e)=>{const t=q("ErrorSummary"),n=q("Loading"),r=q("SettingsIcons"),i=q("DataGrid"),d=q("ModalDialog");return a(),u(ke,null,[c.refInfo?(a(),Y(d,{key:0,ref_key:"modalDialog",ref:Z,id:c.id,onDone:J},{default:he(()=>[s("div",pm,[s("div",ym,[s("h3",bm,[ye(" Select "),s("span",wm,M(o(Oe)(c.refInfo.model)),1)]),s("div",xm,[c.showPreferences?(a(),u("button",{key:0,type:"button",class:"pl-2 text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400",title:c.refInfo.model+" Preferences",onClick:e[0]||(e[0]=e=>N.value=!N.value)},Cm,8,km)):$("",!0),c.showPagingNav?(a(),u("button",{key:1,type:"button",class:x(["pl-2",o(O)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"First page",disabled:!o(O),onClick:e[1]||(e[1]=e=>z(-o(F)))},Vm,10,_m)):$("",!0),c.showPagingNav?(a(),u("button",{key:2,type:"button",class:x(["pl-2",o(I)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"Previous page",disabled:!o(I),onClick:e[2]||(e[2]=e=>z(-o(j)))},Am,10,Mm)):$("",!0),c.showPagingNav?(a(),u("button",{key:3,type:"button",class:x(["pl-2",o(_)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"Next page",disabled:!o(_),onClick:e[3]||(e[3]=e=>z(o(j)))},Im,10,Fm)):$("",!0),c.showPagingNav?(a(),u("button",{key:4,type:"button",class:x(["pl-2",o(D)?"text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400":"text-gray-400 dark:text-gray-500"]),title:"Last page",disabled:!o(D),onClick:e[4]||(e[4]=e=>z(o(F)))},jm,10,Dm)):$("",!0)]),c.showPagingInfo?(a(),u("div",Om,[s("div",Bm,[w.value?(a(),u("span",Em,"Querying...")):$("",!0),o(T).length?(a(),u("span",Rm,[Nm,ye(" "+M(b.value+1)+" - "+M(Math.min(b.value+o(T).length,o(F)))+" ",1),s("span",null," of "+M(o(F)),1)])):h.value.completed?(a(),u("span",Hm,"No Results")):$("",!0)])])):$("",!0),o(Q)&&c.showResetPreferences?(a(),u("div",zm,[s("button",{type:"button",onClick:ne,title:"Reset Preferences & Filters",class:x(o(m))},qm,2)])):$("",!0),s("div",Qm,[c.showFiltersView&&0<o(E)?(a(),u("div",Km,[s("button",{type:"button",onClick:e[5]||(e[5]=e=>k.value="filters"==k.value?null:"filters"),class:x(o(m)),"aria-expanded":"false"},[Gm,s("span",Wm,M(o(E))+" "+M(1==o(E)?"Filter":"Filters"),1),"filters"!=k.value?(a(),u("svg",Zm,Xm)):(a(),u("svg",Ym,t1))],2)])):$("",!0)])]),"filters"==k.value?(a(),Y(xn,{key:0,class:"border-y border-gray-200 dark:border-gray-800 py-8 my-2",definitions:o(g),columns:B.value,onDone:e[6]||(e[6]=e=>k.value=null),onChange:ae},null,8,["definitions","columns"])):$("",!0),H.value?(a(),u("div",l1,[ge(wn,{definitions:o(g),column:H.value.column,"top-left":H.value.topLeft,onDone:te,onSave:le},null,8,["definitions","column","top-left"])])):$("",!0),h.value.error?(a(),Y(t,{key:2,status:h.value.error},null,8,["status"])):w.value?(a(),Y(n,{key:3})):(a(),u("div",n1,[o(T).length?(a(),u("div",s1,[ge(i,{id:c.id,items:o(T),type:c.refInfo.model,"selected-columns":o(A),onFiltersChanged:U,tableStyle:"fullWidth",rowClass:C,onRowSelected:K,onHeaderSelected:ee},Jl({header:he(({column:t,label:e})=>{return[!c.allowFiltering||v.canFilter&&!v.canFilter(t)?(a(),u("div",i1,[s("span",r1,M(e),1)])):(a(),u("div",o1,[s("span",a1,M(e),1),ge(r,{column:B.value.find(e=>e.name.toLowerCase()===t.toLowerCase()),"is-open":(null==(e=H.value)?void 0:e.column.name)===t},null,8,["column","is-open"])]))]}),_:2},[Me(Object.keys(o(p)),t=>({name:t,fn:he(e=>[G(l.$slots,t,St(cl(e)))])}))]),1032,["id","items","type","selected-columns"])])):$("",!0)]))])]),_:3},8,["id"])):$("",!0),N.value?(a(),Y(kn,{key:1,columns:o(V),prefs:y.value,onDone:e[7]||(e[7]=e=>N.value=!1),onSave:se},null,8,["columns","prefs"])):$("",!0)],64)}}}),d1={class:"sm:hidden"},c1=["for"],f1=["id","name"],m1=["value"],v1={class:"hidden sm:block"},h1={class:"border-b border-gray-200"},g1={class:"-mb-px flex","aria-label":"Tabs"},p1=["onClick"],y1=se({__name:"Tabs",props:{tabs:null,id:{default:"tabs"},param:{default:"tab"},label:{type:Function,default:e=>Oe(e)},selected:null,tabClass:null,bodyClass:{default:"p-4"},url:{type:Boolean,default:!0}},setup(l){const t=l,n=f(()=>Object.keys(t.tabs)),r=e=>t.label?t.label(e):Oe(e),i=f(()=>t.id||"tabs"),d=f(()=>t.param||"tab"),c=S();function v(e){c.value=e,t.url&&Yl({tab:e===n.value[0]?void 0:e})}const p=f(()=>100/Object.keys(t.tabs).length+"%");return at(()=>{var e;c.value=Object.keys(t.tabs)[0],t.url&&(e=Bl(location.search)[d.value])&&(c.value=e)}),(e,t)=>(a(),u("div",null,[s("div",d1,[s("label",{for:o(i),class:"sr-only"},"Select a tab",8,c1),s("select",{id:o(i),name:o(i),class:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",onChange:t[0]||(t[0]=e=>{return v(null==(e=e.target)?void 0:e.value)})},[(a(!0),u(ke,null,Me(o(n),e=>(a(),u("option",{key:e,value:e},M(r(e)),9,m1))),128))],40,f1)]),s("div",v1,[s("div",h1,[s("nav",g1,[(a(!0),u(ke,null,Me(o(n),t=>{return a(),u("a",{href:"#",onClick:He(e=>v(t),["prevent"]),style:Gl({width:o(p)}),class:x([(e=t,c.value===e?"border-indigo-500 text-indigo-600 py-4 px-1 text-center border-b-2 font-medium text-sm":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 py-4 px-1 text-center border-b-2 font-medium text-sm"),l.tabClass])},M(r(t)),15,p1);var e}),256))])])]),s("div",{class:x(l.bodyClass)},[(a(),Y(zn(l.tabs[c.value])))],2)]))}}),b1=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-gray-400",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},[s("path",{fill:"currentColor",d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3Z"})],-1),w1=[b1],x1=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-indigo-600",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},[s("path",{fill:"currentColor",d:"M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z"})],-1),k1=[x1],$1=se({__name:"DarkModeToggle",setup(e){const l=typeof document<"u"?document.querySelector("html"):null;let n=S(null==l?void 0:l.classList.contains("dark"));return(e,t)=>(a(),u("button",{type:"button",class:"bg-gray-200 dark:bg-gray-700 relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:ring-offset-black",role:"switch","aria-checked":"false",onClick:t[0]||(t[0]=e=>{n.value?null!=l&&l.classList.remove("dark"):null!=l&&l.classList.add("dark"),n.value=!n.value,localStorage.setItem("color-scheme",n.value?"dark":"light")})},[s("span",{class:x(`${o(n)?"translate-x-0":"translate-x-5"} pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white dark:bg-black shadow transform ring-0 transition ease-in-out duration-200`)},[s("span",{class:x(`${o(n)?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100"} absolute inset-0 h-full w-full flex items-center justify-center transition-opacity`),"aria-hidden":"true"},w1,2),s("span",{class:x(`${o(n)?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200"} absolute inset-0 h-full w-full flex items-center justify-center transition-opacity`),"aria-hidden":"true"},k1,2)],2)]))}}),C1={key:0},_1={key:1,class:"min-h-full flex flex-col justify-center py-12 sm:px-6 lg:px-8"},L1={class:"sm:mx-auto sm:w-full sm:max-w-md"},V1={class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},M1={key:0,class:"mt-4 text-center text-sm text-gray-600"},S1={class:"relative z-0 inline-flex shadow-sm rounded-md"},A1=["onClick"],F1={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},T1={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},I1=["onSubmit"],D1={class:"mt-8"},P1={key:1,class:"mt-6"},j1=gl('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500"> Or continue with </span></div></div>',1),O1={class:"mt-6 grid grid-cols-3 gap-3"},B1=["href","title"],E1={key:1,class:"h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},R1=s("path",{d:"M16 8a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1),N1=s("path",{d:"M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm7.992 22.926A5.002 5.002 0 0 0 19 20h-6a5.002 5.002 0 0 0-4.992 4.926a12 12 0 1 1 15.985 0z",fill:"currentColor"},null,-1),H1=[R1,N1],z1=se({__name:"SignIn",props:{provider:null,title:{default:"Sign In"},tabs:{type:[Boolean,String],default:!0},oauth:{type:[Boolean,String],default:!0}},emits:["login"],setup(c,{emit:t}){const l=c,{getMetadata:e,createDto:n}=et(),r=Ll(),i=bn()["signIn"],d=e({assert:!0}),v=d.plugins.auth,p=document.baseURI,m=d.app.baseUrl,g=S(n("Authenticate")),y=S(new Ye),h=S(l.provider),b=(at(()=>{null!=v&&v.authProviders.map(e=>e.formLayout).filter(e=>e).forEach(e=>e.forEach(e=>g.value[e.id]=""))}),f(()=>(null==v?void 0:v.authProviders.filter(e=>e.formLayout))||[])),w=f(()=>b.value[0]||{}),k=f(()=>b.value[Math.max(b.value.length-1,0)]||{}),C=f(()=>(h.value?null==v?void 0:v.authProviders.find(e=>e.name===h.value):null)??w.value),L=e=>!1===e||"false"===e;function V(e){return e.label||e.navItem&&e.navItem.label}const A=f(()=>{var e;return((null==(e=C.value)?void 0:e.formLayout)||[]).map(e=>{var t;return Object.assign({},e,{type:null==(t=e.type)?void 0:t.toLowerCase(),autocomplete:e.autocomplete||("password"===(null==(t=e.type)?void 0:t.toLowerCase())?"current-password":void 0)||("username"===e.id.toLowerCase()?"username":void 0),css:Object.assign({field:"col-span-12"},e.css)})})}),j=f(()=>!L(l.oauth)&&(null==v?void 0:v.authProviders.filter(e=>"oauth"===e.type))||[]),T=f(()=>{let e=po(null==v?void 0:v.authProviders.filter(e=>e.formLayout&&0<e.formLayout.length),(e,t)=>{e[V(t)||nt(t.name)]=t.name===w.value.name?"":t.name});var t=C.value;return e=t&&L(l.tabs)?{[V(t)||nt(t.name)]:t}:e}),F=f(()=>{var e=A.value.map(e=>e.id).filter(e=>e);return y.value.summaryMessage(e)});async function O(){var e;g.value.provider=C.value.name,y.value=await r.api(g.value),y.value.succeeded&&(e=y.value.response,i(e),t("login",e),y.value=new Ye,g.value=n("Authenticate"))}return(e,t)=>{const l=q("ErrorSummary"),n=q("AutoFormFields"),r=q("PrimaryButton"),i=q("Icon"),d=to("href");return o(v)?(a(),u("div",_1,[s("div",L1,[s("h2",V1,M(c.title),1),1<Object.keys(o(T)).length?(a(),u("p",M1,[s("span",S1,[(a(!0),u(ke,null,Me(o(T),(t,e)=>xt((a(),u("a",{onClick:e=>h.value=t,class:x([""===t||t===o(w).name?"rounded-l-md":t===o(k).name?"rounded-r-md -ml-px":"-ml-px",h.value===t?"z-10 outline-none ring-1 ring-indigo-500 border-indigo-500":"","cursor-pointer relative inline-flex items-center px-4 py-1 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"])},[ye(M(e),1)],10,A1)),[[d,{provider:t}]])),256))])])):$("",!0)]),s("div",F1,[o(F)?(a(),Y(l,{key:0,class:"mb-3",errorSummary:o(F)},null,8,["errorSummary"])):$("",!0),s("div",T1,[o(A).length?(a(),u("form",{key:0,onSubmit:He(O,["prevent"])},[ge(n,{modelValue:g.value,formLayout:o(A),api:y.value,hideSummary:!0,"divide-class":"","space-class":"space-y-6"},null,8,["modelValue","formLayout","api"]),s("div",D1,[ge(r,{class:"w-full"},{default:he(()=>[ye("Sign In")]),_:1})])],40,I1)):$("",!0),o(j).length?(a(),u("div",P1,[j1,s("div",O1,[(a(!0),u(ke,null,Me(o(j),e=>(a(),u("div",null,[s("a",{href:o(m)+e.navItem.href+"?continue="+o(p),title:V(e),class:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},[e.icon?(a(),Y(i,{key:0,image:e.icon,class:"h-5 w-5 text-gray-700"},null,8,["image"])):(a(),u("svg",E1,H1))],8,B1)]))),256))])])):$("",!0)])])])):(a(),u("div",C1,"No Auth Plugin"))}}}),U1={Alert:To,AlertSuccess:Uo,ErrorSummary:Wo,InputDescription:Jo,Icon:Ts,Loading:qa,OutlineButton:Ga,PrimaryButton:Ja,SecondaryButton:ei,TextLink:li,Breadcrumbs:ri,Breadcrumb:mi,NavList:gi,NavListItem:Vi,AutoQueryGrid:Zu,SettingsIcons:dd,FilterViews:xn,FilterColumn:wn,QueryPrefs:kn,EnsureAccess:Ds,EnsureAccessDialog:cd,TextInput:xd,TextareaInput:Md,SelectInput:Dd,CheckboxInput:Hd,TagInput:cc,FileInput:Dc,Autocomplete:Zc,Combobox:Yc,DynamicInput:e0,LookupInput:g0,AutoFormFields:p0,AutoForm:_0,AutoCreateForm:G0,AutoEditForm:yf,ConfirmDelete:xf,FormLoading:Vf,DataGrid:Tf,CellFormat:If,PreviewFormat:Ef,HtmlFormat:Uf,CloseButton:Wf,SlideOver:um,ModalDialog:gm,ModalLookup:u1,Tabs:y1,DarkModeToggle:$1,SignIn:z1},Pl=U1,J1={install(t){function l(t){var e=Object.keys(t).filter(e=>t[e]).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e])).join("&");return e?"?"+e:"./"}Object.keys(Pl).forEach(e=>{t.component(e,Pl[e])}),t.directive("href",function(e,t){e.href=l(t.value),e.onclick=e=>{e.preventDefault(),history.pushState(t.value,"",l(t.value))}})},component(e,t){return e?t?X.components[e]=t:X.components[e]||Pl[e]||null:null}};export{Z1 as css,J1 as default,bn as useAuth,Ll as useClient,_t as useConfig,G1 as useFiles,W1 as useFormatters,et as useMetadata,ea as useUtils};